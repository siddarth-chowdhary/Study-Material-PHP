<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<!-- saved from url=(0085)http://www.ntu.edu.sg/home/ehchua/programming/webprogramming/JavaScript_Examples.html -->
<html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">

<title>JavaScript by Examples</title>
<link href="./JavaScript by Examples_files/programming_notes_v1.css" rel="stylesheet" type="text/css">
<script type="text/javascript" src="./JavaScript by Examples_files/programming_notes_v1.js"></script>
<link rel="shortcut icon" href="http://www.ntu.edu.sg/home/ehchua/programming/favicon.ico" type="image/x-icon"></head>

<body>

<div id="wrap-outer">

<!-- header filled by JavaScript -->
<div id="header" class="header-footer"><p>&nbsp;</p></div>

<div id="wrap-inner">

<div id="wrap-toc">
<h5>TABLE OF CONTENTS <a id="show-toc" href="http://www.ntu.edu.sg/home/ehchua/programming/webprogramming/JavaScript_Examples.html#show-toc">(HIDE)</a></h5>
<div id="toc"></div>  <!-- for showing the "Table of Content" -->
</div>

<div id="content-header">
<h1>JavaScript Examples</h1>
</div>

<div id="content-main">

<p>Read "<a href="http://www.ntu.edu.sg/home/ehchua/programming/webprogramming/JavaScript_Introduction.html#JavaScript_Debug">Writing and Debugging JavaScripts</a>", before trying out these examples. At a minimum, you should have the "Firebug". It is very difficult to debug JavaScript codes due to its loose syntax. One misspell character, in variable or function name, may waste a lot of your time, as JavaScript treat it as a new item or abort the function.</p>

<p>It is a good practice to separate the HTML contents, CSS presentation styles and JavaScript programming codes in three different files, "<code>.html</code>", "<code>.css</code>" and "<code>.js</code>", for ease of maintenance and good software engineering design. The now-preferred approach is not to embed styles and JavaScript codes inside HTML document, but keep them in separate files.</p>

<p>These examples are testing only on Firefox 7. They may not run on your browsers!</p>

<h3>Validating HTML Form Inputs<a name="JSExample_FormInputValidation" id="JSExample_FormInputValidation">&nbsp;</a></h3>

<p>You can use JavaScript to valid an HTML form's input field before submitting the form data to the server. The JavaScript can verify that:</p>

<ol>
<li>A input field is required and cannot be left empty.</li>
<li>A input field has he required number of character (e.g., password).</li>
<li>A valid email address (user@hostname.com)</li>
<li>A valid numeric string (e.g., phone number, zip code, credit card number), or all-letter string</li>
<li>A valid date.</li>
</ol>

<h5>Screenshot</h5>

<p>Click the image to run the demo.</p>

<a href="http://www.ntu.edu.sg/home/ehchua/programming/webprogramming/jsdemo/FormValidation.html" target="_blank"><img class="image-center image-border" src="./JavaScript by Examples_files/JS_FormValidation.png" alt="image"></a>

<h5>"<code>FormValidation.html</code>"</h5>
<table class="table-program">
<colgroup><col class="col-line-number">
<col class="col-program">
</colgroup><tbody>
<tr>
<td>
<pre class="text-right">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69</pre>
</td>
<td>
<pre>&lt;html&gt;
&lt;head&gt;
  &lt;title&gt;Test JavaScript Form Validation&lt;/title&gt;
  &lt;link rel="stylesheet" href="FormValidation.css"&gt;
  &lt;script type="text/javascript" src="FormValidation.js" &gt;&lt;/script&gt;
&lt;/head&gt;
 
&lt;body&gt;
  &lt;h2&gt;Test JavaScript Form Validation&lt;/h2&gt;
 
  &lt;form id="theForm" method="get" action="submitData"&gt;
    &lt;table&gt;
    &lt;tr&gt;
      &lt;td&gt;Name&lt;span class="red"&gt;*&lt;/span&gt;&lt;/td&gt;
      &lt;td&gt;&lt;input type="text" id="name" name="name"/&gt;&lt;/td&gt;
      &lt;td id="nameError" class="red"&gt;&amp;nbsp;&lt;/td&gt;&lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;Address&lt;/td&gt;
      &lt;td&gt;&lt;input type="text" id="address" name="address" /&gt;&lt;/td&gt;
      &lt;td id="addressError" class="red"&gt;&amp;nbsp;&lt;/td&gt;&lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;Zip Code&lt;span class="red"&gt;*&lt;/span&gt;&lt;/td&gt;
      &lt;td&gt;&lt;input type="text" id="zipcode" name="zipcode" /&gt;&lt;/td&gt;
      &lt;td id="zipcodeError" class="red"&gt;&amp;nbsp;&lt;/td&gt;&lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;Country&lt;span class="red"&gt;*&lt;/span&gt;&lt;/td&gt;
      &lt;td&gt;&lt;select id="country" name="country"&gt;
            &lt;option value="" selected&gt;Please select...&lt;/option&gt;
            &lt;option value="AA"&gt;AA&lt;/option&gt;
            &lt;option value="BB"&gt;BB&lt;/option&gt;
            &lt;option value="CC"&gt;CC&lt;/option&gt;
          &lt;/select&gt;&lt;br /&gt;&lt;/td&gt;
      &lt;td id="countryError" class="red"&gt;&amp;nbsp;&lt;/td&gt;&lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;Gender&lt;span class="red"&gt;*&lt;/span&gt;&lt;/td&gt;
      &lt;td&gt;&lt;input type="radio" name="gender" value="m" /&gt;Male
          &lt;input type="radio" name="gender" value="f" /&gt;Female&lt;/td&gt;
      &lt;td id="genderError" class="red"&gt;&amp;nbsp;&lt;/td&gt;&lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;Preferences&lt;span class="red"&gt;*&lt;/span&gt;&lt;/td&gt;
      &lt;td&gt;&lt;input type="checkbox" name="color" value="r" /&gt;Red
          &lt;input type="checkbox" name="color" value="g" /&gt;Green
          &lt;input type="checkbox" name="color" value="b" /&gt;Blue&lt;/td&gt;
      &lt;td id="colorError" class="red"&gt;&amp;nbsp;&lt;/td&gt;&lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;Phone&lt;span class="red"&gt;*&lt;/span&gt;&lt;/td&gt;
      &lt;td&gt;&lt;input type="text" id="phone" name="phone" /&gt;&lt;/td&gt;
      &lt;td id="phoneError" class="red"&gt;&amp;nbsp;&lt;/td&gt;&lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;Email&lt;span class="red"&gt;*&lt;/span&gt;&lt;/td&gt;
      &lt;td&gt;&lt;input type="text" id="email" name="email" /&gt;&lt;/td&gt;
      &lt;td id="emailError" class="red"&gt;&amp;nbsp;&lt;/td&gt;&lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;password (6-8 characters)&lt;span class="red"&gt;*&lt;/span&gt;&lt;/td&gt;
      &lt;td&gt;&lt;input type="password" id="password" name="password" /&gt;&lt;/td&gt;
      &lt;td id="passwordError" class="red"&gt;&amp;nbsp;&lt;/td&gt;&lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;Verify password&lt;span class="red"&gt;*&lt;/span&gt;&lt;/td&gt;
      &lt;td&gt;&lt;input type="password" id="pwVerified" name="pwVerified" /&gt;&lt;/td&gt;
      &lt;td id="pwVerifiedError" class="red"&gt;&amp;nbsp;&lt;/td&gt;&lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;&amp;nbsp;&lt;/td&gt;
      &lt;td&gt;&lt;input type="submit" value="SEND" id="submit"/&gt;&amp;nbsp;
          &lt;input type="reset" value="CLEAR" id="reset"/&gt;&lt;/td&gt;
      &lt;td&gt;&amp;nbsp;&lt;/td&gt;&lt;/tr&gt;
    &lt;/table&gt;
  &lt;/form&gt;
&lt;/body&gt;
&lt;/html&gt;</pre>
</td>
</tr>
</tbody>
</table>

<h5>"<code>FormValidation.css</code>"</h5>

<table class="table-program">
<colgroup><col class="col-line-number">
<col class="col-program">
</colgroup><tbody>
<tr>
<td>
<pre class="text-right">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17</pre>
</td>
<td>
<pre>.red {  <span class="color-comment">/* for error messages */</span>
   color: red;
}
 
input.error {  <span class="color-comment">/* for the error input text fields */</span>
   border: 1px red inset;
   padding: 2px;
}
 
table {
   border: 0;
}
 
td {
   margin: 0;
   padding: 3px 10px 3px 3px;
}</pre>
</td>
</tr>
</tbody>
</table>

<h5>"<code>FormValidation.js</code>"</h5>

<table class="table-program">
<colgroup><col class="col-line-number">
<col class="col-program">
</colgroup><tbody>
<tr>
<td>
<pre class="text-right">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96
97
98
99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134
135
136
137
138
139
140
141
142
143
144
145
146
147
148
149
150
151
152
153
154
155
156
157
158
159
160
161
162
163
164
165
166
167
168
169
170
171
172
173
174
175</pre>
</td>
<td>
<pre>window.onload = init;
 
<span class="color-comment">// The "onload" handler. Run after the page is fully loaded.</span>
function init() {
   <span class="color-comment">// Attach "onsubmit" handler</span>
   document.getElementById("theForm").onsubmit = validateForm;
   <span class="color-comment">// Attach "onclick" handler to "reset" button</span>
   document.getElementById("reset").onclick = clearDisplay;
   <span class="color-comment">// Set initial focus</span>
   document.getElementById("name").focus();
}
 
<span class="color-comment">/* The "onsubmit" handler to validate the input fields.
 * Most of the input validation functions take 2 arguments:
 * inputId or inputName: the "id" of the &lt;input&gt; element to be validated
 *   or "name" for checkboxes and radio buttons.
 * errorMsg: the error message to be displayed if validation fails.
 *   The message shall be displayed on an element with id of
 *   inputID+"Error" if it exists; otherwise via an alert().
 */</span>
function validateForm() {
   return (isNotEmpty("name", "Please enter your name!")
        &amp;&amp; isNumeric("zipcode", "Please enter a 5-digit zip code!")
        &amp;&amp; isLengthMinMax("zipcode", "Please enter a 5-digit zip code!", 5, 5)
        &amp;&amp; isSelected("country", "Please make a selection!")
        &amp;&amp; isChecked("gender", "Please check a gender!")
        &amp;&amp; isChecked("color", "Please check a color!")
        &amp;&amp; isNumeric("phone", "Please enter a valid phone number!")
        &amp;&amp; isValidEmail("email", "Enter a valid email!")
        &amp;&amp; isLengthMinMax("password", "Enter a valid password!", 6, 8)
        &amp;&amp; verifyPassword("password", "pwVerified", "Different from the password!"));
}
 
<span class="color-comment">// Return true if the input value is not empty</span>
function isNotEmpty(inputId, errorMsg) {
   var inputElement = document.getElementById(inputId);
   var errorElement = document.getElementById(inputId + "Error");
   var inputValue = inputElement.value.trim();
   var isValid = (inputValue.length !== 0);  <span class="color-comment">// boolean</span>
   showMessage(isValid, inputElement, errorMsg, errorElement);
   return isValid;
}
 
<span class="color-comment">/* If "isValid" is false, print the errorMsg; else, reset to normal display.
 * The errorMsg shall be displayed on errorElement if it exists;
 *   otherwise via an alert().
 */</span>
function showMessage(isValid, inputElement, errorMsg, errorElement) {
   if (!isValid) {
      <span class="color-comment">// Put up error message on errorElement or via alert()</span>
      if (errorElement !== null) {
         errorElement.innerHTML = errorMsg;
      } else {
         alert(errorMsg);
      }
      <span class="color-comment">// Change "class" of inputElement, so that CSS displays differently</span>
      if (inputElement !== null) {
         inputElement.className = "error";
         inputElement.focus();
      }
   } else {
      <span class="color-comment">// Reset to normal display</span>
      if (errorElement !== null) {
         errorElement.innerHTML = "";
      }
      if (inputElement !== null) {
         inputElement.className = "";
      }
   }
}
 
<span class="color-comment">// Return true if the input value contains only digits (at least one)</span>
function isNumeric(inputId, errorMsg) {
   var inputElement = document.getElementById(inputId);
   var errorElement = document.getElementById(inputId + "Error");
   var inputValue = inputElement.value.trim();
   var isValid = (inputValue.search(/^[0-9]+$/) !== -1);
   showMessage(isValid, inputElement, errorMsg, errorElement);
   return isValid;
}
 
<span class="color-comment">// Return true if the input value contains only letters (at least one)</span>
function isAlphabetic(inputId, errorMsg) {
   var inputElement = document.getElementById(inputId);
   var errorElement = document.getElementById(inputId + "Error");
   var inputValue = inputElement.value.trim();
   var isValid = inputValue.match(/^[a-zA-Z]+$/);
   showMessage(isValid, inputElement, errorMsg, errorElement);
   return isValid;
}
 
<span class="color-comment">// Return true if the input value contains only digits and letters (at least one)</span>
function isAlphanumeric(inputId, errorMsg) {
   var inputElement = document.getElementById(inputId);
   var errorElement = document.getElementById(inputId + "Error");
   var inputValue = inputElement.value.trim();
   var isValid = inputValue.match(/^[0-9a-zA-Z]+$/);
   showMessage(isValid, inputElement, errorMsg, errorElement);
   return isValid;
}
 
<span class="color-comment">// Return true if the input length is between minLength and maxLength</span>
function isLengthMinMax(inputId, errorMsg, minLength, maxLength) {
   var inputElement = document.getElementById(inputId);
   var errorElement = document.getElementById(inputId + "Error");
   var inputValue = inputElement.value.trim();
   var isValid = (inputValue.length &gt;= minLength) &amp;&amp; (inputValue.length &lt;= maxLength);
   showMessage(isValid, inputElement, errorMsg, errorElement);
   return isValid;
}
 
<span class="color-comment">// Return true if the input value is a valid email address</span>
<span class="color-comment">// (For illustration only. Should use regexe in production.)</span>
function isValidEmail(inputId, errorMsg) {
   var inputElement = document.getElementById(inputId);
   var errorElement = document.getElementById(inputId + "Error");
   var inputValue = inputElement.value;
   var atPos = inputValue.indexOf("@");
   var dotPos = inputValue.lastIndexOf(".");
   var isValid = (atPos &gt; 0) &amp;&amp; (dotPos &gt; atPos + 1) &amp;&amp; (inputValue.length &gt; dotPos + 2);
   showMessage(isValid, inputElement, errorMsg, errorElement);
   return isValid;
}
 
<span class="color-comment">// Return true if selection is made (not default of "") in &lt;select&gt; input</span>
function isSelected(inputId, errorMsg) {
   var inputElement = document.getElementById(inputId);
   var errorElement = document.getElementById(inputId + "Error");
   var inputValue = inputElement.value;
   <span class="color-comment">// You need to set the default value of &lt;select&gt;'s &lt;option&gt; to "".</span>
   var isValid = inputValue !== "";
   showMessage(isValid, inputElement, errorMsg, errorElement);
   return isValid;
}
 
<span class="color-comment">// Return true if the one of the checkboxes or radio buttons is checked</span>
function isChecked(inputName, errorMsg) {
   var inputElements = document.getElementsByName(inputName);
   var errorElement = document.getElementById(inputName + "Error");
   var isChecked = false;
   for (var i = 0; i &lt; inputElements.length; i++) {
      if (inputElements[i].checked) {
         isChecked = true;  <span class="color-comment">// found one element checked</span>
         break;
      }
   }
   showMessage(isChecked, null, errorMsg, errorElement);
   return isChecked;
}
 
<span class="color-comment">// Verify password. The password is kept in element with id "pwId".</span>
<span class="color-comment">// The verified password in id "verifiedPwId".</span>
function verifyPassword(pwId, verifiedPwId, errorMsg) {
   var pwElement = document.getElementById(pwId);
   var verifiedPwElement = document.getElementById(verifiedPwId);
   var errorElement = document.getElementById(verifiedPwId + "Error");
   var isTheSame = (pwElement.value === verifiedPwElement.value);
   showMessage(isTheSame, verifiedPwElement, errorMsg, errorElement);
   return isTheSame;
}
 
<span class="color-comment">// The "onclick" handler for the "reset" button to clear the display</span>
function clearDisplay() {
   var elms = document.getElementsByTagName("*");  <span class="color-comment">// all tags</span>
   for (var i = 0; i &lt; elms.length; i++) {
      if ((elms[i].id).match(/Error$/)) {  <span class="color-comment">// no endsWith() in JS?</span>
         elms[i].innerHTML = "";
      }
      if (elms[i].className === "error") {  <span class="color-comment">// assume only one class</span>
         elms[i].className = "";
      }
   }
   <span class="color-comment">// Set initial focus</span>
   document.getElementById("name").focus();
}</pre>
</td>
</tr>
</tbody>
</table>

<h5>Dissecting the Program</h5>
<ol>
<li>We seperate the HTML contents, CSS presentation styles, and JavaScript programming codes in three files.</li>

<li>Let's begin with the HTML:

<ol>
<li><span class="line-heading-code-new">&lt;form id="theForm" method="get" action="submitData"&gt;</span><br>
  We define an HTML form with unique <code>id="theForm"</code>.</li>

<li><span class="line-heading-code-new">&lt;table&gt;...&lt;/table&gt;</span><br>
  We set up a table with three columns, which displays the labels, input elements and error messages (if any), respectively. See the screenshot.</li>

<li><span class="line-heading-code-new">&lt;td&gt;&lt;input type="text" id="name" name="name"/&gt;&lt;/td&gt;<br>
&lt;td id="nameError" class="red"&gt;&amp;nbsp;&lt;/td&gt;</span><br>
Each <code>&lt;input&gt;</code> element is assigned an unique <code>id</code>, so that it can be selected in JavaScript via the <code>document.getElementById()</code> function. It also contain a <code>name</code> attribute, with is set to the same value as <code>id</code>. The <code>&lt;td&gt;</code> element in the 3rd column for displaying the error message has an <code>id</code> made up of input element's <code>id</code> plus "Error".</li>

<li><span class="line-heading-code-new">&lt;select ...&gt;&lt;option value="" selected&gt;Please select...&lt;/option&gt;</span><br>
For the <code>&lt;select&gt;</code> element, we define a default non-selection <code>&lt;option&gt;</code>, with value of "" (empty string) and label of "Please select...". This is necessary so that we can detect whether the user has made a selection.</li>

<li>For checkboxes and radio buttons, we cannot use <code>id</code>, as there are more than one elements and <code>id</code> must be unique. Instead, we set a common <code>name</code>. The JavaScript would use <code>document.getElementsByName()</code> to select all the elements with the same <code>name</code>. The <code>&lt;td&gt;</code> element for displaying the error message has an <code>id</code> of <code>name</code> plus "Error".</li>

</ol>
</li>

<li>The CSS is simple:
<ol>

<li><span class="line-heading-code-new">.red { color: red; }</span><br>
  A class-selector for displaying the error messages in red.</li>
  
<li><span class="line-heading-code-new">input.error { border: 1px red inset; ... }</span><br>
A class-selector for displaying the erroneous <code>&lt;input&gt;</code> element with a red border. This is only applicable to text and password fields.</li>

</ol>
</li>

<li>We move on to the JavaScript:

<ol>
<li><span class="line-heading-code-new">window.onload = init;</span><br>
  We attach the <code>init()</code> function as the onload event handler. That is <code>init()</code> runs <em>after</em> the page is fully loaded.</li>

<li><span class="line-heading-code-new">function init() {<br>
&nbsp;&nbsp;&nbsp;document.getElementById("theForm").onsubmit = validateForm;<br>
&nbsp;&nbsp;&nbsp;document.getElementById("reset").onclick = clearDisplay;<br>
&nbsp;&nbsp;&nbsp;document.getElementById("name").focus();<br>
}</span><br>
In the <code>init()</code> function, we attach <code>validateForm</code> function as the <code>onsubmit</code> handler; <code>clearDisplay</code> function as the <code>onclick</code> handler; and set the initial <em>focus</em> to the <em>first</em> input element having the <code>id</code> of <code>name</code>.</li>
<li><span class="line-heading-code-new">function validateForm() {
return (isNotEmpty(...) &amp;&amp; isNumeric(...) &amp;&amp; ...); }</span><br>
The <code>validateForm()</code> function triggered when the user clicks the submit button. It calls the various input validation functions to validate the input fields. It returns <code>true</code> if <em>all</em> the input validation functions return <code>true</code>, resulted in the form data to be submitted to the <code>action</code>'s url. Otherwise, it returns <code>false</code>, the form data will not be submitted and the current page remains.</li>

<li><span class="line-heading-code-new">function isNotEmpty(inputId, errorMsg) {<br>
&nbsp;&nbsp;&nbsp;var inputElement = document.getElementById(inputId);<br>
&nbsp;&nbsp;&nbsp;var errorElement = document.getElementById(inputId + "Error");</span><br>
Let's look into an input validation function <code>isNotEmpty()</code> in details. It takes 2 arguments, an input element's <code>id</code>, and an error message. It first gets the input element via the <code>inputId</code>. It then gets the element for displaying error message via our agree-upon convention that its <code>id</code> is <code>inputId</code> plus "Error".</li>
  
<li><span class="line-heading-code-new">var inputValue = inputElement.value.trim();<br>
var isValid = (inputValue.length !== 0);<br>
showMessage(isValid, inputElement, errorMsg, errorElement);<br>
return isValid;</span><br>
It gets the <code>value</code> from the input element, <code>trim()</code> to remove the leading and trailing whitespaces. It then checks for empty string, and assigned the result to a boolean variable <code>isValid</code>. It invokes the <code>showMessage()</code> and return the boolean flag.</li>
  
<li><span class="line-heading-code-new">function showMessage(isValid, inputElement, errorMsg, errorElement) { ... }</span><br> 
  The <code>showMesaage()</code> accepts 4 arguments. If the input is invalid (<code>isValid</code> is <code>false</code>), it set the <code>innerHMTL</code> of <code>errorElement</code> to the <code>errorMsg</code>, and the <code>class</code> of <code>inputElement</code> to "<code>error</code>". CSS class-selector <code>input.error</code> will display the input element with a red boundary. If the <code>errorElement</code> is null, the <code>errorMsg</code> will be displayed via an <code>alert()</code>. Otherwise, it clears the <code>innerHTML</code> of the <code>errorElement</code> and the <code>class</code> attribute of the <code>inputElement</code>.</li>
  
<li><span class="line-heading-code-new">function isNumeric(inputId, errorMsg) {<br>
&nbsp;&nbsp;&nbsp;......<br>
&nbsp;&nbsp;&nbsp;var isValid = (inputValue.search(/^[0-9]+$/) !== -1);</span><br>
For input validation function such as <code>isNumeric()</code>, we use regular expression to perform pattern matching, e.g., regexe <code>/^[0-9]+$/</code> matches 1 or more digits; regexe  <code>/^[a-zA-Z]+$/</code> matches one or more letters (but no internationalization?!); <code>/^[0-9]{5,8}$/</code> matches string of 5 to 8 digits. The <code>string.search(regexe)</code> return the position of the match or -1 if there is no match. Regular expression is extremely powerful for text processing. Read "<a href="http://www.ntu.edu.sg/home/ehchua/programming/howto/Regexe.html">Regular Expression</a>" for more details.</li>
<li>In <code>isValidEmail()</code> function, we check for the pattern "<code>a@b.cc</code>" by checking for the position of <code>@</code> and <code>'.'</code>. This is done merely for illustration. In production, it is much easier to use a regexe such as  <code>/^[\w\-\.\+]+\@[a-zA-Z0-9\.\-]+\.[a-zA-z0-9]{2,4}$/</code>, or <code>/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/</code> (there are scary, but much more powerful in 1 line of code).</li>
<li><code>verifyPassword()</code>: [TODO]</li>
<li><code>clearDisplay()</code>: [TODO]</li>
</ol>
</li>

<li>Some notes in form input validation:
<ol>
<li>What is a valid name, address and zipcode? The name and address vary from country to country and they may contain non-ASCII characters. Zipcode may not be numeric and may contain space.</li>

<li>A password may contain letter, digit and special characters such as <code>@</code>. it probably does not contain space.</li></ol>
[TODO more]
</li>
</ol>

<h4>Another Version</h4>

<h5>HTML</h5>

<table class="table-program">
<colgroup><col class="col-line-number">
<col class="col-program">
</colgroup><tbody>
<tr>
<td>
<pre class="text-right">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91</pre>
</td>
<td>
<pre>&lt;!DOCTYPE html&gt;
&lt;html&gt;
&lt;head&gt;
  &lt;title&gt;Test JavaScript Form Validation&lt;/title&gt;
  &lt;link rel="stylesheet" href="FormValidation.css"&gt;
  &lt;script type="text/javascript" src="FormValidation.js" &gt;&lt;/script&gt;
&lt;/head&gt;
 
&lt;body&gt;
  &lt;h2&gt;Test JavaScript Form Validataion&lt;/h2&gt;
 
  &lt;form method="get" action="submitData" onsubmit="return validateForm(this)"&gt;
    &lt;table&gt;
    &lt;tr&gt;
      &lt;td&gt;Name&lt;span class="red"&gt;*&lt;/span&gt;&lt;/td&gt;
      &lt;td&gt;
        &lt;input type="text" id="name" name="name"/&gt;&amp;nbsp;&amp;nbsp;
        &lt;span id="nameError" class="red"&gt;&lt;/span&gt;
      &lt;/td&gt;&lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;Address&lt;/td&gt;
      &lt;td&gt;
        &lt;input type="text" id="address" name="address" /&gt;&amp;nbsp;&amp;nbsp;
        &lt;span id="addressError" class="red"&gt;&lt;/span&gt;
      &lt;/td&gt;&lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;Zip Code&lt;span class="red"&gt;*&lt;/span&gt;&lt;/td&gt;
      &lt;td&gt;
        &lt;input type="text" id="zipcode" name="zipcode" /&gt;&amp;nbsp;&amp;nbsp;
        &lt;span id="zipcodeError" class="red"&gt;&lt;/span&gt;
      &lt;/td&gt;&lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;Country&lt;span class="red"&gt;*&lt;/span&gt;&lt;/td&gt;
      &lt;td&gt;
        &lt;select id="country" name="country"&gt;
          &lt;option value="" selected&gt;Please select...&lt;/option&gt;
          &lt;option value="AA"&gt;AA&lt;/option&gt;
          &lt;option value="BB"&gt;BB&lt;/option&gt;
          &lt;option value="CC"&gt;CC&lt;/option&gt;
        &lt;/select&gt;&amp;nbsp;&amp;nbsp;
        &lt;span id="countryError" class="red"&gt;&lt;/span&gt;
      &lt;/td&gt;&lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;Gender&lt;span class="red"&gt;*&lt;/span&gt;&lt;/td&gt;
      &lt;td&gt;
        &lt;input type="radio" name="gender" value="m" /&gt;Male
        &lt;input type="radio" name="gender" value="f" /&gt;Female &amp;nbsp;&amp;nbsp;
        &lt;span id="genderError" class="red"&gt;&lt;/span&gt;
      &lt;/td&gt;&lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;Preferences&lt;span class="red"&gt;*&lt;/span&gt;&lt;/td&gt;
      &lt;td&gt;
        &lt;input type="checkbox" name="color" value="r" /&gt;Red
        &lt;input type="checkbox" name="color" value="g" /&gt;Green
        &lt;input type="checkbox" name="color" value="b" /&gt;Blue &amp;nbsp;&amp;nbsp;
        &lt;span id="colorError" class="red"&gt;&lt;/span&gt;
      &lt;/td&gt;&lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;Phone&lt;span class="red"&gt;*&lt;/span&gt;&lt;/td&gt;
      &lt;td&gt;
        &lt;input type="text" id="phone" name="phone" /&gt;&amp;nbsp;&amp;nbsp;
        &lt;span id="phoneError" class="red"&gt;&lt;/span&gt;
      &lt;/td&gt;&lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;Email&lt;span class="red"&gt;*&lt;/span&gt;&lt;/td&gt;
      &lt;td&gt;
        &lt;input type="text" id="email" name="email" /&gt;
        &lt;span id="emailError" class="red"&gt;&lt;/span&gt;
      &lt;/td&gt;&lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;password (6-8 characters)&lt;span class="red"&gt;*&lt;/span&gt;&lt;/td&gt;
      &lt;td&gt;
        &lt;input type="password" id="password" name="password" /&gt;&amp;nbsp;&amp;nbsp;
        &lt;span id="passwordError" class="red"&gt;&lt;/span&gt;
      &lt;/td&gt;&lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;Verify password&lt;span class="red"&gt;*&lt;/span&gt;&lt;/td&gt;
      &lt;td&gt;
        &lt;input type="password" id="pwVerified" name="pwVerified" /&gt;&amp;nbsp;&amp;nbsp;
        &lt;span id="pwVerifiedError" class="red"&gt;&lt;/span&gt;
      &lt;/td&gt;&lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;&amp;nbsp;&lt;/td&gt;
      &lt;td&gt;
        &lt;input type="submit" value="SEND" id="submit"/&gt;&amp;nbsp;
        &lt;input type="reset" value="CLEAR" id="reset"/&gt;&amp;nbsp;&amp;nbsp;
      &lt;/td&gt;&lt;/tr&gt;
    &lt;/table&gt;
  &lt;/form&gt;
&lt;/body&gt;
&lt;/html&gt;</pre>
</td>
</tr>
</tbody>
</table>

<h5>CSS</h5>
<table class="table-program">
<colgroup><col class="col-line-number">
<col class="col-program">
</colgroup><tbody>
<tr>
<td>
<pre class="text-right">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19</pre>
</td>
<td>
<pre><span class="color-comment">/* for error messages */</span>
.red {
   color: red;
}
 
<span class="color-comment">/* for the error input text fields */</span>
input.error {
   border: 1px red inset;
   padding: 2px;
}
 
table {
   border: 0;
}
 
td {
   margin: 0;
   padding: 3px 10px 3px 3px;
}</pre>
</td>
</tr>
</tbody>
</table>


<h5>JavaScript</h5>
<table class="table-program">
<colgroup><col class="col-line-number">
<col class="col-program">
</colgroup><tbody>
<tr>
<td>
<pre class="text-right">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96
97
98
99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134
135
136
137
138
139
140
141
142
143
144
145
146
147
148
149
150
151
152
153
154
155
156
157
158
159
160
161
162
163
164
165
166
167
168</pre>
</td>
<td>
<pre>window.onload = init;   <span class="color-comment"> // run init() after the page is loaded</span>
 
<span class="color-comment">/*
 * Initialization
 */</span>
function init() {
  <span class="color-comment"> // Attach "onclick" handler to "reset" button</span>
   document.getElementById("reset").onclick = clearDisplay;
  <span class="color-comment"> // Set initial focus</span>
   document.getElementById("name").focus();
}
 
<span class="color-comment">/*
 * The "onsubmit" handler to validate the input fields.
 * Most of the input validation functions take 3 arguments:
 *   inputElement: to be validated
 *   errMsg: the error message to be displayed if validation fails.
 *   errElm: to place the error message (or via alert if this is null)
 */</span>
function validateForm(thisForm) {
   with(thisForm) {
      return (isNotEmpty(name.value, name, "Please enter your name!", nameError)
           &amp;&amp; isNumeric(zipcode.value, zipcode, "Please enter a 5-digit zip code!", zipcodeError)
           &amp;&amp; isLengthMinMax(zipcode.value, 5, 5, zipcode, "Please enter a 5-digit zip code!", zipcodeError)
           &amp;&amp; isSelected(country.value, country, "Please make a selection!", countryError)
           &amp;&amp; isChecked("gender", null, "Please check a gender!", genderError)
           &amp;&amp; isChecked("color", null, "Please check a color!", colorError)
           &amp;&amp; isNumeric(phone.value, phone, "Please enter a valid phone number!", phoneError)
           &amp;&amp; isValidEmail(email.value, email, "Enter a valid email!", emailError)
           &amp;&amp; isValidPassword(password.value, password, "Password shall be 6-8 characters!", passwordError)
           &amp;&amp; verifyPassword(password.value, pwVerified.value, pwVerified, "Different from new password!", pwVerifiedError));
   }
}
 
<span class="color-comment">/*
 * Helper function to show or clear error message, and set focus
 *   to the input element for correcting error.
 * If isValid is false, show the errMsg on errElm, and place the
 *   focus on the focusInputElm for correcting the error.
 * Else, clear previous errMsg on errElm, if any.
 *
 * Parameters focusInputElm, errMsg and errElm are optional.
 */</span>
function showMessageAndFocus(isValid, focusInputElm, errMsg, errElm) {
   if (!isValid) {
     <span class="color-comment"> // Show errMsg on errElm, if provided.</span>
      if (errElm !== undefined &amp;&amp; errElm !== null
            &amp;&amp; errMsg !== undefined &amp;&amp; errMsg !== null) {
         errElm.innerHTML = errMsg;
      }
     <span class="color-comment"> // Set focus on Input Element for correcting error, if provided.</span>
      if (focusInputElm !== undefined &amp;&amp; focusInputElm !== null) {
         focusInputElm.className = "error";
         focusInputElm.focus();
      }
   } else {
     <span class="color-comment"> // Clear previous error message on errElm, if provided.</span>
      if (errElm !== undefined &amp;&amp; errElm !== null) {
         errElm.innerHTML = "";
      }
      if (focusInputElm !== undefined &amp;&amp; focusInputElm !== null) {
         focusInputElm.className = "";
      }
   }
}
 
<span class="color-comment">/* Validate the inputValue is not empty (and not null). */</span>
function isNotEmpty(inputValue, focusInputElm, errMsg, errElm) {
   var isValid = (inputValue !== null)
              &amp;&amp; (inputValue.trim() !== "");
   showMessageAndFocus(isValid, focusInputElm, errMsg, errElm);
   return isValid;
}
 
<span class="color-comment">/* Return true if the input value contains only digits (at least one) */</span>
function isNumeric(inputValue, focusInputElm, errMsg, errElm) {
   var isValid = (inputValue !== null
               &amp;&amp; inputValue.trim().match(/^\d+$/) !== null);
   showMessageAndFocus(isValid, focusInputElm, errMsg, errElm);
   return isValid;
}
 
<span class="color-comment">/* Return true if the input value contains only letters (at least one) */</span>
function isAlphabetic(inputValue, focusInputElm, errMsg, errElm) {
   var isValid = (inputValue !== null
               &amp;&amp; inputValue.trim().match(/^[a-zA-Z]+$/) !== null) ;
   showMessageAndFocus(isValid, focusInputElm, errMsg, errElm);
   return isValid;
}
 
<span class="color-comment">/* Return true if the input value contains only digits and letters (at least one) */</span>
function isAlphanumeric(inputValue, focusInputElm, errMsg, errElm) {
   var isValid = (inputValue !== null
               &amp;&amp; inputValue.trim().match(/^[0-9a-zA-Z]+$/) !== null);
   showMessageAndFocus(isValid, focusInputElm, errMsg, errElm);
   return isValid;
}
 
<span class="color-comment">/* Return true if the input length is between minLength and maxLength */</span>
function isLengthMinMax(inputValue, minLength, maxLength, focusInputElm, errMsg, errElm) {
   var inputValue = inputValue.trim();
   var isValid = (inputValue.length &gt;= minLength) &amp;&amp; (inputValue.length &lt;= maxLength);
   showMessageAndFocus(isValid, focusInputElm, errMsg, errElm);
   return isValid;
}
 
<span class="color-comment">// Return true if the input value is a valid email address</span>
function isValidEmail(inputValue, focusInputElm, errMsg, errElm) {
   var isValid = (inputValue !== null)
               &amp;&amp; (inputValue.trim().match(/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/) !== null);
   showMessageAndFocus(isValid, focusInputElm, errMsg, errElm);
   return isValid;
}
 
<span class="color-comment">/* Return true if selection is made (not default of "") in &lt;select&gt; input */</span>
function isSelected(inputValue, focusInputElm, errMsg, errElm) {
  <span class="color-comment"> // You need to set the default value of &lt;select&gt;'s &lt;option&gt; to "".</span>
   var isValid = (inputValue !== "");
   showMessageAndFocus(isValid, focusInputElm, errMsg, errElm);
   return isValid;
}
 
<span class="color-comment">/* Return true if the one of the checkboxes or radio buttons is checked
 * Need to check all elements of the "names" */</span>
function isChecked(inputName, focusInputElm, errMsg, errElm) {
   var inputElements = document.getElementsByName(inputName);
   var isChecked = false;
   for (var i = 0; i &lt; inputElements.length; i++) {
      if (inputElements[i].checked) {
         isChecked = true; <span class="color-comment"> // found one element checked</span>
         break;
      }
   }
   showMessageAndFocus(isChecked, focusInputElm, errMsg, errElm);
   return isChecked;
}
 
 
<span class="color-comment">// Validate password, 6-8 characters of [a-zA-Z0-9_]</span>
function isValidPassword(inputValue, focusInputElm, errMsg, errElm) {
   var isValid = (inputValue !== null)
               &amp;&amp; (inputValue.trim().match(/^\w{6,8}$/) !== null);
   showMessageAndFocus(isValid, focusInputElm, errMsg, errElm);
   return isValid;
}
 
 
<span class="color-comment">// Verify password.</span>
function verifyPassword(pw, verifiedpw, focusInputElm, errMsg, errElm) {
   var isTheSame = (pw === verifiedpw);
   showMessageAndFocus(isTheSame, focusInputElm, errMsg, errElm);
   return isTheSame;
}
 
<span class="color-comment">// The "onclick" handler for the "reset" button to clear the display</span>
function clearDisplay() {
   var elms = document.getElementsByTagName("*"); <span class="color-comment"> // all tags</span>
   for (var i = 0; i &lt; elms.length; i++) {
      if ((elms[i].id).match(/Error$/)) {
         elms[i].innerHTML = "";
      }
      if (elms[i].className === "error") { <span class="color-comment"> // assume only one class</span>
         elms[i].className = "";
      }
   }
  <span class="color-comment"> // Set initial focus</span>
   document.getElementById("name").focus();
}</pre>
</td>
</tr>
</tbody>
</table>

<h5>Notes:</h5>
<ol>
<li>For the JavaScript validation functions, it is more flexible to separate the input value and input element, so that the function can also be used in other contexts without the input element. Also, I made focusInputElm, errMsg, and errElm optional, so that these functions can be used for pure input value validation.</li>
</ol>


<h3>Tic-Tac-Toe</h3>

<h5>Screenshot</h5>

<p>Click the image to run the demo.</p>
<a href="http://www.ntu.edu.sg/home/ehchua/programming/webprogramming/jsdemo/TicTacToe.html" target="_blank"><img class="image-center image-border" src="./JavaScript by Examples_files/JS_TicTacToe.png" alt="image"></a>

<h5>"<code>TitTacToe.html</code>"</h5>

<table class="table-program">
<colgroup><col class="col-line-number">
<col class="col-program">
</colgroup><tbody>
<tr>
<td>
<pre class="text-right">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30</pre>
</td>
<td>
<pre>&lt;!DOCTYPE html&gt;
&lt;html&gt;
&lt;head&gt;
  &lt;title&gt;Tic-Tac-Toe&lt;/title&gt;
  &lt;link rel="stylesheet" href="TicTacToe.css"&gt;
  &lt;script src="TicTacToe.js"&gt;&lt;/script&gt;
&lt;/head&gt;
 
&lt;body&gt;
  &lt;h1&gt;Tic-Tac-Toe&lt;/h1&gt;
  &lt;table&gt;
    &lt;tr&gt;
      &lt;td id="cell0"&gt;&amp;nbsp;&lt;/td&gt;
      &lt;td id="cell1"&gt;&amp;nbsp;&lt;/td&gt;
      &lt;td id="cell2"&gt;&amp;nbsp;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td id="cell3"&gt;&amp;nbsp;&lt;/td&gt;
      &lt;td id="cell4"&gt;&amp;nbsp;&lt;/td&gt;
      &lt;td id="cell5"&gt;&amp;nbsp;&lt;/td&gt;
   &lt;/tr&gt;
   &lt;tr&gt;
      &lt;td id="cell6"&gt;&amp;nbsp;&lt;/td&gt;
      &lt;td id="cell7"&gt;&amp;nbsp;&lt;/td&gt;
      &lt;td id="cell8"&gt;&amp;nbsp;&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/table&gt;
  &lt;p&gt;&lt;input type="button" id="btnNewGame" value="New Game" /&gt;&lt;/p&gt;
&lt;/body&gt;
&lt;/html&gt;</pre>
</td>
</tr>
</tbody>
</table>

<h5>"<code>TitTacToe.css</code>"</h5>

<table class="table-program">
<colgroup><col class="col-line-number">
<col class="col-program">
</colgroup><tbody>
<tr>
<td>
<pre class="text-right">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38</pre>
</td>
<td>
<pre>body {
  background-color: white;
  color: black;
  font-family: Arial, Helvetica, sans-serif;
}
 
h1 {
  font-size: 28px;
}
 
table {
  border-collapse: collapse;
}
 
td {
  padding: 10px;
  border: 3px #888 solid;
  text-align: center;
  font-size: 28px;
  width: 20%;
  font-family: Consolas, monospace
}
 
<span class="color-comment">/* Set the border (top, right, bottom, left) of the cells */</span>
#cell0 { border-style: none  solid solid none;  }
#cell1 { border-style: none  solid solid solid; }
#cell2 { border-style: none  none  solid solid; }
#cell3 { border-style: solid solid solid none;  }
#cell4 { border-style: solid solid solid solid; }
#cell5 { border-style: solid none  solid solid; }
#cell6 { border-style: solid solid none  none;  }
#cell7 { border-style: solid solid none  solid; }
#cell8 { border-style: solid none  none  solid; }
 
<span class="color-comment">/* winning cells style */</span>
.winningCell {
  background-color: #f88;
}</pre>
</td>
</tr>
</tbody>
</table>

<h5>"<code>TitTacToe.js</code>"</h5>

<table class="table-program">
<colgroup><col class="col-line-number">
<col class="col-program">
</colgroup><tbody>
<tr>
<td>
<pre class="text-right">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96</pre>
</td>
<td>
<pre><span class="color-comment">/*
 * The cells are numbered from 0 to 8 from top-left to bottom-right.
 */</span>
 
window.onload = init;  <span class="color-comment">// run init() after the page is loaded</span>
 
const NUM_CELLS = 9;
 
<span class="color-comment">// A pattern is a 9-bit number where bit x represents cell x.</span>
const WINNING_PATTERNS
    = new Array(0007, 0070, 0700, 0444, 0222, 0111, 0421, 0124); <span class="color-comment">// Octal</span>
var crossPattern, noughtPattern;  <span class="color-comment">// keep the plays so far</span>
 
<span class="color-comment">// "cross" is currently playing (boolean of true or false)</span>
var crossPlaying;
 
<span class="color-comment">// Initialize the game</span>
function init() {
   resetGame();
   document.getElementById("btnNewGame").onclick = resetGame;
}
 
<span class="color-comment">// Reset game by clearing all the cells and player's pattern</span>
function resetGame() {
   crossPattern = 0;
   noughtPattern = 0;
   crossPlaying = true;
   for (var cellNum = 0; cellNum &lt; NUM_CELLS; cellNum++) {
      var elm = document.getElementById("cell" + cellNum);
      elm.innerHTML = "&amp;nbsp;";  <span class="color-comment">// Clear content</span>
      elm.className = "";        <span class="color-comment">// Reset the class, used by CSS</span>
      elm.onmousedown = play;    <span class="color-comment">// Attach mouse click handler</span>
   }
}
 
<span class="color-comment">// Mouse-click handler</span>
function play(evt) {
   var thisCell;
   if (evt) {  <span class="color-comment">// non-IE</span>
     thisCell = evt.target;
   } else {    <span class="color-comment">// IE</span>
     thisCell = window.event.srcElement;
   }
 
   <span class="color-comment">// Place the seed on the cell clicked and update the player's pattern</span>
   if (thisCell.innerHTML === "&amp;nbsp;") {
      if (crossPlaying) {
         thisCell.innerHTML = "x";
         crossPattern |=  Math.pow(2, thisCell.id.charAt(4));
      } else {
         thisCell.innerHTML = "o";
         noughtPattern |=  Math.pow(2, thisCell.id.charAt(4));
      }
   }
   if (!checkWin()) {
      <span class="color-comment">// Continue playing</span>
      <span class="color-comment">// Disable mouse click for this cell. This cell is no longer active</span>
      thisCell.onmousedown = null;
      <span class="color-comment">// toggling the current player</span>
      crossPlaying = !crossPlaying;
   }
}
 
<span class="color-comment">// Check if the current player wins the game</span>
function checkWin() {
   var theWinningPattern = -1;
   var playerPattern;
   if (crossPlaying) {
      playerPattern = crossPattern;
   } else {
      playerPattern = noughtPattern;
   }
 
   <span class="color-comment">// Check if playerPattern is one of the winning patterns</span>
   for (var i = 0; i &lt; WINNING_PATTERNS.length; i++) {
      if ((WINNING_PATTERNS[i] &amp; playerPattern) === WINNING_PATTERNS[i]) {
         theWinningPattern = WINNING_PATTERNS[i];
         break;
      }
   }
 
   <span class="color-comment">// Change the class name of the cells of the winning pattern</span>
   <span class="color-comment">// CSS class-selector displays them differently</span>
   if (theWinningPattern &gt; -1) {
      for (var cellNum = 0; cellNum &lt; NUM_CELLS; cellNum++) {
         var elm = document.getElementById("cell" + cellNum);
         if (theWinningPattern &amp; Math.pow(2, cellNum)) {
            elm.className = "winningCell";
         }
         elm.onmousedown = null;  <span class="color-comment">// disable mouse click for all cells</span>
      }
      return true;
   } else {
      return false;
   }
}</pre>
</td>
</tr>
</tbody>
</table>

<h5>Dissecting the Program</h5>

<ol>
<li>There are three files: an HTML, a CSS and a JavaScript, which cleanly separate their respective functions. Take note that the HTML file deals only with the content and there is no script nor style embedded.</li>
<li>The HTML page puts up a 3x3 table of 9 cells, each with a unique <code>id</code>. It also include a button for creating a new game.</li>
<li>The CSS define the presentation style for the HTML elements. A special class-selector called "<code>.winningCell</code>" is defined to change the background color of the 3 winning cells.</li>
<li>The <code>init()</code> function, which is the <code>onload</code> handler, resets the game variables and cell contents via <code>resetGame()</code>, and attaches the function <code>resetGame()</code> as the button's <code>onclick</code> handler. Take note that clicking the "New Game" button does not involve refreshing of the page (which requires a costly access to the server), but simply reseting all the game variables and cell contents.</li>
<li>We use <code>window.onload=init</code> to ensure that <code>init()</code> is run <em>after</em> the page is fully loaded, so as to access the elements defined in the page.</li>
<li>We define a global array <code>WINNING_PATTERNS</code>, to keep the eight 3-in-a-row winning patterns. Each pattern is a 9-bit number, with bit-x represents cell-x. For example, the binary number <code>000000111</code> indicates that cells 0, 1, and 2 are occupied. The numbers are expressed in octal with a leading zero. (JavaScript does not seen to support binary number with a leading <code>0b</code>, like C/C++/Java.) Similarly, we define two global variables, <code>crossPattern</code> and <code>noughtPattern</code> to keep track of the crosses and noughts placed on the game board so far.</li>
<li>A boolean flag <code>crossPlaying</code> is used to keep track of the current player.</li>
<li>The <code>resetGame()</code> function resets the game variables (empty the <code>crossPattern</code> and <code>noughtPattern</code> and  set the current player to "cross"). It also clears the contents of the cells, and attaches <code>play()</code> function as the <code>onmousedown</code> event handler, so that the user can click on the cell to play the game.</li>
<li>Whenever the user clicks on a cell, the <code>play()</code> event handler triggers with the <code>mousedown</code> event object as the argument. It first identifies the cell-clicked (with different methods for IE and non-IE browsers). It  places the current player's symbol on the game board, and updates the player's pattern. It then calls the <code>checkWin()</code> to check if the current player wins the game. If not, it disables this cell by removing the <code>onmousedown</code> handler, and toggles the current player.</li>
<li>The <code>chcekWin()</code> function checks the current player's pattern against the eight winning patterns. If the current player wins, it highlights the three winning cells by changing the cells' <code>class</code> attribute. The CSS class-selector will automatically display the cell with a different background color. It also disables all the cells. User has to click the "New Game" button to start a new game.</li>
</ol>


<h3>A Date Chooser</h3>

<h5>Screenshot</h5>
<p>Click the image to run the demo.</p>
<a href="http://www.ntu.edu.sg/home/ehchua/programming/webprogramming/jsdemo/DateChooser.html" target="_blank"><img class="image-center image-border" src="./JavaScript by Examples_files/JS_DateChooser.png" alt="image"></a>

<h5>"<code>dateUtil.js</code>"</h5>

<table class="table-program">
<colgroup><col class="col-line-number">
<col class="col-program">
</colgroup><tbody>
<tr>
<td>
<pre class="text-right">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28</pre>
</td>
<td>
<pre><span class="color-comment">// Return true if the given year is a leap year</span>
function isLeapYear(year) {
   return ((year % 4) === 0 &amp;&amp; ((year % 100) !== 0 || (year % 400) === 0));
}
 
<span class="color-comment">// Return the number of days in the given month (1-12) of the year (xxxx)</span>
function getDaysInMonth(year, month) {
   if (month === 2) {
      if (isLeapYear(year)) {
         return 29;
      } else {
         return 28;
      }
   } else if ((month === 1) || (month === 3) || (month === 5) || (month === 7)
       || (month === 8) || (month === 10) || (month === 12)) {
      return 31;
   } else {
      return 30;
   }
}
 
<span class="color-comment">// Get the day of the week given year, month (1-12) and day (1-31)</span>
function getDayInWeek(year, month, day) {
  var weekdays = ["Sunday", "Monday", "Tuesday", "Wednesday",
                  "Thursday", "Friday", "Saturday"];
  var theDate = new Date(year, month-1, day);
  return weekdays[theDate.getDay()];
}</pre>
</td>
</tr>
</tbody>
</table>

<h5>Dissecting the Program</h5>
<ol>
<li>The function <code>isLeapYear(<em>year</em>)</code> returns true if <em><code>year</code></em> is a leap year.</li>
<li>The function <code>getDaysInMonth(<em>year</em>, <em>month</em>)</code> returns the number of days in the given <code>month</code> (1-12) of the year (4-digit). Take note that JavaScript represents a month in the range of 0-11 (for Jan to Dec), instead of 1-12.</li>
<li>The function <code>getDayInWeek(<em>year</em>, <em>month</em>, <em>day</em>)</code> returns the day of the week (Sunday to Saturday). It constructs a built-in object <code>Date</code> with the given <em><code>year</code></em>, <em><code>month</code></em> and <em><code>day</code></em>, and use the <code>getDay()</code> function of the <code>Date</code> object to obtain the day of the week in the range of 0-6.</li>
</ol>

<h5>"<code>JSDateChooser.html</code>"</h5>

<table class="table-program">
<colgroup><col class="col-line-number">
<col class="col-program">
</colgroup><tbody>
<tr>
<td>
<pre class="text-right">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30</pre>
</td>
<td>
<pre>&lt;html&gt;
&lt;head&gt;
  &lt;title&gt;A Date Chooser&lt;/title&gt;
  &lt;script type="text/javascript" src="DateUtil.js"&gt;&lt;/script&gt;
  &lt;script type="text/javascript" src="DateChooser.js"&gt;&lt;/script&gt;
&lt;/head&gt;
&lt;body&gt;
  &lt;h2&gt;A Date Chooser&lt;/h2&gt;
  &lt;form id="theForm"&gt;
    Year: &lt;input type="text" name="year" id="year" size="4" maxLength="4" /&gt;
    Month: &lt;select name="month" id="month"&gt;
      &lt;option id="month1" value="1"&gt;Jan&lt;/option&gt;
      &lt;option id="month2" value="2"&gt;Feb&lt;/option&gt;
      &lt;option id="month3" value="3"&gt;Mar&lt;/option&gt;
      &lt;option id="month4" value="4"&gt;Apr&lt;/option&gt;
      &lt;option id="month5" value="5"&gt;May&lt;/option&gt;
      &lt;option id="month6" value="6"&gt;Jun&lt;/option&gt;
      &lt;option id="month7" value="7"&gt;Jul&lt;/option&gt;
      &lt;option id="month8" value="8"&gt;Aug&lt;/option&gt;
      &lt;option id="month9" value="9"&gt;Sep&lt;/option&gt;
      &lt;option id="month10" value="10"&gt;Oct&lt;/option&gt;
      &lt;option id="month11" value="11"&gt;Nov&lt;/option&gt;
      &lt;option id="month12" value="12"&gt;Dec&lt;/option&gt;
    &lt;/select&gt;
    Day: &lt;select name="day" id="day"&gt;&lt;/select&gt;&amp;nbsp;
    &lt;input type="text" name="dayInWeek" id="dayInWeek" readonly /&gt;&amp;nbsp;
    &lt;input type="button" id="btnNow" value="Now" /&gt;
  &lt;/form&gt;
&lt;/body&gt;
&lt;/html&gt;</pre>
</td>
</tr>
</tbody>
</table>

<h5>"<code>DateChooser.js</code>"</h5>

<table class="table-program">
<colgroup><col class="col-line-number">
<col class="col-program">
</colgroup><tbody>
<tr>
<td>
<pre class="text-right">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85</pre>
</td>
<td>
<pre>window.onload = init;
 
<span class="color-comment">// Global variables for the currently selected year, month and day</span>
var selectedYear;   <span class="color-comment">// 4-digit year</span>
var selectedMonth;  <span class="color-comment">// 1 to 12 for Jan to Dec</span>
var selectedDay;    <span class="color-comment">// 1 to 31</span>
 
<span class="color-comment">// The "onload" handler, runs after the page is fully loaded.</span>
function init() {
   setToday();      <span class="color-comment">// Set global variables</span>
   updateDisplay();
 
   document.getElementById("year").onchange = function() {
      selectedYear=this.value;
      <span class="color-comment">// In case the current day is no longer valid for non-leap year,</span>
      <span class="color-comment">// e.g., 29 Feb 2001. Set to the last year of the month</span>
      updateDayDisplay();
      updateDayInWeekDisplay();
   }
 
   document.getElementById("month").onchange = function() {
      selectedMonth=this.value;
      <span class="color-comment">// In case the current day is no longer valid, e.g., 31 in Feb.</span>
      <span class="color-comment">// Set to the last year of the month</span>
      updateDayDisplay();
      updateDayInWeekDisplay()
   }
 
   document.getElementById("day").onchange = function() {
      selectedDay=this.value;
      updateDayInWeekDisplay();
   }
 
   document.getElementById("btnNow").onclick = function() {
      setToday();
      updateDisplay();
   }
}
 
<span class="color-comment">// Set global variable selectedYear, selectedMonth and selectedDay</span>
<span class="color-comment">// to today.</span>
function setToday() {
   var now = new Date();
   selectedYear = now.getFullYear();   <span class="color-comment">// 4-digit year</span>
   selectedMonth = now.getMonth() + 1; <span class="color-comment">// 1 to 12 for Jan to Dec</span>
   selectedDay = now.getDate();        <span class="color-comment">// 1 to 31</span>
}
 
<span class="color-comment">// Update the year, month, day and day-in-week display according</span>
<span class="color-comment">// to the selected values.</span>
function updateDisplay() {
   <span class="color-comment">// Set the value of text fields and select the correct options</span>
   document.getElementById("year").value = selectedYear;
   updateMonthDisplay();
   updateDayDisplay();
   updateDayInWeekDisplay();
}
 
function updateMonthDisplay() {
   document.getElementById("month" + selectedMonth).selected = true;
}
 
function updateDayDisplay() {
   var elm = document.getElementById("day");
   elm.innerHTML = "";
   var daysInMonth = getDaysInMonth(selectedYear, selectedMonth);
   <span class="color-comment">// The selectedDay is no longer valid. Set to the last day of month</span>
   if (selectedDay &gt; daysInMonth) {
      selectedDay = daysInMonth;
   }
   var options = "";
   for (var day = 1; day &lt;= daysInMonth; day++) {
      options += "&lt;option value='" + day + "'";
      if (day === selectedDay) {
         options += " selected";
      }
      options += "&gt;" + day + "&lt;/option&gt;";
   }
   elm.innerHTML = options;
}
 
function updateDayInWeekDisplay() {
   document.getElementById("dayInWeek").value
      = getDayInWeek(selectedYear, selectedMonth, selectedDay);
}</pre>
</td>
</tr>
</tbody>
</table>

<h5>Dissecting the Program</h5>

<ol>
<li>The form consists of 5 input elements: a text field for the year, pull-down menus for month and day, a read-only text field for the day of the week. and a button to set the display to today. When the page is first loaded, the current date is display. If you change the year, month or day, the day of the week changes. If you change the year or month, the options in day adjust automatically, e.g., there are 28/29 days in Feb for non-leap and leap years.</li>

<li>[TODO]</li>
</ol>

<h3>Calendars</h3>

<h4>A Simple Monthly Calendar</h4>

<p>Click the image to run the demo.</p>
<a href="http://www.ntu.edu.sg/home/ehchua/programming/webprogramming/jsdemo/CalendarSimple.html" target="_blank"><img class="image-center" src="./JavaScript by Examples_files/JS_SimpleCalendar.png" alt="image"></a>

<h5>"<code>CalendarSimple.html</code>"</h5>

<table class="table-program">
<colgroup><col class="col-line-number">
<col class="col-program">
</colgroup><tbody>
<tr>
<td>
<pre class="text-right">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42</pre>
</td>
<td>
<pre>&lt;!DOCtype html&gt;
&lt;html&gt;
&lt;head&gt;
  &lt;title&gt;Calendar&lt;/title&gt;
  &lt;meta http-equiv="Content-type" content="text/html; charset=UTF-8"&gt;
  &lt;link rel="stylesheet" href="CalendarSimple.css"&gt;
  &lt;script type="text/javascript" src="DateUtil.js"&gt;&lt;/script&gt;
  &lt;script type="text/javascript" src="CalendarSimple.js"&gt;&lt;/script&gt;
&lt;/head&gt;
 
&lt;body&gt;
  &lt;h2&gt;Calendar&lt;/h2&gt;
 
  &lt;form id="frmCalendar"&gt;
    &lt;select id="selMonth"&gt;
      &lt;option&gt;January&lt;/option&gt;
      &lt;option&gt;February&lt;/option&gt;
      &lt;option&gt;March&lt;/option&gt;
      &lt;option&gt;April&lt;/option&gt;
      &lt;option&gt;May&lt;/option&gt;
      &lt;option&gt;June&lt;/option&gt;
      &lt;option&gt;July&lt;/option&gt;
      &lt;option&gt;August&lt;/option&gt;
      &lt;option&gt;September&lt;/option&gt;
      &lt;option&gt;October&lt;/option&gt;
      &lt;option&gt;November&lt;/option&gt;
      &lt;option&gt;December&lt;/option&gt;
    &lt;/select&gt;
    &lt;input type="text" id="tfYear" size="4" maxlength="4" /&gt;
    &lt;br /&gt;&lt;br /&gt;
 
    &lt;input type="button" id="btnPrevYear"  value=" &lt;&lt;  " /&gt;
    &lt;input type="button" id="btnPrevMonth" value="  &lt;  " /&gt;
    &lt;input type="button" id="btnToday"     value="Today" /&gt;
    &lt;input type="button" id="btnNextMonth" value="  &gt;  " /&gt;
    &lt;input type="button" id="btnNextYear"  value="  &gt;&gt; " /&gt;
    &lt;br /&gt;&lt;br /&gt;
 
    &lt;table id="tableCalendar"&gt;&lt;/table&gt;
  &lt;/form&gt;
&lt;/body&gt;
&lt;/html&gt;</pre>
</td>
</tr>
</tbody>
</table>

<h5><code>"CalendarSimple.css</code>"</h5>

<table class="table-program">
<colgroup><col class="col-line-number">
<col class="col-program">
</colgroup><tbody>
<tr>
<td>
<pre class="text-right">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27</pre>
</td>
<td>
<pre>.today {
  background: gray;
  color: white;
  font-weight: bold
}
 
.sunday {
  color: red
}
 
input, select {
  font-family: Consolas, monospace;
  font-weight: bold;
  color: blue
}
 
table {
  font-family: Consolas, monospace;
  text-align: right;
  border-collapse:collapse;
  border: 1px solid black
}
 
td, th {
  padding: 3px 5px;
  border: 1px solid black
}</pre>
</td>
</tr>
</tbody>
</table>

<h5><code>"CalendarSimple.js</code>"</h5>

<table class="table-program">
<colgroup><col class="col-line-number">
<col class="col-program">
</colgroup><tbody>
<tr>
<td>
<pre class="text-right">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96
97
98
99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134
135
136
137
138
139
140
141
142
143
144
145
146
147
148
149
150
151
152
153
154
155
156
157
158
159
160</pre>
</td>
<td>
<pre>window.onload = init;
 
<span class="color-comment">// Global variables</span>
<span class="color-comment">// Today's year, month(0-11) and day(1-31)</span>
var thisYear, thisMonth, thisDay;
 
<span class="color-comment">// The "onload" handler, run after the page is fully loaded.</span>
function init() {
   setToday();
 
   document.getElementById("selMonth").onchange = setMonth;
   document.getElementById("tfYear").onchange   = setYear;
 
   document.getElementById("btnPrevYear").onclick  = setPreviousYear;
   document.getElementById("btnPrevMonth").onclick = setPreviousMonth;
   document.getElementById("btnNextMonth").onclick = setNextMonth;
   document.getElementById("btnNextYear").onclick  = setNextYear;
   document.getElementById("btnToday").onclick     = setToday;
 
   document.getElementById("frmCalendar").onsubmit = function() {
      return false; <span class="color-comment">// Stay in current page, do not refresh.</span>
   }
}
 
<span class="color-comment">// Set thisYear, thisMonth, thisDay to Today</span>
<span class="color-comment">// So that we can highlight today on the calendar</span>
function setToday() {
   var now   = new Date();         <span class="color-comment">// today</span>
   thisDay   = now.getDate();      <span class="color-comment">// 1-31</span>
   thisMonth = now.getMonth();     <span class="color-comment">// 0-11</span>
   thisYear  = now.getFullYear();  <span class="color-comment">// 4-digit year</span>
 
   document.getElementById("selMonth").selectedIndex = thisMonth;
   document.getElementById("tfYear").value = thisYear;
   printCalendar(thisYear, thisMonth);
}
 
<span class="color-comment">// Print the month-calendar for the given 4-digit year and month (0-11)</span>
function printCalendar(year, month) {
   var daysInMonth = getDaysInMonth(year, month + 1);  <span class="color-comment">// number of days</span>
   var firstDayOfMonth = (new Date(year, month, 1)).getDay();  <span class="color-comment">// 0-6 for Sun to Sat</span>
 
   var tableInnerHTML = "&lt;tr&gt;&lt;th class='sunday'&gt;Sun&lt;/th&gt;&lt;th&gt;Mon&lt;/th&gt;&lt;th&gt;Tue&lt;/th&gt;"
        + "&lt;th&gt;Wed&lt;/th&gt;&lt;th&gt;Thu&lt;/th&gt;&lt;th&gt;Fri&lt;/th&gt;&lt;th&gt;Sat&lt;/th&gt;&lt;/tr&gt;";
 
   var tdCellCount = 0;  <span class="color-comment">// count of table's &lt;td&gt; cells</span>
   if (firstDayOfMonth !== 0) {  <span class="color-comment">// Leave these cells blank</span>
      tableInnerHTML += "&lt;tr&gt;&lt;td colspan='" + firstDayOfMonth + "'&gt;&lt;/td&gt;";
      tdCellCount = firstDayOfMonth;
   }
   for (var day = 1; day &lt;= daysInMonth; day++) {
      if (tdCellCount % 7 === 0) {  <span class="color-comment">// new table row</span>
         tableInnerHTML += "&lt;tr&gt;";
      }
 
      <span class="color-comment">// Use different style classes for today, sunday and other days</span>
      if ((day === thisDay) &amp;&amp; (month === thisMonth) &amp;&amp; (year === thisYear)) {
         tableInnerHTML += "&lt;td class='today'&gt;" + day + "&lt;/td&gt;";
      } else if (tdCellCount % 7 === 0) {
         tableInnerHTML += "&lt;td class='sunday'&gt;" + day + "&lt;/td&gt;";
      } else {
         tableInnerHTML += "&lt;td&gt;" + day + "&lt;/td&gt;";
      }
 
      tdCellCount++;
      if (tdCellCount % 7 === 0) {
         tableInnerHTML += "&lt;/tr&gt;";
      }
   }
   <span class="color-comment">// print the remaining cells and close the row</span>
   var remainingCells = 7 - tdCellCount % 7;
   if (remainingCells &lt; 7) {
      tableInnerHTML += "&lt;td colspan='" + remainingCells + "'&gt;&lt;/td&gt;&lt;/tr&gt;";
   }
 
   document.getElementById("tableCalendar").innerHTML = tableInnerHTML;
}
 
<span class="color-comment">// The onchange handler for the month selection</span>
function setMonth() {
   var year  = document.getElementById("tfYear").value;
   var month = document.getElementById("selMonth").selectedIndex;
   printCalendar(year, month);
}
 
<span class="color-comment">// The onchange handler for the year textfield</span>
function setYear() {
   var year  = document.getElementById("tfYear").value;
   var month = document.getElementById("selMonth").selectedIndex;
   if (isValidYear(year)) {
      printCalendar(year, month);
   }
}
 
<span class="color-comment">// Validate the year</span>
function isValidYear(year) {
   if (year &lt; 1 || year &gt; 9999) {
      alert ("Sorry, the year must be between 1 and 9999.");
      document.getElementById("tfYear").focus();
      return false;
   } else {
      return true;
   }
}
 
<span class="color-comment">// The onclick handler for the previous-year button</span>
function setPreviousYear() {
   var year  = document.getElementById("tfYear").value;
   var month = document.getElementById("selMonth").selectedIndex;
   year--;
   if (isValidYear(year)) {
      document.getElementById("tfYear").value = year;
      printCalendar(year, month);
   }
}
 
<span class="color-comment">// The onclick handler for the next-year button</span>
function setNextYear() {
   var year  = document.getElementById("tfYear").value;
   var month = document.getElementById("selMonth").selectedIndex;
   year++;
   if (isValidYear(year)) {
      document.getElementById("tfYear").value = year;
      printCalendar(year, month);
   }
}
 
<span class="color-comment">// The onclick handler for the previous-month button</span>
function setPreviousMonth() {
   var year  = document.getElementById("tfYear").value;
   var month = document.getElementById("selMonth").selectedIndex;
   if (month === 0) {
      month = 11;
      year--;
   } else {
      month--;
   }
   if (isValidYear(year)) {
      document.getElementById("tfYear").value = year;
      document.getElementById("selMonth").selectedIndex = month;
      printCalendar(year, month);
   }
}
 
<span class="color-comment">// The onclick handler for the next-year button</span>
function setNextMonth() {
   var year  = document.getElementById("tfYear").value;
   var month = document.getElementById("selMonth").selectedIndex;
   if (month === 11) {
      month = 0;
      year++;
   } else {
      month++;
   }
   if (isValidYear(year)) {
      document.getElementById("tfYear").value = year;
      document.getElementById("selMonth").selectedIndex = month;
      printCalendar(year, month);
   }
}</pre>
</td>
</tr>
</tbody>
</table>

<h5>Dissecting the Program</h5>
<ol>
<li>TODO</li>
</ol>

<h3>JavaScript Animation - A Digital Clock</h3>

<h5>Screenshot</h5>
<p>Click the image to run the demo.</p>

<a href="http://www.ntu.edu.sg/home/ehchua/programming/webprogramming/jsdemo/ClockDigital.html" target="_blank"><img class="image-center image-border" src="./JavaScript by Examples_files/JS_ClockDigital.png" alt="image"></a>

<h5>"<code>ClockDigital.html</code>"</h5>

<table class="table-program">
<colgroup><col class="col-line-number">
<col class="col-program">
</colgroup><tbody>
<tr>
<td>
<pre class="text-right">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21</pre>
</td>
<td>
<pre>&lt;html&gt;
&lt;head&gt;
&lt;title&gt;A JavaScript Clock&lt;/title&gt;
&lt;script type="text/javascript"&gt;
<strong>function initClock() {
  var now = new Date();
  var hr  = now.getHours();
  var min = now.getMinutes();
  var sec = now.getSeconds();
  if (min &lt; 10) min = "0" + min;  <span class="color-comment">// insert a leading zero</span>
  if (sec &lt; 10) sec = "0" + sec;
  document.getElementById('clockDisplay').innerHTML
     = "Time is " + hr + ":" + min + ":" + sec;
  setTimeout('initClock()', 500);
}</strong>
&lt;/script&gt;
&lt;/head&gt;
&lt;body <strong>onload="initClock()</strong>"&gt;
&lt;h1 <strong>id="clockDisplay"</strong>&gt;&lt;/h1&gt;
&lt;/body&gt;
&lt;/html&gt;</pre>
</td>
</tr>
</tbody>
</table>

<h5>Dissecting the Program</h5>

<ol>
<li>We use the <code>new Date()</code> to create a <code>Date</code> object with the current time and assign to the variable <code>now</code>.</li>
<li>We then use the <code>getHours()</code>, <code>getMinutes()</code>, <code>getSeconds()</code> function of <code>now</code> object to retrieve the hours, minutes and seconds.</li>
<li>We display the clock by setting the <code>innerHTML</code> property of the <code>&lt;h1&gt;</code> tag. We use the <code>getElementById()</code> function to retrieve the <code>&lt;h1&gt;</code> tag.</li>
<li>The function <code>initClock()</code> is invoked when the browser loads this page, by attaching it to the <code>onload</code> event handler.</li>
<li>In <code>initClock()</code>, the <code>setTimeout('initClock()', 500)</code> function is used to recursively invoke the <code>initClock()</code> function every 500 msec, to refresh the display.</li>
</ol>

<h3>JavaScript Animation - Bouncing Balls</h3>

<h5>Screenshot</h5>

<p>Click the image to run the demo.</p>

<a href="http://www.ntu.edu.sg/home/ehchua/programming/webprogramming/jsdemo/BouncingBallSimple.html" target="_blank"><img class="image-center image-border" src="./JavaScript by Examples_files/JS_BouncingBall.png" alt="image"></a>

<h5>"<code>BouncingBallSimple.html</code>"</h5>

<table class="table-program">
<colgroup><col class="col-line-number">
<col class="col-program">
</colgroup><tbody>
<tr>
<td>
<pre class="text-right">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16</pre>
</td>
<td>
<pre>&lt;!DOCTYPE html&gt;
&lt;html&gt;
&lt;head&gt;
  &lt;title&gt;Bouncing balls&lt;/title&gt;
  &lt;link rel="stylesheet" href="BouncingBallSimple.css"&gt;
  &lt;script type="text/javascript" src="BouncingBallSimple.js"&gt;&lt;/script&gt;
&lt;/head&gt;
 
&lt;body&gt;
  &lt;h2&gt;JavaScript Bouncing Ball&lt;/h2&gt;
  &lt;!-- holder for container box --&gt;
  &lt;div id="box"&gt;&lt;/div&gt;
  &lt;!-- Use name and class to handle more than one balls --&gt;
  &lt;img class="ball" name="ball" src="images/ball_red.gif" /&gt;
&lt;/body&gt;
&lt;/html&gt;</pre>
</td>
</tr>
</tbody>
</table>

<h5>"<code>BouncingBallSimple.css</code>"</h5>

<table class="table-program">
<colgroup><col class="col-line-number">
<col class="col-program">
</colgroup><tbody>
<tr>
<td>
<pre class="text-right">1
2
3
4
5
6
7
8
9
10
11
12</pre>
</td>
<td>
<pre>#box {  <span class="color-comment">/* The container box */</span>
  position: absolute;
  border: thick solid;
  border-color: red;
}
 
<span class="color-comment">/* The ball image.
 * Use class selector to handle more than one balls
*/</span>
img.ball {
  position: absolute;
}</pre>
</td>
</tr>
</tbody>
</table>

<h5>"<code>BouncingBallSimple.js</code>"</h5>

<table class="table-program">
<colgroup><col class="col-line-number">
<col class="col-program">
</colgroup><tbody>
<tr>
<td>
<pre class="text-right">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67</pre>
</td>
<td>
<pre>window.onload = init;
 
<span class="color-comment">// Constants to define the box dimensions</span>
const MIN_X = 20;
const MIN_Y = 80;
const WIDTH = 400;
const HEIGHT = 400;
const MAX_X = MIN_X + WIDTH - 1;
const MAX_Y = MIN_Y + HEIGHT - 1;
 
<span class="color-comment">// The ball</span>
var ballRadius = 30;
var ballSize = ballRadius*2 + 1;
<span class="color-comment">// Randomly place the initial ball within the box, slightly off from border</span>
var ballCenterX = (WIDTH - 2*ballSize)*Math.random() + (MIN_X + ballSize);
var ballCenterY = (HEIGHT - 2*ballSize)*Math.random() + (MIN_Y + ballSize);
<span class="color-comment">// Initial speed</span>
var ballSpeedX = 8;
var ballSpeedY = 6;
 
function init() {
   var box = document.getElementById("box");
   <span class="color-comment">// Position the box absolutely via CSS style</span>
   box.style.left = (MIN_X - 5) + "px";  <span class="color-comment">// unit in px (pixels)</span>
   box.style.top = (MIN_Y - 5) + "px";
   box.style.width = WIDTH + "px";
   box.style.height = HEIGHT + "px";
 
   var balls = document.getElementsByName("ball");
   <span class="color-comment">// Position the ball image absolutely via CSS style</span>
   balls[0].style.left = (ballCenterX - ballRadius) + "px";
   balls[0].style.top  = (ballCenterY - ballRadius) + "px";
   balls[0].style.width = ballSize + "px";
   balls[0].style.height = ballSize + "px";
 
   moveOneStep();
}
 
function moveOneStep() {
   <span class="color-comment">// Calculate the ball's new position</span>
   ballCenterX += ballSpeedX;
   ballCenterY += ballSpeedY;
   <span class="color-comment">// Check if the ball moves over the bounds</span>
   <span class="color-comment">// If so, adjust the position and speed.</span>
   if (ballCenterX - ballRadius &lt; MIN_X) {
      ballSpeedX = -ballSpeedX; <span class="color-comment">// Reflect along normal</span>
      ballCenterX = MIN_X + ballRadius; <span class="color-comment">// Re-position the ball at the edge</span>
   } else if (ballCenterX + ballRadius &gt; MAX_X) {
      ballSpeedX = -ballSpeedX;
      ballCenterX = MAX_X - ballRadius;
   }
   <span class="color-comment">// May cross both x and y bounds</span>
   if (ballCenterY - ballRadius &lt; MIN_Y) {
      ballSpeedY = -ballSpeedY;
      ballCenterY = MIN_Y + ballRadius;
   } else if (ballCenterY + ballRadius &gt; MAX_Y) {
      ballSpeedY = -ballSpeedY;
      ballCenterY = MAX_Y - ballRadius;
   }
 
   var balls = document.getElementsByName("ball");
   balls[0].style.left = (ballCenterX - ballRadius) + "px";
   balls[0].style.top  = (ballCenterY - ballRadius) + "px";
 
   <span class="color-comment">// Recursively call move after the specified msec</span>
   setTimeout("moveOneStep()", 60);
}</pre>
</td>
</tr>
</tbody>
</table>

<h5>Ball Images</h5>
<img src="./JavaScript by Examples_files/ball_red.gif" alt="image">
<img src="./JavaScript by Examples_files/ball_yellow.gif" alt="image">
<img src="./JavaScript by Examples_files/football.gif" width="31" height="31" alt="image">
<img src="./JavaScript by Examples_files/ball_blue.gif" alt="image">

<h5>Dissecting the Program</h5>

<ol>
<li>To perform animation in JavaScript, we use CSS's absolute positioning to position the image and then move the image. We define two CSS styles:

<ol>
<li>An id-selector <code>box</code> to absolutely position the container box. We use a <code>&lt;div id="box"&gt;</code> tag for the container box by enabling its <code>border</code> property. In the <code>init()</code> function, we retrieve the <code>&lt;div id="box"&gt;</code> element via <code>box=document.getElementById("box")</code>. We then absolutely position the <code>&lt;div&gt;</code> element via <code>box.style.left|top|width|height</code>.</li>

<li>An class-selector <code>img.ball</code> to absolutely position the ball. We use the class-selector for the ball in order to handle more than one balls. This is because <code>id</code> needs to be unique, but many elements can use the same <code>class</code>. The ball is represented by an <code>&lt;img class="ball" name="ball" src="images/ball_red.gif" /&gt;</code> tag. We use <code>balls=document.getElementsByName("ball")</code> to retrieve an array of the <code>&lt;img&gt;</code> elements. We then use <code>balls[0].style.left|top|width|height</code> to position the ball.</li></ol></li>

<li>The <code>onload</code> event handler invokes the <code>init()</code>, which positions the container box, and the initial position of the ball.</li>
<li>The <code>moveOneStep()</code> function invokes <code>setTimeout("moveOneStep()", 60)</code>. which recursively runs the move() at the specified time (msec) interval.</li>
<li>Read "<a href="http://www.ntu.edu.sg/home/ehchua/programming/java/J8a_GameIntro-BouncingBalls.html">The world of Bouncing Ball</a>" on the bouncing ball algorithm. There are many limitations on doing complex animation on JavaScript. Applet is a much better platform.</li>
</ol>

<h5>Creating a one-pixel image</h5>

<p>JavaScript's animation is often carry out by absolutely position (and re-position) an image via CSS <code>position:absolute</code> and <code><em>imgElm</em>.style.left|top|width|height</code> attributes. The image's width and height is controlled via the <code>style.width</code> and <code>style.height</code> properties. An one-pixel image (which is smallest in size) can be stretched to fill the specified <code>style.width</code> and <code>style.height</code>.</p>

<p>To create a one-pixel image:</p>

<ul>
<li>Launch "Paint"  Select the desired color  Fill  Select "Resize", and set the width and height to 1x1 pixel  Save as "png" or "gif".</li>
</ul>

<p>The one-pixel image can be stretched to a rectangle of any size, which can be used in application such as drawing 2D bar chart. It cannot be used as a round ball though.</p>
<p>You can also create a one-pixel animated image, which alternates a few colors.</p>

<h3>JavaScript Animation - Falling Snow, Falling Leave</h3>

<p>Click <a href="http://www.ntu.edu.sg/home/ehchua/programming/webprogramming/jsdemo/JSSnow.html" target="_blank">here</a> to run the demo.</p>

<h5>"<code>JSSnow.js</code>"</h5>

<table class="table-program">
<colgroup><col class="col-line-number">
<col class="col-program">
</colgroup><tbody>
<tr>
<td>
<pre class="text-right">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93</pre>
</td>
<td>
<pre><span class="color-comment">// Place &lt;script type="text/javascript" src="JSSnow.js"&gt;&lt;/script&gt; in &lt;head&gt;</span>
window.onload = init;
 
const NUMBER = 12;  <span class="color-comment">// Number of items</span>
const IMAGE_PATH = "images/"
<span class="color-comment">//var SOURCE_IMAGES = [</span>
<span class="color-comment">//   "snow1.gif", "snow2.gif", "snow3.gif", "snow4.gif"];</span>
const SOURCE_IMAGES = [
   "leaf_green.gif", "leaf_orange_green.gif", "leaf_red.gif",
   "leaf_yellow_green.gif", "leaf_rotten.gif"];
 
<span class="color-comment">// Each image has it own property, kept in an array</span>
var xPos       = new Array();  <span class="color-comment">// x position for the images</span>
var yPos       = new Array();  <span class="color-comment">// y position for the images</span>
var size       = new Array();  <span class="color-comment">// size (square) of the images</span>
var xStep      = new Array();  <span class="color-comment">// x displacement per time step</span>
var yStep      = new Array();  <span class="color-comment">// y displacement per time step</span>
var xSineMag   = new Array();  <span class="color-comment">// Magnitude of x sine variations</span>
var xStepAccum = new Array();  <span class="color-comment">// Accumulated sum of x displacement</span>
 
<span class="color-comment">// Screen width and height (browser dependent!)</span>
var xMin = document.documentElement.scrollLeft + 20;
var xMax = document.documentElement.scrollLeft
       + document.documentElement.clientWidth - 20;
var yMin = document.documentElement.scrollTop + 30
var yMax = document.documentElement.scrollTop
       + document.documentElement.clientHeight - 30;
 
<span class="color-comment">// Initialize the images and arrays</span>
function init() {
   for (var i = 0; i &lt; NUMBER; i++) {
      initItem(i);
 
      <span class="color-comment">// Absolutely position the images using CSS style</span>
      <span class="color-comment">// &lt;div&gt; tags shall be under the &lt;body&gt;</span>
      var imgElm = document.createElement("img");
      document.body.appendChild(imgElm);
      imgElm.clasName = "images";
      imgElm.name = "images";
      imgElm.src = IMAGE_PATH + SOURCE_IMAGES[i % SOURCE_IMAGES.length];
      imgElm.style.position = "absolute";
      imgElm.style.width = size[i] + "px";
      imgElm.style.height = size[i] + "px";
   }
   moveOneStep();
}
 
<span class="color-comment">// Initialize the falling item given the itemIndex of the array</span>
function initItem(itemIndex) {
   xStepAccum[itemIndex] = 0;
   xSineMag[itemIndex] = 20 + Math.random() * 40;  <span class="color-comment">// 20 to 60</span>
   <span class="color-comment">// Slight variations in size and speed</span>
   size[itemIndex]  = 25 + Math.random() * 5;    <span class="color-comment">// 5 to 30</span>
   xStep[itemIndex] = (Math.random() - 0.5) / 5; <span class="color-comment">// -0.1 to 0.1</span>
   yStep[itemIndex] = 1 + Math.random();         <span class="color-comment">// 1 to 2</span>
   <span class="color-comment">// Initially place the images randomly within the screen</span>
   xPos[itemIndex] = Math.random() * (xMax - xMin - size[itemIndex]*4)
                     + size[itemIndex] + xMin;
   yPos[itemIndex] = Math.random() * (yMax - yMin - size[itemIndex]*4)
                     + size[itemIndex] + yMin;
}
 
function moveOneStep() {
   xMin = document.documentElement.scrollLeft + 20;
   xMax = document.documentElement.scrollLeft
       + document.documentElement.clientWidth - 20;
   yMin = document.documentElement.scrollTop + 30
   yMax = document.documentElement.scrollTop
       + document.documentElement.clientHeight - 30;
   var images = document.getElementsByName("images");
   for (var i = 0; i &lt; NUMBER; ++ i) {  <span class="color-comment">// Go thru each image</span>
      <span class="color-comment">// update y position</span>
      yPos[i] += yStep[i];
      <span class="color-comment">// Check if the image falls outside the screen</span>
      if (yPos[i] &gt; yMax) {
         <span class="color-comment">// Reposition the image and change its speed</span>
         initItem(i);
         yPos[i] = 0;
      }
 
      <span class="color-comment">// update x position - in sine curve, with some randomness.</span>
      xStepAccum[i] += xStep[i];
      var xNew = xPos[i] + Math.random()*0.3 + xSineMag[i]*Math.sin(xStepAccum[i]);
      if (xNew &gt; xMax) {
         xNew = xMax;
      }
 
      <span class="color-comment">// Set the absolute position of the image</span>
      images[i].style.top  = yPos[i] + "px";
      images[i].style.left = xNew + "px";
   }
   setTimeout("moveOneStep()", 100);
}</pre>
</td>
</tr>
</tbody>
</table>

<h5>Images</h5>
<p>I collected these images from the web and converted into transparent GIF:</p>
<img src="./JavaScript by Examples_files/snow1.gif" width="30" height="30" alt="image">
<img src="./JavaScript by Examples_files/snow2.gif" width="30" height="30" alt="image">
<img src="./JavaScript by Examples_files/snow3.gif" width="30" height="30" alt="image">
<img src="./JavaScript by Examples_files/snow4.gif" width="30" height="30" alt="image">
<img src="./JavaScript by Examples_files/snow5.gif" width="30" height="30" alt="image">
<img src="./JavaScript by Examples_files/leaf_green.gif" width="30" height="30" alt="image">
<img src="./JavaScript by Examples_files/leaf_orange_green.gif" width="30" height="30" alt="image">
<img src="./JavaScript by Examples_files/leaf_red.gif" width="30" height="30" alt="image">
<img src="./JavaScript by Examples_files/leaf_rotten.gif" width="30" height="30" alt="image">
<img src="./JavaScript by Examples_files/leaf_yellow_green.gif" width="30" height="30" alt="image">

<h5>HTML</h5>
<p>To use this script, place the following line in your HTML file, and also check the image file name and path in the script.</p>
<pre class="color-example">&lt;script type="text/javascript" src="JSSnow.js"&gt;&lt;/script&gt;
</pre>

<h5>Dissecting the Program</h5>

<ol>
<li>The width and height of the displayed image is controlled by the CSS style.</li>
<li>To convert a GIF image to transparent using Photoshop: From "Image" menu  Mode   Color Table  Select the "Dropper"  Click on the background. This turns the background to check-box pattern (i.e., no color)  Save.</li>
<li>To convert a JPEG image to transparent GIF using Photoshop: From "Image" menu  Mode   Index mode  Color: 256  Check "Transparency". Then, do previous step and save as GIF format.</li>
</ol>

<p>[TODO] Convert to object-oriented.</p>

<h3>JavaScript Animation - X-Y Plotting</h3>

<h5>Screenshot</h5>

<p>Click the image to run the demo.</p>
<a href="http://www.ntu.edu.sg/home/ehchua/programming/webprogramming/jsdemo/XYPlot.html" target="_blank"><img class="image-center image-border" src="./JavaScript by Examples_files/JS_XYPlot.png" alt="image"></a>

<h5>"<code>XYPlot.html</code>"</h5>

<table class="table-program">
<colgroup><col class="col-line-number">
<col class="col-program">
</colgroup><tbody>
<tr>
<td>
<pre class="text-right">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38</pre>
</td>
<td>
<pre>&lt;!DOCTYPE html&gt;
&lt;html&gt;
&lt;head&gt;
  &lt;title&gt;XY-Ploting&lt;/title&gt;
  &lt;link rel="stylesheet" href="XYPlot.css" /&gt;
  &lt;script type="text/javascript" src="XYPlot.js"&gt;&lt;/script&gt;
&lt;/head&gt;
 
&lt;body&gt;
  &lt;h2&gt;JavaScript Plotting&lt;/h2&gt;
  &lt;table&gt;
    &lt;tr&gt;
      &lt;td&gt;
        &lt;fieldset&gt;
          &lt;legend&gt;New&lt;/legend&gt;
          X: &lt;input type="text" size="3" id="newX" /&gt;
          Y: &lt;input type="text" size="3" id="newY" /&gt;
          &lt;input id="btnCreate" type="button" value="CREATE" /&gt;
        &lt;/fieldset&gt;
      &lt;/td&gt;
      &lt;td&gt;
        &lt;fieldset&gt;
          &lt;legend&gt;Update&lt;/legend&gt;
          No: &lt;select name="updateNo" id="updateNo" &gt;&lt;/select&gt;
          X: &lt;input type="text" size="3" id="updateX" /&gt;
          Y: &lt;input type="text" size="3" id="updateY" /&gt;
          &lt;input id="btnUpdate" type="button" value="UPDATE" /&gt;
        &lt;/fieldset&gt;
      &lt;/td&gt;
    &lt;/tr&gt;
  &lt;/table&gt;
 
  &lt;!-- the container --&gt;
  &lt;div id="box" &gt;&lt;/div&gt;
  &lt;!-- contains all the items and item description --&gt;
  &lt;div id="allItems"&gt;&lt;/div&gt;
&lt;/body&gt;
&lt;/html&gt;</pre>
</td>
</tr>
</tbody>
</table>

<h5>"<code>XYPlot.css</code>"</h5>

<table class="table-program">
<colgroup><col class="col-line-number">
<col class="col-program">
</colgroup><tbody>
<tr>
<td>
<pre class="text-right">1
2
3
4
5
6
7
8
9
10</pre>
</td>
<td>
<pre><span class="color-comment">/* id-selector for the container */</span>
#box {
   position: absolute;
   border: thick solid red;
}
 
<span class="color-comment">/* class-selector for the items and item descriptions */</span>
.item, .itemDesc {
   position: absolute;
}</pre>
</td>
</tr>
</tbody>
</table>

<h5>"<code>XYPlot.js</code>"</h5>

<table class="table-program">
<colgroup><col class="col-line-number">
<col class="col-program">
</colgroup><tbody>
<tr>
<td>
<pre class="text-right">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71</pre>
</td>
<td>
<pre>window.onload = init;
 
const SOURCE_IMAGE = "images/car_green.gif";
const SIZE = 50;  <span class="color-comment">// width and height for the image</span>
const MARGIN_LEFT = 15;  <span class="color-comment">// left-margin for the container</span>
const MARGIN_TOP  = 180; <span class="color-comment">// top-margin for the container</span>
<span class="color-comment">// x, y coordinates of the items</span>
const X_MIN = 0;
const Y_MIN = 0;
const X_MAX = 600;
const Y_MAX = 300;
const WIDTH = X_MAX - X_MIN + 1;
const HEIGHT = Y_MAX - Y_MIN + 1;
 
var numItems = 0;  <span class="color-comment">// number of items created so far</span>
 
<span class="color-comment">// The onload handler. Initialize the bounds</span>
function init() {
   var box = document.getElementById("box");
   box.style.top = MARGIN_TOP + "px";
   box.style.left = MARGIN_LEFT + "px";
   box.style.width = WIDTH + "px";
   box.style.height = HEIGHT + "px";
 
   document.getElementById("btnCreate").onclick = newItem;
   document.getElementById("btnUpdate").onclick = updateItem;
}
 
<span class="color-comment">// Create a new item at x, y</span>
function newItem() {
   <span class="color-comment">// Need to parseInt as it will be added.</span>
   var x = parseInt(document.getElementById("newX").value);
   var y = parseInt(document.getElementById("newY").value);
   var displayX = x + MARGIN_LEFT;
   var displayY = y + MARGIN_TOP;
   if ((x &gt;= X_MIN) &amp;&amp; (x &lt;= X_MAX) &amp;&amp; (y &gt;= Y_MIN) &amp;&amp; (y &lt;= Y_MAX)) {
      numItems++;
      <span class="color-comment">// Put up an &lt;img&gt; to represent the item</span>
      var itemImg = "&lt;img class='item' name='item' src='"
            + SOURCE_IMAGE + "' style='width:" + SIZE
            + "px; height:" + SIZE + "px; top:" + displayY
            + "px; left:" + displayX + "px' /&gt;";
 
      <span class="color-comment">// Put up a &lt;p&gt; for the item description</span>
      var itemDesc = "&lt;p class='itemDesc' name='itemDesc' style='top:"
            + displayY + "px; left:" + displayX
            + "px'&gt;" + numItems + "&lt;/p&gt;";
 
      document.getElementById('allItems').innerHTML += itemImg + itemDesc;
      <span class="color-comment">// add a form's select option</span>
      document.getElementById('updateNo').innerHTML
            += "&lt;option&gt;" + numItems + "&lt;/option&gt;";
   }
}
 
<span class="color-comment">// Update the position of itemNo to x, y</span>
function updateItem() {
   var x = parseInt(document.getElementById("updateX").value);
   var y = parseInt(document.getElementById("updateY").value);
   var itemNo = document.getElementById("updateNo").value - 1;
 
   var items = document.getElementsByName("item");
   var itemDescs = document.getElementsByName("itemDesc");
   if (itemNo &lt; items.length
       &amp;&amp; (x &gt;= X_MIN) &amp;&amp; (x &lt;= X_MAX) &amp;&amp; (y &gt;= Y_MIN) &amp;&amp; (y &lt;= Y_MAX)) {
      items[itemNo].style.left = x + MARGIN_LEFT + "px";
      items[itemNo].style.top  = y + MARGIN_TOP + "px";
      itemDescs[itemNo].style.left = x + MARGIN_LEFT + "px";
      itemDescs[itemNo].style.top  = y + MARGIN_TOP + "px";
   }
}</pre>
</td>
</tr>
</tbody>
</table>

<h5>Images</h5>
<img src="./JavaScript by Examples_files/car_green.gif" alt="image">

<h5>Dissecting the Program</h5>
<p>[TODO]</p>

<h3>JavaScript - Bar Chart</h3>
<p>[TODO]</p>


<h3>JavaScript Animation - Bouncing Ball on HTML 5</h3>

<p>This example runs on browser that support HTML 5, such as Firefox and Chrome, exclude IE.</p>
<p>HTML 5 provides a 2D canvas, which you can draw primitive shapes such as a circle. No ball image is needed in this example.</p>
<p>Click <a href="http://www.ntu.edu.sg/home/ehchua/programming/webprogramming/jsdemo/BouncingBallHTML5.html">here</a> to run the demo.</p>

<h5>"<code>BouncingBallHtml5.html</code>"</h5>

<table class="table-program">
<colgroup><col class="col-line-number">
<col class="col-program">
</colgroup><tbody>
<tr>
<td>
<pre class="text-right">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77</pre>
</td>
<td>
<pre>&lt;!DOCTYPE html&gt;
&lt;html&gt;
&lt;head&gt;
&lt;meta charset="utf-8" /&gt;
&lt;title&gt;Bouncing Ball (HTML 5)&lt;/title&gt;
 
&lt;script&gt;
var MIN_X = 0;
var MIN_Y = 0;
var WIDTH = 520;
var HEIGHT = 410;
var MAX_X = MIN_X + WIDTH - 1;
var MAX_Y = MIN_Y + HEIGHT - 1;
 
var ballRadius = 30;
var ballSize = ballRadius*2 + 1;
<span class="color-comment">// Randomly place the initial ball within the box, slightly off from border</span>
var ballCenterX = (WIDTH - 2*ballSize)*Math.random() + (MIN_X + ballSize);
var ballCenterY = (HEIGHT - 2*ballSize)*Math.random() + (MIN_Y + ballSize);
<span class="color-comment">// Initial speed</span>
var ballSpeedX = 5;
var ballSpeedY = 3;
 
var context;
 
function init() {
  var canvas = document.getElementById('box');
  canvas.width = WIDTH;
  canvas.height = HEIGHT;
  canvas.style.border = "1px solid";
 
  context = canvas.getContext('2d');
  setInterval(draw, 30);
}
 
<span class="color-comment">// Draw the ball</span>
function draw() {
   <span class="color-comment">// Calculate the ball's new position</span>
   ballCenterX += ballSpeedX;
   ballCenterY += ballSpeedY;
   <span class="color-comment">// Check if the ball moves over the bounds</span>
   <span class="color-comment">// If so, adjust the position and speed.</span>
   if (ballCenterX - ballRadius &lt; MIN_X) {
      ballSpeedX = -ballSpeedX; <span class="color-comment">// Reflect along normal</span>
      ballCenterX = MIN_X + ballRadius; <span class="color-comment">// Re-position the ball at the edge</span>
   } else if (ballCenterX + ballRadius &gt; MAX_X) {
      ballSpeedX = -ballSpeedX;
      ballCenterX = MAX_X - ballRadius;
   }
   <span class="color-comment">// May cross both x and y bounds</span>
   if (ballCenterY - ballRadius &lt; MIN_Y) {
      ballSpeedY = -ballSpeedY;
      ballCenterY = MIN_Y + ballRadius;
   } else if (ballCenterY + ballRadius &gt; MAX_Y) {
      ballSpeedY = -ballSpeedY;
      ballCenterY = MAX_Y - ballRadius;
   }
 
   context.clearRect(MIN_X, MIN_Y, MAX_X, MAX_Y);
   context.fillStyle="#FF0000";
   context.beginPath();
   context.arc(ballCenterX, ballCenterY, ballRadius, 0, Math.PI*2, true);
   context.closePath();
   context.fill();
}
 
window.addEventListener("load", init, true);
&lt;/script&gt;
 
&lt;/head&gt;
&lt;body&gt;
  &lt;section&gt;
    &lt;h2&gt;Bouncing Ball (on HTML 5 Canvas)&lt;/h2&gt;
    <strong>&lt;canvas id="box"&gt;Canvas not supported&lt;/canvas&gt;</strong>
  &lt;/section&gt;
&lt;/body&gt;
&lt;/html&gt;</pre>
</td>
</tr>
</tbody>
</table>

<h5>Dissecting the Program</h5>

<ol>
<li>HTML 5 provides a new "Canvas API" to support 2D drawing. To use the canvas:

<ol>
<li>Create a canvas element via the new <code>&lt;canvas&gt;&lt;/canvas&gt;</code> tag.</li>
<li>In the script, select the canvas element (via <code>document.getElementById()</code>) and get the canvas' context (via <code>canvas.getContext('2d')</code>). Currently, only <code>'2d'</code> context is supported.</li>
<li>You can then use the context for drawing. For example, <code>clearRect()</code> to clear the container box; <code>beginPath()</code> and <code>closePath()</code> to enclose a path; <code>arc()</code>, <code>moveTo()</code>, <code>lineTo()</code> to define a path.</li></ol></li>


<li>We use <code>window.addEventListener("load", init, true)</code> to register an event handler (<code>init</code> function) to the <code>load</code> event.</li>
<li>We use <code>setInterval(draw, 30)</code> to schedule function <code>draw()</code> every 30 msec.</li>
<li>The ball bouncing algorithm is the same as the previous example.</li>


</ol>

<h3>JavaScript  Calculators</h3>

<h4>A Simple Calculator</h4>

<h5>Screenshot</h5>
<p>Click the image to run the demo.</p>

<a href="http://www.ntu.edu.sg/home/ehchua/programming/webprogramming/jsdemo/CalculatorSimple.html" target="_blank"><img class="image-center" src="./JavaScript by Examples_files/JS_CalculatorSimple.png" alt="image"></a>

<h5>"<code>CalculatorSimple.html</code>"</h5>

<table class="table-program">
<colgroup><col class="col-line-number">
<col class="col-program">
</colgroup><tbody>
<tr>
<td>
<pre class="text-right">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70</pre>
</td>
<td>
<pre>&lt;html&gt;
&lt;head&gt;
  &lt;title&gt;Simple Calculator&lt;/title&gt;
  &lt;style type="text/css"&gt;
     input {
       font-family:consola,monospace;
       color:blue
     }
     td {
       margin-left: auto;
       margin-right: auto;
       text-align: center
     }
  &lt;/style&gt;
&lt;/head&gt;
 
&lt;body&gt;
&lt;h2&gt;Simple Calculator&lt;/h2&gt;
 
&lt;form name="calcForm"&gt;
&lt;table border="5"&gt;
&lt;tr&gt;
  &lt;td colspan="4"&gt;&lt;input type="text" name="display"
                         style="text-align:right"&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
  &lt;td&gt;&lt;input type="button" name="btn1" value="1"
             onclick="calcForm.display.value += '1'"&gt;&lt;/td&gt;
  &lt;td&gt;&lt;input type="button" name="btn2" value="2"
             onclick="calcForm.display.value += '2'"&gt;&lt;/td&gt;
  &lt;td&gt;&lt;input type="button" name="btn3" value="3"
             onclick="calcForm.display.value += '3'"&gt;&lt;/td&gt;
  &lt;td&gt;&lt;input type="button" name="btnAdd" value="+"
             onclick="calcForm.display.value += ' + '"&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
  &lt;td&gt;&lt;input type="button" name="btn4" value="4"
             onclick="calcForm.display.value += '4'"&gt;&lt;/td&gt;
  &lt;td&gt;&lt;input type="button" name="btn5" value="5"
             onclick="calcForm.display.value += '5'"&gt;&lt;/td&gt;
  &lt;td&gt;&lt;input type="button" name="btn6" value="6"
             onclick="calcForm.display.value += '6'"&gt;&lt;/td&gt;
  &lt;td&gt;&lt;input type="button" name="btnSub" value="-"
             onclick="calcForm.display.value += ' - '"&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
  &lt;td&gt;&lt;input type="button" name="btn7" value="7"
             onclick="calcForm.display.value += '7'"&gt;&lt;/td&gt;
  &lt;td&gt;&lt;input type="button" name="btn8" value="8"
             onclick="calcForm.display.value += '8'"&gt;&lt;/td&gt;
  &lt;td&gt;&lt;input type="button" name="btn9" value="9"
             onclick="calcForm.display.value += '9'"&gt;&lt;/td&gt;
  &lt;td&gt;&lt;input type="button" name="btnMul" value="x"
             onclick="calcForm.display.value += ' * '"&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
  &lt;td&gt;&lt;input type="button" name="btnClear"
             value="C" onclick="calcForm.display.value = ''"&gt;&lt;/td&gt;
  &lt;td&gt;&lt;input type="button" name="btn0" value="0"
             onclick="calcForm.display.value += '0'"&gt;&lt;/td&gt;
  &lt;td&gt;&lt;input type="button" name="btnEqual" value="="
             onclick="calcForm.display.value = <strong>eval(calcForm.display.value)</strong>"&gt;&lt;/td&gt;
  &lt;td&gt;&lt;input type="button" name="btnDiv" value="/"
             onclick="calcForm.display.value += ' / '"&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;/table&gt;
&lt;/form&gt;
 
&lt;/body&gt;
&lt;/html&gt;</pre>
</td>
</tr>
</tbody>
</table>

<h5>Dissecting the Program</h5>
<ol>
<li>A CSS style is defined for the <code>&lt;input&gt;</code> tag to set the font face; another for the <code>&lt;td&gt;</code> tag to centralize the buttons within the cell.</li>
<li>A form (called "<code>calcForm</code>") is defined with a text field (called "<code>display</code>"), and 16 buttons.</li>
<li>The inputs are appended to <code>display.value</code>. The result is evaluated via the <code>eval()</code> function in the <code>onclick</code> handler for the <code>'='</code> button.</li>
</ol>

<h3>Sending an HTTP GET|POST Request via JavaScript</h3>

<p>Sending an HTTP GET request is easier, as the parameters can be included in the hyperlink. Sending a POST request is much harder, which is typically accomplished via a HTML form with method='POST'.</p>

<p>Other than using a HTML form, you can also trigger a HTTP POST via JavaScript, by creating and submitting an <em>virtual</em> form.</p>

<table class="table-program">
<colgroup><col class="col-line-number">
<col class="col-program">
</colgroup><tbody>
<tr>
<td>
<pre class="text-right">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39</pre>
</td>
<td>
<pre>&lt;html&gt;
&lt;head&gt;
&lt;title&gt;JavaScript Example: Sending HTTP POST Request&lt;/title&gt;
 
&lt;script type="text/javascript"&gt;
<span class="color-comment">/*
 * Send a POST request to /test
 * with parameter todo=update&amp;username=peter
 */</span>
function sendHttpPostRequest() {
   var form = document.createElement("form");
   form.setAttribute("method", "post");
   form.setAttribute("action", "/test.php");
 
   var hiddenField = document.createElement("input");
   hiddenField.setAttribute("type", "hidden");
   hiddenField.setAttribute("name", "todo");
   hiddenField.setAttribute("value", "update");
   form.appendChild(hiddenField);
 
   hiddenField = document.createElement("input");
   hiddenField.setAttribute("type", "hidden");
   hiddenField.setAttribute("name", "username");
   hiddenField.setAttribute("value", "peter");
   form.appendChild(hiddenField);
 
   document.body.appendChild(form);
   form.submit();
}
&lt;/script&gt;
&lt;/head&gt;
 
&lt;body&gt;
&lt;p&gt;
  &lt;a href="http://www.nowhere.com" onclick="sendHttpPostRequest(); return false;"&gt;
  Click to send an HTTP POST Request&lt;/a&gt;
&lt;/p&gt;
&lt;/body&gt;
&lt;/html&gt;</pre>
</td>
</tr>
</tbody>
</table>

<h5>Function for Sending an HTTP GET|POST Request</h5>
<p>You can use the following JavaScript function for send an HTTP GET|POST request:</p>

<table class="table-program">
<colgroup><col class="col-line-number">
<col class="col-program">
</colgroup><tbody>
<tr>
<td>
<pre class="text-right">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43</pre>
</td>
<td>
<pre>&lt;html&gt;
&lt;head&gt;
&lt;title&gt;JavaScript Example: Sending HTTP POST Request&lt;/title&gt;
 
&lt;script type="text/javascript"&gt;
<span class="color-comment">/*
 * Send an HTTP GET|POST request to path with params.
 * To call: sendHttpRequest('path', {'k1':'v1', 'k2':'v2'})
 */</span>
function sendHttpRequest(path, params, method) {
  <span class="color-comment"> // Set request method to POST if it is not specified.</span>
  <span class="color-comment"> // JavaScript's way of default function argument for trailing arguments</span>
   method = method || "post";
 
   var form = document.createElement("form");
   form.setAttribute("method", method);
   form.setAttribute("action", path);
 
   for (var key in params) {
       if (params.hasOwnProperty(key)) {
           var hiddenField = document.createElement("input");
           hiddenField.setAttribute("type", "hidden");
           hiddenField.setAttribute("name", key);
           hiddenField.setAttribute("value", params[key]);
 
           form.appendChild(hiddenField);
        }
   }
 
   document.body.appendChild(form);
   form.submit();
}
&lt;/script&gt;
&lt;/head&gt;
 
&lt;body&gt;
&lt;p&gt;
  &lt;a href="http://www.nowhere.com"
     onclick="sendHttpRequest('test.php', {'todo':'update', 'user':'peter'}); return false;"&gt;
  Click to send an HTTP POST Request&lt;/a&gt;
&lt;/p&gt;
&lt;/body&gt;
&lt;/html&gt;</pre>
</td>
</tr>
</tbody>
</table>

<h5>Duplicate Names</h5>

<p>The previous function cannot handle duplicate names, e.g., user[]=aaa&amp;user[]=bbb, as an object cannot have duplicate property. To support duplicate names, use two separate arrays for names and values instead, as follows:</p>

<table class="table-program">
<colgroup><col class="col-line-number">
<col class="col-program">
</colgroup><tbody>
<tr>
<td>
<pre class="text-right">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44</pre>
</td>
<td>
<pre>&lt;html&gt;
&lt;head&gt;
&lt;title&gt;JavaScript Example: Sending HTTP POST Request&lt;/title&gt;
 
&lt;script type="text/javascript"&gt;
<span class="color-comment">/*
 * Send an HTTP GET|POST request to path with name-value pairs
 *  in nameArray and valueArray. Allow duplicate names.
 * To call: sendHttpRequestDuplicateNames('path', ['k1', 'k2'], ['v1', 'v2'])
 */</span>
function sendHttpRequestDuplicateNames(path, nameArray, valueArray, method) {
   if (nameArray.length === 0 || nameArray.length !== valueArray.length) return false;
 
  <span class="color-comment"> // Set request method to POST if it is not specified.</span>
  <span class="color-comment"> // JavaScript's way of default function argument for trailing arguments</span>
   method = method || "post";
 
   var form = document.createElement("form");
   form.setAttribute("method", method);
   form.setAttribute("action", path);
 
   for (var i = 0; i &lt; nameArray.length; i++) {
      var hiddenField = document.createElement("input");
      hiddenField.setAttribute("type", "hidden");
      hiddenField.setAttribute("name", nameArray[i]);
      hiddenField.setAttribute("value", valueArray[i]);
 
      form.appendChild(hiddenField);
   }
 
   document.body.appendChild(form);
   form.submit();
}
&lt;/script&gt;
&lt;/head&gt;
 
&lt;body&gt;
&lt;p&gt;
  &lt;a href="http://www.nowhere.com"
     onclick="sendHttpRequestDuplicateNames('test.php', ['user[]', 'user[]'], ['peter', 'paul'], 'get'); return false;"&gt;
  Click to send an HTTP POST Request&lt;/a&gt;
&lt;/p&gt;
&lt;/body&gt;
&lt;/html&gt;</pre>
</td>
</tr>
</tbody>
</table>

<h5>AJAX POST Request</h5>
<p>You can also use JavaScript to send an AJAX POST request. Read "AJAX Basics".</p>

<h3>CURD (Create-Update-Read-Delete) Database Table</h3>
<p>[TODO]</p>

<p class="references">REFERENCES &amp; RESOURCES</p>
<ol>
<li>HTML/CSS/JavaScript Tutorial @ <a href="http://www.w3school.com/">http://www.w3school.com</a>.</li>
</ol>


</div> <!-- End the content-main division -->

<div id="content-footer">
<p>Latest version tested: Firefox 24.0, Firebug 1.12.1<br>
Last modified: September, 2013</p>
</div>

</div>  <!-- End the wrap-inner division -->

<!-- footer filled by JavaScript -->
<div id="footer" class="header-footer"><p>&nbsp;</p></div>

</div>  <!-- End the wrap-outer division -->



</body></html>