<!DOCTYPE html>
<!-- saved from url=(0071)http://www.ens.ro/2012/04/08/symfony2-jobeet-day-6-more-with-the-model/ -->
<html lang="en-US" xmlns:og="http://opengraphprotocol.org/schema/" xmlns:fb="http://www.facebook.com/2008/fbml"><!--<![endif]--><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<title>Symfony2 Jobeet Day 6: More with the Model | ENS</title>
<link rel="profile" href="http://gmpg.org/xfn/11">
<link rel="stylesheet" type="text/css" media="all" href="./Symfony2 Jobeet Day 6  More with the Model   ENS_files/style.css">
<link rel="pingback" href="http://www.ens.ro/xmlrpc.php">
<!--[if lt IE 9]>
<script src="http://www.ens.ro/wp-content/themes/twentyeleven/js/html5.js" type="text/javascript"></script>
<![endif]-->

	<link rel="stylesheet" href="./Symfony2 Jobeet Day 6  More with the Model   ENS_files/dcssb.css" type="text/css" media="screen">
	<!--Facebook OpenGraph Slick Social Share Buttons -->
	<meta property="og:site_name" content="ENS">
		<meta property="og:title" content="Symfony2 Jobeet Day 6: More with the Model">
			<meta property="og:description" content="The Doctrine Query Object
From the second day&#39;s requirements: On the homepage, the user sees the latest active jobs. But as of now, all jobs are displayed, whether they are active or not:

php
// ">
		
		<meta property="og:url" content="http://www.ens.ro/2012/04/08/symfony2-jobeet-day-6-more-with-the-model/">
		
		<meta property="og:image" content="">
		<meta property="fb:admins" content="533936499">
		<meta property="fb:app_id" content="">
		<meta property="og:type" content="article"><!--End Facebook OpenGraph Settings -->
		<link rel="alternate" type="application/rss+xml" title="ENS » Feed" href="http://www.ens.ro/feed/">
<link rel="alternate" type="application/rss+xml" title="ENS » Comments Feed" href="http://www.ens.ro/comments/feed/">

			<script src="./Symfony2 Jobeet Day 6  More with the Model   ENS_files/cb=gapi.loaded_1" async=""></script><script src="./Symfony2 Jobeet Day 6  More with the Model   ENS_files/cb=gapi.loaded_0" async=""></script><script type="text/javascript" async="" src="./Symfony2 Jobeet Day 6  More with the Model   ENS_files/plusone.js" gapi_processed="true"></script><script type="text/javascript" async="" src="./Symfony2 Jobeet Day 6  More with the Model   ENS_files/ga.js"></script><script type="text/javascript">//<![CDATA[
			// Google Analytics for WordPress by Yoast v4.2.8 | http://yoast.com/wordpress/google-analytics/
			var _gaq = _gaq || [];
			_gaq.push(['_setAccount', 'UA-29990339-1']);
							_gaq.push(['_trackPageview']);
			(function () {
				var ga = document.createElement('script');
				ga.type = 'text/javascript';
				ga.async = true;
				ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
				var s = document.getElementsByTagName('script')[0];
				s.parentNode.insertBefore(ga, s);
			})();
			//]]></script>
			<link rel="alternate" type="application/rss+xml" title="ENS » Symfony2 Jobeet Day 6: More with the Model Comments Feed" href="http://www.ens.ro/2012/04/08/symfony2-jobeet-day-6-more-with-the-model/feed/">
<link rel="stylesheet" id="contact-form-7-css" href="./Symfony2 Jobeet Day 6  More with the Model   ENS_files/styles.css" type="text/css" media="all">
<link rel="stylesheet" id="NextGEN-css" href="./Symfony2 Jobeet Day 6  More with the Model   ENS_files/nggallery.css" type="text/css" media="screen">
<link rel="stylesheet" id="shutter-css" href="./Symfony2 Jobeet Day 6  More with the Model   ENS_files/shutter-reloaded.css" type="text/css" media="screen">
<script type="text/javascript" src="./Symfony2 Jobeet Day 6  More with the Model   ENS_files/comment-reply.min.js"></script>
<script type="text/javascript" src="./Symfony2 Jobeet Day 6  More with the Model   ENS_files/jquery.js"></script>
<script type="text/javascript" src="./Symfony2 Jobeet Day 6  More with the Model   ENS_files/ga.social_tracking.js"></script>
<script type="text/javascript" src="./Symfony2 Jobeet Day 6  More with the Model   ENS_files/jquery.social.slick.1.0.js"></script>
<script type="text/javascript">
/* <![CDATA[ */
var shutterSettings = {"msgLoading":"L O A D I N G","msgClose":"Click to Close","imageCount":"1"};
/* ]]> */
</script>
<script type="text/javascript" src="./Symfony2 Jobeet Day 6  More with the Model   ENS_files/shutter-reloaded.js"></script>
<script type="text/javascript" src="./Symfony2 Jobeet Day 6  More with the Model   ENS_files/jquery.cycle.all.min.js"></script>
<script type="text/javascript" src="./Symfony2 Jobeet Day 6  More with the Model   ENS_files/ngg.slideshow.min.js"></script>
<link rel="EditURI" type="application/rsd+xml" title="RSD" href="http://www.ens.ro/xmlrpc.php?rsd">
<link rel="wlwmanifest" type="application/wlwmanifest+xml" href="http://www.ens.ro/wp-includes/wlwmanifest.xml"> 
<link rel="prev" title="PHP send zip file to browser for download" href="http://www.ens.ro/2012/04/07/php-send-zip-file-to-browser-for-download/">
<link rel="next" title="Titanic Super 3D" href="http://www.ens.ro/2012/04/09/titanic-super-3d/">
<meta name="generator" content="WordPress 3.5">
<link rel="canonical" href="./Symfony2 Jobeet Day 6  More with the Model   ENS_files/Symfony2 Jobeet Day 6  More with the Model   ENS.htm">
<link rel="shortlink" href="http://www.ens.ro/?p=771">
<!-- <meta name="NextGEN" version="1.9.10" /> -->
	<style type="text/css">.recentcomments a{display:inline !important;padding:0 !important;margin:0 !important;}</style>
<style type="text/css" id="custom-background-css">
body.custom-background { background-color: #f1f1f1; background-image: url('http://www.ens.ro/wp-content/uploads/2012/08/bgbody1.gif'); background-repeat: repeat; background-position: top left; background-attachment: fixed; }
</style>
<link rel="stylesheet" type="text/css" href="./Symfony2 Jobeet Day 6  More with the Model   ENS_files/shCore.css"><link rel="stylesheet" type="text/css" href="./Symfony2 Jobeet Day 6  More with the Model   ENS_files/shThemeDefault.css"><meta id="syntaxhighlighteranchor" name="syntaxhighlighter-version" content="3.1.3">
<style type="text/css">.fb_hidden{position:absolute;top:-10000px;z-index:10001}
.fb_invisible{display:none}
.fb_reset{background:none;border:0;border-spacing:0;color:#000;cursor:auto;direction:ltr;font-family:"lucida grande", tahoma, verdana, arial, sans-serif;font-size:11px;font-style:normal;font-variant:normal;font-weight:normal;letter-spacing:normal;line-height:1;margin:0;overflow:visible;padding:0;text-align:left;text-decoration:none;text-indent:0;text-shadow:none;text-transform:none;visibility:visible;white-space:normal;word-spacing:normal}
.fb_reset > div{overflow:hidden}
.fb_link img{border:none}
.fb_dialog{background:rgba(82, 82, 82, .7);position:absolute;top:-10000px;z-index:10001}
.fb_dialog_advanced{padding:10px;-moz-border-radius:8px;-webkit-border-radius:8px;border-radius:8px}
.fb_dialog_content{background:#fff;color:#333}
.fb_dialog_close_icon{background:url(http://static.ak.fbcdn.net/rsrc.php/v2/yq/r/IE9JII6Z1Ys.png) no-repeat scroll 0 0 transparent;_background-image:url(http://static.ak.fbcdn.net/rsrc.php/v2/yL/r/s816eWC-2sl.gif);cursor:pointer;display:block;height:15px;position:absolute;right:18px;top:17px;width:15px;top:8px\9;right:7px\9}
.fb_dialog_mobile .fb_dialog_close_icon{top:5px;left:5px;right:auto}
.fb_dialog_padding{background-color:transparent;position:absolute;width:1px;z-index:-1}
.fb_dialog_close_icon:hover{background:url(http://static.ak.fbcdn.net/rsrc.php/v2/yq/r/IE9JII6Z1Ys.png) no-repeat scroll 0 -15px transparent;_background-image:url(http://static.ak.fbcdn.net/rsrc.php/v2/yL/r/s816eWC-2sl.gif)}
.fb_dialog_close_icon:active{background:url(http://static.ak.fbcdn.net/rsrc.php/v2/yq/r/IE9JII6Z1Ys.png) no-repeat scroll 0 -30px transparent;_background-image:url(http://static.ak.fbcdn.net/rsrc.php/v2/yL/r/s816eWC-2sl.gif)}
.fb_dialog_loader{background-color:#f2f2f2;border:1px solid #606060;font-size:24px;padding:20px}
.fb_dialog_top_left,
.fb_dialog_top_right,
.fb_dialog_bottom_left,
.fb_dialog_bottom_right{height:10px;width:10px;overflow:hidden;position:absolute}
.fb_dialog_top_left{background:url(http://static.ak.fbcdn.net/rsrc.php/v2/ye/r/8YeTNIlTZjm.png) no-repeat 0 0;left:-10px;top:-10px}
.fb_dialog_top_right{background:url(http://static.ak.fbcdn.net/rsrc.php/v2/ye/r/8YeTNIlTZjm.png) no-repeat 0 -10px;right:-10px;top:-10px}
.fb_dialog_bottom_left{background:url(http://static.ak.fbcdn.net/rsrc.php/v2/ye/r/8YeTNIlTZjm.png) no-repeat 0 -20px;bottom:-10px;left:-10px}
.fb_dialog_bottom_right{background:url(http://static.ak.fbcdn.net/rsrc.php/v2/ye/r/8YeTNIlTZjm.png) no-repeat 0 -30px;right:-10px;bottom:-10px}
.fb_dialog_vert_left,
.fb_dialog_vert_right,
.fb_dialog_horiz_top,
.fb_dialog_horiz_bottom{position:absolute;background:#525252;filter:alpha(opacity=70);opacity:.7}
.fb_dialog_vert_left,
.fb_dialog_vert_right{width:10px;height:100%}
.fb_dialog_vert_left{margin-left:-10px}
.fb_dialog_vert_right{right:0;margin-right:-10px}
.fb_dialog_horiz_top,
.fb_dialog_horiz_bottom{width:100%;height:10px}
.fb_dialog_horiz_top{margin-top:-10px}
.fb_dialog_horiz_bottom{bottom:0;margin-bottom:-10px}
.fb_dialog_iframe{line-height:0}
.fb_dialog_content .dialog_title{background:#6d84b4;border:1px solid #3b5998;color:#fff;font-size:14px;font-weight:bold;margin:0}
.fb_dialog_content .dialog_title > span{background:url(http://static.ak.fbcdn.net/rsrc.php/v2/yd/r/Cou7n-nqK52.gif)
no-repeat 5px 50%;float:left;padding:5px 0 7px 26px}
body.fb_hidden{-webkit-transform:none;height:100%;margin:0;overflow:visible;position:absolute;top:-10000px;left:0;width:100%}
.fb_dialog.fb_dialog_mobile.loading{background:url(http://static.ak.fbcdn.net/rsrc.php/v2/ya/r/3rhSv5V8j3o.gif)
white no-repeat 50% 50%;min-height:100%;min-width:100%;overflow:hidden;position:absolute;top:0;z-index:10001}
.fb_dialog.fb_dialog_mobile.loading.centered{max-height:590px;min-height:590px;max-width:500px;min-width:500px}
#fb-root #fb_dialog_ipad_overlay{background:rgba(0, 0, 0, .45);position:absolute;left:0;top:0;width:100%;min-height:100%;z-index:10000}
#fb-root #fb_dialog_ipad_overlay.hidden{display:none}
.fb_dialog.fb_dialog_mobile.loading iframe{visibility:hidden}
.fb_dialog_content .dialog_header{-webkit-box-shadow:white 0 1px 1px -1px inset;background:-webkit-gradient(linear, 0% 0%, 0% 100%, from(#738ABA), to(#2C4987));border-bottom:1px solid;border-color:#1d4088;color:#fff;font:14px Helvetica, sans-serif;font-weight:bold;text-overflow:ellipsis;text-shadow:rgba(0, 30, 84, .296875) 0 -1px 0;vertical-align:middle;white-space:nowrap}
.fb_dialog_content .dialog_header table{-webkit-font-smoothing:subpixel-antialiased;height:43px;width:100%
}
.fb_dialog_content .dialog_header td.header_left{font-size:12px;padding-left:5px;vertical-align:middle;width:60px
}
.fb_dialog_content .dialog_header td.header_right{font-size:12px;padding-right:5px;vertical-align:middle;width:60px
}
.fb_dialog_content .touchable_button{background:-webkit-gradient(linear, 0% 0%, 0% 100%, from(#4966A6),
color-stop(0.5, #355492), to(#2A4887));border:1px solid #29447e;-webkit-background-clip:padding-box;-webkit-border-radius:3px;-webkit-box-shadow:rgba(0, 0, 0, .117188) 0 1px 1px inset,
rgba(255, 255, 255, .167969) 0 1px 0;display:inline-block;margin-top:3px;max-width:85px;line-height:18px;padding:4px 12px;position:relative}
.fb_dialog_content .dialog_header .touchable_button input{border:none;background:none;color:#fff;font:12px Helvetica, sans-serif;font-weight:bold;margin:2px -12px;padding:2px 6px 3px 6px;text-shadow:rgba(0, 30, 84, .296875) 0 -1px 0}
.fb_dialog_content .dialog_header .header_center{color:#fff;font-size:16px;font-weight:bold;line-height:18px;text-align:center;vertical-align:middle}
.fb_dialog_content .dialog_content{background:url(http://static.ak.fbcdn.net/rsrc.php/v2/y9/r/jKEcVPZFk-2.gif) no-repeat 50% 50%;border:1px solid #555;border-bottom:0;border-top:0;height:150px}
.fb_dialog_content .dialog_footer{background:#f2f2f2;border:1px solid #555;border-top-color:#ccc;height:40px}
#fb_dialog_loader_close{float:left}
.fb_dialog.fb_dialog_mobile .fb_dialog_close_button{text-shadow:rgba(0, 30, 84, .296875) 0 -1px 0}
.fb_dialog.fb_dialog_mobile .fb_dialog_close_icon{visibility:hidden}
.fb_iframe_widget{display:inline-block;position:relative}
.fb_iframe_widget span{display:inline-block;position:relative;text-align:justify}
.fb_iframe_widget iframe{position:absolute}
.fb_iframe_widget_lift{z-index:1}
.fb_hide_iframes iframe{position:relative;left:-10000px}
.fb_iframe_widget_loader{position:relative;display:inline-block}
.fb_iframe_widget_fluid{display:inline}
.fb_iframe_widget_fluid span{width:100%}
.fb_iframe_widget_loader iframe{min-height:32px;z-index:2;zoom:1}
.fb_iframe_widget_loader .FB_Loader{background:url(http://static.ak.fbcdn.net/rsrc.php/v2/y9/r/jKEcVPZFk-2.gif) no-repeat;height:32px;width:32px;margin-left:-16px;position:absolute;left:50%;z-index:4}
.fb_connect_bar_container div,
.fb_connect_bar_container span,
.fb_connect_bar_container a,
.fb_connect_bar_container img,
.fb_connect_bar_container strong{background:none;border-spacing:0;border:0;direction:ltr;font-style:normal;font-variant:normal;letter-spacing:normal;line-height:1;margin:0;overflow:visible;padding:0;text-align:left;text-decoration:none;text-indent:0;text-shadow:none;text-transform:none;visibility:visible;white-space:normal;word-spacing:normal;vertical-align:baseline}
.fb_connect_bar_container{position:fixed;left:0 !important;right:0 !important;height:42px !important;padding:0 25px !important;margin:0 !important;vertical-align:middle !important;border-bottom:1px solid #333 !important;background:#3b5998 !important;z-index:99999999 !important;overflow:hidden !important}
.fb_connect_bar_container_ie6{position:absolute;top:expression(document.compatMode=="CSS1Compat"? document.documentElement.scrollTop+"px":body.scrollTop+"px")}
.fb_connect_bar{position:relative;margin:auto;height:100%;width:100%;padding:6px 0 0 0 !important;background:none;color:#fff !important;font-family:"lucida grande", tahoma, verdana, arial, sans-serif !important;font-size:13px !important;font-style:normal !important;font-variant:normal !important;font-weight:normal !important;letter-spacing:normal !important;line-height:1 !important;text-decoration:none !important;text-indent:0 !important;text-shadow:none !important;text-transform:none !important;white-space:normal !important;word-spacing:normal !important}
.fb_connect_bar a:hover{color:#fff}
.fb_connect_bar .fb_profile img{height:30px;width:30px;vertical-align:middle;margin:0 6px 5px 0}
.fb_connect_bar div a,
.fb_connect_bar span,
.fb_connect_bar span a{color:#bac6da;font-size:11px;text-decoration:none}
.fb_connect_bar .fb_buttons{float:right;margin-top:7px}
.fb_edge_widget_with_comment{position:relative;*z-index:1000}
.fb_edge_widget_with_comment span.fb_edge_comment_widget{position:absolute}
.fb_edge_widget_with_comment span.fb_send_button_form_widget{z-index:1}
.fb_edge_widget_with_comment span.fb_send_button_form_widget .FB_Loader{left:0;top:1px;margin-top:6px;margin-left:0;background-position:50% 50%;background-color:#fff;height:150px;width:394px;border:1px #666 solid;border-bottom:2px solid #283e6c;z-index:1}
.fb_edge_widget_with_comment span.fb_send_button_form_widget.dark .FB_Loader{background-color:#000;border-bottom:2px solid #ccc}
.fb_edge_widget_with_comment span.fb_send_button_form_widget.siderender
.FB_Loader{margin-top:0}
.fbpluginrecommendationsbarleft,
.fbpluginrecommendationsbarright{position:fixed !important;bottom:0;z-index:999}
.fbpluginrecommendationsbarleft{left:10px}
.fbpluginrecommendationsbarright{right:10px}</style></head>

<body class="single single-post postid-771 single-format-standard custom-background single-author singular two-column right-sidebar" data-twttr-rendered="true">
<div id="page" class="hfeed">
	<header id="branding" role="banner">
			<hgroup>
				<h1 id="site-title"><span><a href="http://www.ens.ro/" title="ENS" rel="home">ENS</a></span></h1>
				<h2 id="site-description">Entertainment, News, Software</h2>
			</hgroup>

						<a href="http://www.ens.ro/">
									<img src="./Symfony2 Jobeet Day 6  More with the Model   ENS_files/cropped-wallpaper-15057031.jpg" width="1000" height="288" alt="">
							</a>
			
								<form method="get" id="searchform" action="http://www.ens.ro/">
		<label for="s" class="assistive-text">Search</label>
		<input type="text" class="field" name="s" id="s" placeholder="Search">
		<input type="submit" class="submit" name="submit" id="searchsubmit" value="Search">
	</form>
			
			<nav id="access" role="navigation">
				<h3 class="assistive-text">Main menu</h3>
								<div class="skip-link"><a class="assistive-text" href="http://www.ens.ro/2012/04/08/symfony2-jobeet-day-6-more-with-the-model/#content" title="Skip to primary content">Skip to primary content</a></div>
				<div class="skip-link"><a class="assistive-text" href="http://www.ens.ro/2012/04/08/symfony2-jobeet-day-6-more-with-the-model/#secondary" title="Skip to secondary content">Skip to secondary content</a></div>
								<div class="menu-my-menu-container"><ul id="menu-my-menu" class="menu"><li id="menu-item-161" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-home menu-item-161"><a href="http://www.ens.ro/">Home</a></li>
<li id="menu-item-160" class="menu-item menu-item-type-taxonomy menu-item-object-category current-post-ancestor current-menu-parent current-post-parent menu-item-160"><a href="http://www.ens.ro/category/web-development/">Web Development</a>
<ul class="sub-menu">
	<li id="menu-item-822" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-822"><a title="The Jobeet Tutorial with Symfony2" href="http://www.ens.ro/tag/symfony2-jobeet/">Symfony2 Jobeet</a></li>
	<li id="menu-item-2050" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-2050"><a title="Symfony2 Tutorials" href="http://www.ens.ro/tag/symfony2/">Symfony2</a></li>
	<li id="menu-item-2055" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-2055"><a title="Symfony 1.4 Tutorials" href="http://www.ens.ro/tag/symfony-1-4/">Symfony 1.4</a></li>
	<li id="menu-item-2049" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-2049"><a title="Zend Framework Tutorials" href="http://www.ens.ro/tag/zend/">Zend</a></li>
	<li id="menu-item-2063" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-2063"><a title="PHP Tutorials" href="http://www.ens.ro/tag/php-2/">PHP</a></li>
	<li id="menu-item-2064" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-2064"><a title="MySQL Tutorials" href="http://www.ens.ro/tag/mysql/">MySQL</a></li>
</ul>
</li>
<li id="menu-item-2073" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-2073"><a title="Entertainment" href="http://www.ens.ro/tag/entertainment/">Entertainment</a></li>
<li id="menu-item-159" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-159"><a href="http://www.ens.ro/about/">About ENS</a></li>
<li id="menu-item-1267" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-1267"><a href="http://www.ens.ro/contact/">Contact</a></li>
</ul></div>			</nav><!-- #access -->
	</header><!-- #branding -->


	<div id="main">

		<div id="primary">
			<div id="content" role="main">

				
					<nav id="nav-single">
						<h3 class="assistive-text">Post navigation</h3>
						<span class="nav-previous"><a href="http://www.ens.ro/2012/04/07/php-send-zip-file-to-browser-for-download/" rel="prev"><span class="meta-nav">←</span> Previous</a></span>
						<span class="nav-next"><a href="http://www.ens.ro/2012/04/09/titanic-super-3d/" rel="next">Next <span class="meta-nav">→</span></a></span>
					</nav><!-- #nav-single -->

					
<article id="post-771" class="post-771 post type-post status-publish format-standard hentry category-english category-php category-web-development tag-symfony2-jobeet">
	<header class="entry-header">
		<h1 class="entry-title">Symfony2 Jobeet Day 6: More with the Model</h1>

				<div class="entry-meta">
			<span class="sep">Posted on </span><a href="./Symfony2 Jobeet Day 6  More with the Model   ENS_files/Symfony2 Jobeet Day 6  More with the Model   ENS.htm" title="10:47 am" rel="bookmark"><time class="entry-date" datetime="2012-04-08T10:47:11+00:00">April 8, 2012</time></a><span class="by-author"> <span class="sep"> by </span> <span class="author vcard"><a class="url fn n" href="http://www.ens.ro/author/dragos/" title="View all posts by Dragos Holban" rel="author">Dragos Holban</a></span></span>		</div><!-- .entry-meta -->
			</header><!-- .entry-header -->

	<div class="entry-content">
		<h2>The Doctrine Query Object</h2>
<p>From the second day’s requirements: “<em>On the homepage, the user sees the latest active jobs.</em>” But as of now, all jobs are displayed, whether they are active or not:<span id="more-771"></span></p>
<pre class="brush: php; title: ; notranslate" title="">// src/Ens/JobeetBundle/Controller/JobController.php
// ...

class JobController extends Controller
{
  public function indexAction()
  {
    $em = $this-&gt;getDoctrine()-&gt;getEntityManager();

    $entities = $em-&gt;getRepository('EnsJobeetBundle:Job')-&gt;findAll();

    return $this-&gt;render('EnsJobeetBundle:Job:index.html.twig', array(
      'entities' =&gt; $entities
    ));

  // ...
}

</pre>
<p>An active job is one that was posted less than 30 days ago. The&nbsp;<code>$entities = $em-&gt;getRepository('EnsJobeetBundle:Job')-&gt;findAll();</code> method will make a request to the database to get all the jobs. We are not specifying any condition which means that all the records are retrieved from the database.</p>
<p>Let’s change it to only select active jobs:</p>
<pre class="brush: php; title: ; notranslate" title="">public function indexAction()
{
  $em = $this-&gt;getDoctrine()-&gt;getEntityManager();

  $query = $em-&gt;createQuery(
    'SELECT j FROM EnsJobeetBundle:Job j WHERE j.created_at &gt; :date'
  )-&gt;setParameter('date', date('Y-m-d H:i:s', time() - 86400 * 30));
  $entities = $query-&gt;getResult();

  return $this-&gt;render('EnsJobeetBundle:Job:index.html.twig', array(
    'entities' =&gt; $entities
  ));
}
</pre>
<h2>Debugging Doctrine generated SQL</h2>
<p>Sometimes, it is of great help to see the SQL generated by Doctrine; for instance, to debug a query that does not work as expected. In the dev environment, thanks to the symfony web debug toolbar, all the information you need is available within the comfort of your browser (http://jobeet.local/app_dev.php):</p>
<p><a href="http://www.ens.ro/wp-content/uploads/2012/04/jobeet_web_debug_bar.png"><img class="alignnone size-large wp-image-782" title="jobeet_web_debug_bar" src="./Symfony2 Jobeet Day 6  More with the Model   ENS_files/jobeet_web_debug_bar-1024x39.png" alt="" width="584" height="22"></a></p>
<p><a href="http://www.ens.ro/wp-content/uploads/2012/04/jobeet_debug_sql.png"><img class="alignnone size-large wp-image-783" title="jobeet_debug_sql" src="./Symfony2 Jobeet Day 6  More with the Model   ENS_files/jobeet_debug_sql-1024x763.png" alt="" width="584" height="435"></a></p>
<h2>Object Serialization</h2>
<p>Even if the above code works, it is far from perfect as it does not take into account some requirements from day 2: “<em>A user can come back to re-activate or extend the validity of the job for an extra 30 days…</em>”</p>
<p>But as the above code only relies on the <code>created_at</code> value, and because this column stores the creation date, we cannot satisfy the above requirement.</p>
<p>If you remember the database schema we have described during day 3, we also have defined an <code>expires_at</code> column. Currently, if this value is not set in fixture file, it remains always empty. But when a job is created, it can be automatically set to 30 days after the current date.</p>
<p>When you need to do something automatically before a Doctrine object is serialized to the database, you can add a new action to the lifecycle callbacks in the file that maps objects to the database, like we did earlier for the <code>created_at</code> column:</p>
<pre class="brush: plain; title: ; notranslate" title=""># src/Ens/JobeetBundle/Resources/config/doctrine/Job.orm.yml
# ...

  lifecycleCallbacks:
    prePersist: [ setCreatedAtValue, setExpiresAtValue ]
    preUpdate: [ setUpdatedAtValue ]
</pre>
<p>Now we have to rebuild the entities classes so Doctrine will add the new function:</p>
<pre class="brush: plain; light: true; title: ; notranslate" title="">php app/console doctrine:generate:entities EnsJobeetBundle</pre>
<p>Open the <code>src/Ens/JobeetBundle/Entity/Job.php</code> file and edit the new added function:</p>
<pre class="brush: php; title: ; notranslate" title=""># src/Ens/JobeetBundle/Entity/Job.php
# ...

public function setExpiresAtValue()
{
  if(!$this-&gt;getExpiresAt())
  {
    $now = $this-&gt;getCreatedAt() ? $this-&gt;getCreatedAt()-&gt;format('U') : time();
    $this-&gt;expires_at = new \DateTime(date('Y-m-d H:i:s', $now + 86400 * 30));
  }
}
</pre>
<p>Now, let’s change the action to use the <code>expires_at</code> column instead of the <code>created_at</code> one to select the active jobs:</p>
<pre class="brush: php; title: ; notranslate" title="">// src/Ens/JobeetBundle/Controller/JobController.php
// ...

public function indexAction()
{
  $em = $this-&gt;getDoctrine()-&gt;getEntityManager();

  $query = $em-&gt;createQuery(
    'SELECT j FROM EnsJobeetBundle:Job j WHERE j.expires_at &gt; :date'
  )-&gt;setParameter('date', date('Y-m-d H:i:s', time()));
  $entities = $query-&gt;getResult();

  return $this-&gt;render('EnsJobeetBundle:Job:index.html.twig', array(
    'entities' =&gt; $entities
  ));
}
</pre>
<h2 id="more-with-fixtures">More with Fixtures</h2>
<p>Refreshing the Jobeet homepage in your browser won’t change anything as the jobs in the database have been posted just a few days ago. Let’s change the fixtures to add a job that is already expired:</p>
<pre class="brush: php; title: ; notranslate" title="">// src/Ens/JobeetBundle/DataFixtures/ORM/LoadJobData.php
// ...

$job_expired = new Job();
$job_expired-&gt;setCategory($em-&gt;merge($this-&gt;getReference('category-programming')));
$job_expired-&gt;setType('full-time');
$job_expired-&gt;setCompany('Sensio Labs');
$job_expired-&gt;setLogo('sensio-labs.gif');
$job_expired-&gt;setUrl('http://www.sensiolabs.com/');
$job_expired-&gt;setPosition('Web Developer Expired');
$job_expired-&gt;setLocation('Paris, France');
$job_expired-&gt;setDescription('Lorem ipsum dolor sit amet, consectetur adipisicing elit.');
$job_expired-&gt;setHowToApply('Send your resume to lorem.ipsum [at] dolor.sit');
$job_expired-&gt;setIsPublic(true);
$job_expired-&gt;setIsActivated(true);
$job_expired-&gt;setToken('job_expired');
$job_expired-&gt;setEmail('job@example.com');
$job_expired-&gt;setCreatedAt(new \DateTime('2005-12-01'));

// ...

$em-&gt;persist($job_expired);
</pre>
<p>Reload the fixtures and refresh your browser to ensure that the old job does not show up:</p>
<pre class="brush: plain; light: true; title: ; notranslate" title="">php app/console doctrine:fixtures:load</pre>
<h2>Refactoring</h2>
<p>Although the code we have written works fine, it’s not quite right yet. Can you spot the problem?</p>
<p>The Doctrine query code does not belong to the action (the Controller layer), it belongs to the Model layer. In the MVC model, the Model defines all the business logic, and the Controller only calls the Model to retrieve data from it. As the code returns a collection of jobs, let’s move the code to the model. For that we will need to create a custom repository class for Job entity and to add the query to that class.</p>
<p>Open <code>/src/Ens/JobeetBundle/Resources/config/doctrine/Job.orm.yml</code> and add the following to it:</p>
<pre class="brush: plain; title: ; notranslate" title=""># /src/Ens/JobeetBundle/Resources/config/doctrine/Job.orm.yml

Ens\JobeetBundle\Entity\Job:
  type: entity
  repositoryClass: Ens\JobeetBundle\Repository\JobRepository
  # ...
</pre>
<p>Doctrine can generate the repository class for you by running the generate:entities command used earlier:</p>
<pre class="brush: plain; light: true; title: ; notranslate" title="">php app/console doctrine:generate:entities EnsJobeetBundle</pre>
<p>Next, add a new method – getActiveJobs() – to the newly generated repository class. This method will query for all of the active Job entities sorted by the <code>expires_at</code> column (and filtered by category if it receives the <code>$category_id</code> parameter).</p>
<pre class="brush: php; title: ; notranslate" title="">// src/Ens/JobeetBundle/Repository/JobRepository.php

namespace Ens\JobeetBundle\Repository;
use Doctrine\ORM\EntityRepository;

class JobRepository extends EntityRepository
{
  public function getActiveJobs($category_id = null)
  {
    $qb = $this-&gt;createQueryBuilder('j')
      -&gt;where('j.expires_at &gt; :date')
      -&gt;setParameter('date', date('Y-m-d H:i:s', time()))
      -&gt;orderBy('j.expires_at', 'DESC');

    if($category_id)
    {
      $qb-&gt;andWhere('j.category = :category_id')
         -&gt;setParameter('category_id', $category_id);
    }

    $query = $qb-&gt;getQuery();

    return $query-&gt;getResult();
  }
}
</pre>
<p>Now the action code can use this new method to retrieve the active jobs.</p>
<pre class="brush: php; title: ; notranslate" title="">// src/Ens/JobeetBundle/Controller/JobController.php
// ...

public function indexAction()
{
  $em = $this-&gt;getDoctrine()-&gt;getEntityManager();

  $entities = $em-&gt;getRepository('EnsJobeetBundle:Job')-&gt;getActiveJobs();

  return $this-&gt;render('EnsJobeetBundle:Job:index.html.twig', array(
    'entities' =&gt; $entities
  ));
}

// ...
</pre>
<p>This refactoring has several benefits over the previous code:</p>
<ul>
<li>The logic to get the active jobs is now in the Model, where it belongs</li>
<li>The code in the controller is thinner and much more readable</li>
<li>The <code>getActiveJobs()</code> method is re-usable (for instance in another action)</li>
<li>The model code is now unit testable</li>
</ul>
<h2>Categories on the Homepage</h2>
<p>According to the second day’s requirements we need to have jobs sorted by categories. Until now, we have not taken the job category into account. From the requirements, the homepage must display jobs by category. First, we need to get all categories with at least one active job.</p>
<p>Create a repository class for the Category entity like we did for Job:</p>
<pre class="brush: plain; title: ; notranslate" title=""># /src/Ens/JobeetBundle/Resources/config/doctrine/Category.orm.yml

Ens\JobeetBundle\Entity\Category:
  type: entity
  repositoryClass: Ens\JobeetBundle\Repository\CategoryRepository
  #...
</pre>
<p>Generate the repository class:</p>
<pre class="brush: plain; light: true; title: ; notranslate" title="">php app/console doctrine:generate:entities EnsJobeetBundle</pre>
<p>Open the <code>CategoryRepository</code> class and add a <code>getWithJobs()</code> method:</p>
<pre class="brush: php; title: ; notranslate" title="">// src/Ens/JobeetBundle/Repository/CategoryRepository.php

namespace Ens\JobeetBundle\Repository;
use Doctrine\ORM\EntityRepository;

class CategoryRepository extends EntityRepository
{
  public function getWithJobs()
  {
    $query = $this-&gt;getEntityManager()-&gt;createQuery(
      'SELECT c FROM EnsJobeetBundle:Category c LEFT JOIN c.jobs j WHERE j.expires_at &gt; :date'
    )-&gt;setParameter('date', date('Y-m-d H:i:s', time()));

    return $query-&gt;getResult();
  }
}
</pre>
<p>Change the <code>index</code> action accordingly:</p>
<pre class="brush: php; title: ; notranslate" title="">public function indexAction()
{
  $em = $this-&gt;getDoctrine()-&gt;getEntityManager();

  $categories = $em-&gt;getRepository('EnsJobeetBundle:Category')-&gt;getWithJobs();

  foreach($categories as $category)
  {
    $category-&gt;setActiveJobs($em-&gt;getRepository('EnsJobeetBundle:Job')-&gt;getActiveJobs($category-&gt;getId()));
  }

  return $this-&gt;render('EnsJobeetBundle:Job:index.html.twig', array(
    'categories' =&gt; $categories
  ));
}
</pre>
<p>For this to work we have to add a new property to our Category class, the <code>active_jobs</code>:</p>
<pre class="brush: php; title: ; notranslate" title="">// src/Ens/JobeetBundle/Entity/Category.php

namespace Ens\JobeetBundle\Entity;
use Doctrine\ORM\Mapping as ORM;

class Category
{
  // ...

  private $active_jobs;

  // ...

  public function setActiveJobs($jobs)
  {
    $this-&gt;active_jobs = $jobs;
  }

  public function getActiveJobs()
  {
    return $this-&gt;active_jobs;
  }
}
</pre>
<p>In the template, we need to iterate through all categories and display the active jobs:</p>
<pre class="brush: xml; title: ; notranslate" title="">&lt;!-- src/Ens/JobeetBundle/Resources/views/Job/index.html.twig --&gt;
&lt;!-- ... --&gt;

{% block content %}
  &lt;div id="jobs"&gt;
    {% for category in categories %}
      &lt;div&gt;
        &lt;div class="category"&gt;
          &lt;div class="feed"&gt;
            &lt;a href=""&gt;Feed&lt;/a&gt;
          &lt;/div&gt;
          &lt;h1&gt;{{ category.name }}&lt;/h1&gt;
        &lt;/div&gt;
        &lt;table class="jobs"&gt;
          {% for entity in category.activejobs %}
            &lt;tr class="{{ cycle(['even', 'odd'], loop.index) }}"&gt;
              &lt;td class="location"&gt;{{ entity.location }}&lt;/td&gt;
              &lt;td class="position"&gt;
                &lt;a href="{{ path('ens_job_show', { 'id': entity.id, 'company': entity.companyslug, 'location': entity.locationslug, 'position': entity.positionslug }) }}"&gt;
                  {{ entity.position }}
                &lt;/a&gt;
              &lt;/td&gt;
              &lt;td class="company"&gt;{{ entity.company }}&lt;/td&gt;
            &lt;/tr&gt;
          {% endfor %}
        &lt;/table&gt;
      &lt;/div&gt;
    {% endfor %}
  &lt;/div&gt;
{% endblock %}
</pre>
<h2>Limit the results</h2>
<p>There is still one requirement to implement for the homepage job list: we have to limit the job list to 10 items. That’s simple enough to add the <code>$max</code> parameter to the <code>JobRepository::getActiveJobs()</code> method:</p>
<pre class="brush: php; title: ; notranslate" title="">public function getActiveJobs($category_id = null, $max = null)
{
  $qb = $this-&gt;createQueryBuilder('j')
    -&gt;where('j.expires_at &gt; :date')
    -&gt;setParameter('date', date('Y-m-d H:i:s', time()))
    -&gt;orderBy('j.expires_at', 'DESC');

  if($max)
  {
    $qb-&gt;setMaxResults($max);
  }

  if($category_id)
  {
    $qb-&gt;andWhere('j.category = :category_id')
       -&gt;setParameter('category_id', $category_id);
  }

  $query = $qb-&gt;getQuery();

  return $query-&gt;getResult();
}
</pre>
<p>Change the call to <code>getActiveJobs</code> to include the <code>$max</code> parameter:</p>
<pre class="brush: php; title: ; notranslate" title="">// src/Ens/JobeetBundle/Controller/JobController.php

$category-&gt;setActiveJobs($em-&gt;getRepository('EnsJobeetBundle:Job')-&gt;getActiveJobs($category-&gt;getId(), 10));
</pre>
<h2>Custom Configuration</h2>
<p>In the <code>JobController</code>, <code>indexAction</code> method, we have hardcoded the number of max jobs returned for a category. It would have been better to make the 10 limit configurable. In Symfony you can define custom parameters for your application in the <code>app/config/config.yml</code> file, under the parameters key:</p>
<pre class="brush: plain; title: ; notranslate" title=""># app/config/config.yml
# ...

parameters:
    max_jobs_on_homepage: 10
</pre>
<p>This can now be accessed from a controller:</p>
<pre class="brush: php; title: ; notranslate" title="">// src/Ens/JobeetBundle/Controller/JobController
// ...

public function indexAction()
{
  $em = $this-&gt;getDoctrine()-&gt;getEntityManager();

  $categories = $em-&gt;getRepository('EnsJobeetBundle:Category')-&gt;getWithJobs();

  foreach($categories as $category)
  {
    $category-&gt;setActiveJobs($em-&gt;getRepository('EnsJobeetBundle:Job')-&gt;getActiveJobs($category-&gt;getId(), $this-&gt;container-&gt;getParameter('max_jobs_on_homepage')));
  }

  return $this-&gt;render('EnsJobeetBundle:Job:index.html.twig', array(
    'categories' =&gt; $categories
  ));
}
</pre>
<h2>Dinamic Fixtures</h2>
<p>For now, you won’t see any difference because we have a very small amount of jobs in our database. We need to add a bunch of jobs to the fixture. So, you can copy and paste an existing job ten or twenty times by hand… but there’s a better way. Duplication is bad, even in fixture files:</p>
<pre class="brush: php; title: ; notranslate" title="">// src/Ens/JobeetBundle/DataFixtures/ORM/LoadJobData.php
// ...

public function load(ObjectManager $em)
{
  // ...

  for($i = 100; $i &lt;= 130; $i++)
  {
    $job = new Job();
    $job-&gt;setCategory($em-&gt;merge($this-&gt;getReference('category-programming')));
    $job-&gt;setType('full-time');
    $job-&gt;setCompany('Company '.$i);
    $job-&gt;setPosition('Web Developer');
    $job-&gt;setLocation('Paris, France');
    $job-&gt;setDescription('Lorem ipsum dolor sit amet, consectetur adipisicing elit.');
    $job-&gt;setHowToApply('Send your resume to lorem.ipsum [at] dolor.sit');
    $job-&gt;setIsPublic(true);
    $job-&gt;setIsActivated(true);
    $job-&gt;setToken('job_'.$i);
    $job-&gt;setEmail('job@example.com');

    $em-&gt;persist($job);
  }

  $em-&gt;flush();
}

// ...
</pre>
<p>You can now reload the fixtures with the <code>doctrine:fixtures:load</code> task and see if only 10 jobs are displayed on the homepage for the Programming category:</p>
<p><a href="http://www.ens.ro/wp-content/uploads/2012/04/Screenshot-at-2012-04-07-101816.png"><img class="alignnone size-large wp-image-931" title="Jobeet Programming Jobs" src="./Symfony2 Jobeet Day 6  More with the Model   ENS_files/Screenshot-at-2012-04-07-101816-1024x612.png" alt="" width="584" height="349"></a></p>
<h2>Secure the Job Page</h2>
<p>When a job expires, even if you know the URL, it must not be possible to access it anymore. Try the URL for the expired job (replace the id with the actual id in your database – <code>SELECT id, token FROM jobeet_job WHERE expires_at &lt; NOW()</code>):</p>
<pre class="brush: plain; light: true; title: ; notranslate" title="">/app_dev.php/job/sensio-labs/paris-france/ID/web-developer-expired</pre>
<p>Instead of displaying the job, we need to forward the user to a 404 page. For this we will create a new function in the <code>JobRepository</code>:</p>
<pre class="brush: php; title: ; notranslate" title="">// src/Ens/JobeetBundle/Repository/JobRepository.php
// ...

public function getActiveJob($id)
{
  $query = $this-&gt;createQueryBuilder('j')
    -&gt;where('j.id = :id')
    -&gt;setParameter('id', $id)
    -&gt;andWhere('j.expires_at &gt; :date')
 &nbsp;&nbsp; -&gt;setParameter('date', date('Y-m-d H:i:s', time()))
    -&gt;setMaxResults(1)
 &nbsp;&nbsp; -&gt;getQuery();

  try {
    $job = $query-&gt;getSingleResult();
  } catch (\Doctrine\Orm\NoResultException $e) {
    $job = null;
  }

  return $job;
}
</pre>
<blockquote><p>The <code>getSingleResult()</code> method throws a <code>Doctrine\ORM\NoResultException</code> exception if no results are returned and a <code>Doctrine\ORM\NonUniqueResultException</code> if more than one result is returned. If you use this method, you may need to wrap it in a try-catch block and ensure that only one result is returned.</p></blockquote>
<p>Now change the <code>showAction</code> from the <code>JobController</code> to use the new repository method:</p>
<pre class="brush: php; title: ; notranslate" title="">// src/Ens/JobeetBundle/Controller/JobController.php
// ...

$entity = $em-&gt;getRepository('EnsJobeetBundle:Job')-&gt;getActiveJob($id);

// ...
</pre>
<p>Now, if you try to get an expired job, you will be forwarded to a 404 page.</p>
<p><a href="http://www.ens.ro/wp-content/uploads/2012/04/Screenshot-at-2012-04-07-122445.png"><img class="alignnone size-large wp-image-949" title="Jobeet 404 Page" src="./Symfony2 Jobeet Day 6  More with the Model   ENS_files/Screenshot-at-2012-04-07-122445-1024x625.png" alt="" width="584" height="356"></a></p>
<p style="float: right;"><a title="Symfony2 Jobeet Day 7: Playing with the Category Page" href="http://www.ens.ro/2012/04/11/symfony2-jobeet-day-7-playing-with-the-category-page/">Symfony2 Jobeet Day 7: Playing with the Category Page</a></p>
<p style="float: left;"><a title="Symfony2 Jobeet Day 5: The Routing" href="http://www.ens.ro/2012/04/03/symfony2-jobeet-day-5-the-routing/">Symfony2 Jobeet Day 5: The Routing</a></p>
			</div><!-- .entry-content -->

	<footer class="entry-meta">
		This entry was posted in <a href="http://www.ens.ro/category/english/" title="View all posts in English" rel="category tag">English</a>, <a href="http://www.ens.ro/category/web-development/php/" title="View all posts in PHP" rel="category tag">PHP</a>, <a href="http://www.ens.ro/category/web-development/" title="View all posts in Web Development" rel="category tag">Web Development</a> and tagged <a href="http://www.ens.ro/tag/symfony2-jobeet/" rel="tag">symfony2 jobeet</a> by <a href="http://www.ens.ro/author/dragos/">Dragos Holban</a>. Bookmark the <a href="./Symfony2 Jobeet Day 6  More with the Model   ENS_files/Symfony2 Jobeet Day 6  More with the Model   ENS.htm" title="Permalink to Symfony2 Jobeet Day 6: More with the Model" rel="bookmark">permalink</a>.		
			</footer><!-- .entry-meta -->
</article><!-- #post-771 -->

						<div id="comments">
	
	
			<h2 id="comments-title">
			19 thoughts on “<span>Symfony2 Jobeet Day 6: More with the Model</span>”		</h2>

		
		<ol class="commentlist">
				<li class="comment even thread-even depth-1" id="li-comment-892">
		<article id="comment-892" class="comment">
			<footer class="comment-meta">
				<div class="comment-author vcard">
					<img alt="" src="./Symfony2 Jobeet Day 6  More with the Model   ENS_files/434ba715011106ccd111e30c911584a6" class="avatar avatar-68 photo" height="68" width="68"><span class="fn">leonidas79</span> on <a href="http://www.ens.ro/2012/04/08/symfony2-jobeet-day-6-more-with-the-model/#comment-892"><time datetime="2012-06-26T14:47:17+00:00">June 26, 2012 at 2:47 pm</time></a> <span class="says">said:</span>
									</div><!-- .comment-author .vcard -->

				
			</footer>

			<div class="comment-content"><p>thx for this great tutorial </p>
<p>in this chapter i foloowed all steps and all is working fine , but if i’m calling the url<br>
“http://jobeet.local:8080″ i got a 505 error  , but using “http://jobeet.local:8080/app_dev.php” is working fine , the first url was working fine before , dont know where is the problem , thx for help</p>
</div>

			<div class="reply">
				<a class="comment-reply-link" href="http://www.ens.ro/2012/04/08/symfony2-jobeet-day-6-more-with-the-model/?replytocom=892#respond" onclick="return addComment.moveForm(&quot;comment-892&quot;, &quot;892&quot;, &quot;respond&quot;, &quot;771&quot;)">Reply <span>↓</span></a>			</div><!-- .reply -->
		</article><!-- #comment-## -->

	<ul class="children">
	<li class="comment byuser comment-author-dragos bypostauthor odd alt depth-2" id="li-comment-896">
		<article id="comment-896" class="comment">
			<footer class="comment-meta">
				<div class="comment-author vcard">
					<img alt="" src="./Symfony2 Jobeet Day 6  More with the Model   ENS_files/5aad75a3a109bfbbb1f7eeac6959918b" class="avatar avatar-39 photo" height="39" width="39"><span class="fn">Dragos Holban</span> on <a href="http://www.ens.ro/2012/04/08/symfony2-jobeet-day-6-more-with-the-model/#comment-896"><time datetime="2012-06-26T20:22:43+00:00">June 26, 2012 at 8:22 pm</time></a> <span class="says">said:</span>
									</div><!-- .comment-author .vcard -->

				
			</footer>

			<div class="comment-content"><p>Try to clear your cache:<br>
<code>php app/console cache:clear --env=prod</code></p>
</div>

			<div class="reply">
				<a class="comment-reply-link" href="http://www.ens.ro/2012/04/08/symfony2-jobeet-day-6-more-with-the-model/?replytocom=896#respond" onclick="return addComment.moveForm(&quot;comment-896&quot;, &quot;896&quot;, &quot;respond&quot;, &quot;771&quot;)">Reply <span>↓</span></a>			</div><!-- .reply -->
		</article><!-- #comment-## -->

	<ul class="children">
	<li class="comment even depth-3" id="li-comment-921">
		<article id="comment-921" class="comment">
			<footer class="comment-meta">
				<div class="comment-author vcard">
					<img alt="" src="./Symfony2 Jobeet Day 6  More with the Model   ENS_files/434ba715011106ccd111e30c911584a6(1)" class="avatar avatar-39 photo" height="39" width="39"><span class="fn">leonidas79</span> on <a href="http://www.ens.ro/2012/04/08/symfony2-jobeet-day-6-more-with-the-model/#comment-921"><time datetime="2012-06-28T14:53:11+00:00">June 28, 2012 at 2:53 pm</time></a> <span class="says">said:</span>
									</div><!-- .comment-author .vcard -->

				
			</footer>

			<div class="comment-content"><p>it works , thx man</p>
</div>

			<div class="reply">
				<a class="comment-reply-link" href="http://www.ens.ro/2012/04/08/symfony2-jobeet-day-6-more-with-the-model/?replytocom=921#respond" onclick="return addComment.moveForm(&quot;comment-921&quot;, &quot;921&quot;, &quot;respond&quot;, &quot;771&quot;)">Reply <span>↓</span></a>			</div><!-- .reply -->
		</article><!-- #comment-## -->

	</li>
</ul>
</li>
</ul>
</li>
	<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-1089">
		<article id="comment-1089" class="comment">
			<footer class="comment-meta">
				<div class="comment-author vcard">
					<img alt="" src="./Symfony2 Jobeet Day 6  More with the Model   ENS_files/aad438d45945d0c500ad058b81c98b4c" class="avatar avatar-68 photo" height="68" width="68"><span class="fn"><a href="http://www.silvona.com/" onclick="javascript:_gaq.push([&#39;_trackEvent&#39;,&#39;outbound-commentauthor&#39;,&#39;http://www.silvona.com&#39;]);" rel="external nofollow" class="url">Rick Bird</a></span> on <a href="http://www.ens.ro/2012/04/08/symfony2-jobeet-day-6-more-with-the-model/#comment-1089"><time datetime="2012-07-10T03:02:11+00:00">July 10, 2012 at 3:02 am</time></a> <span class="says">said:</span>
									</div><!-- .comment-author .vcard -->

				
			</footer>

			<div class="comment-content"><p>Love the tutorial, I find this one of the better tutorial resources as its actually and easily modifiable.  Keep up the great work. <img src="./Symfony2 Jobeet Day 6  More with the Model   ENS_files/icon_smile.gif" alt=":)" class="wp-smiley"> </p>
</div>

			<div class="reply">
				<a class="comment-reply-link" href="http://www.ens.ro/2012/04/08/symfony2-jobeet-day-6-more-with-the-model/?replytocom=1089#respond" onclick="return addComment.moveForm(&quot;comment-1089&quot;, &quot;1089&quot;, &quot;respond&quot;, &quot;771&quot;)">Reply <span>↓</span></a>			</div><!-- .reply -->
		</article><!-- #comment-## -->

	</li>
	<li class="comment even thread-even depth-1" id="li-comment-2407">
		<article id="comment-2407" class="comment">
			<footer class="comment-meta">
				<div class="comment-author vcard">
					<img alt="" src="./Symfony2 Jobeet Day 6  More with the Model   ENS_files/0a379129340983712442f01dcfcca66e" class="avatar avatar-68 photo" height="68" width="68"><span class="fn"><a href="http://www.flameweb.net/" onclick="javascript:_gaq.push([&#39;_trackEvent&#39;,&#39;outbound-commentauthor&#39;,&#39;http://www.flameweb.net&#39;]);" rel="external nofollow" class="url">Lindsay</a></span> on <a href="http://www.ens.ro/2012/04/08/symfony2-jobeet-day-6-more-with-the-model/#comment-2407"><time datetime="2012-09-14T09:56:36+00:00">September 14, 2012 at 9:56 am</time></a> <span class="says">said:</span>
									</div><!-- .comment-author .vcard -->

				
			</footer>

			<div class="comment-content"><p>Great tutorial so far, I’m finding it really helpful understand Symfony2 versus Symfony1.4. To help others that might make a similar mistake, if you get an ‘Undefined method’ error with your repository class, ensure that the repositoryClass statement in the yaml is attached to the right object.</p>
</div>

			<div class="reply">
				<a class="comment-reply-link" href="http://www.ens.ro/2012/04/08/symfony2-jobeet-day-6-more-with-the-model/?replytocom=2407#respond" onclick="return addComment.moveForm(&quot;comment-2407&quot;, &quot;2407&quot;, &quot;respond&quot;, &quot;771&quot;)">Reply <span>↓</span></a>			</div><!-- .reply -->
		</article><!-- #comment-## -->

	<ul class="children">
	<li class="comment odd alt depth-2" id="li-comment-3076">
		<article id="comment-3076" class="comment">
			<footer class="comment-meta">
				<div class="comment-author vcard">
					<img alt="" src="./Symfony2 Jobeet Day 6  More with the Model   ENS_files/f622d62affb02e0607819940cc5c0fc3" class="avatar avatar-39 photo" height="39" width="39"><span class="fn">Ovidiu</span> on <a href="http://www.ens.ro/2012/04/08/symfony2-jobeet-day-6-more-with-the-model/#comment-3076"><time datetime="2012-10-15T22:31:24+00:00">October 15, 2012 at 10:31 pm</time></a> <span class="says">said:</span>
									</div><!-- .comment-author .vcard -->

				
			</footer>

			<div class="comment-content"><p>I get the<br>
Fatal error: Call to undefined method Ens\JobeetBundle\Entity\Category::createQueryBuilder() in C:\jobeet\src\Ens\JobeetBundle\Entity\Category.php on line 163</p>
<p>and i can’t figure out what is wrong..</p>
</div>

			<div class="reply">
				<a class="comment-reply-link" href="http://www.ens.ro/2012/04/08/symfony2-jobeet-day-6-more-with-the-model/?replytocom=3076#respond" onclick="return addComment.moveForm(&quot;comment-3076&quot;, &quot;3076&quot;, &quot;respond&quot;, &quot;771&quot;)">Reply <span>↓</span></a>			</div><!-- .reply -->
		</article><!-- #comment-## -->

	</li>
</ul>
</li>
	<li class="comment even thread-odd thread-alt depth-1" id="li-comment-2410">
		<article id="comment-2410" class="comment">
			<footer class="comment-meta">
				<div class="comment-author vcard">
					<img alt="" src="./Symfony2 Jobeet Day 6  More with the Model   ENS_files/c68b30364f907a6773ec41a14da360ab" class="avatar avatar-68 photo" height="68" width="68"><span class="fn">imnkls</span> on <a href="http://www.ens.ro/2012/04/08/symfony2-jobeet-day-6-more-with-the-model/#comment-2410"><time datetime="2012-09-14T12:33:25+00:00">September 14, 2012 at 12:33 pm</time></a> <span class="says">said:</span>
									</div><!-- .comment-author .vcard -->

				
			</footer>

			<div class="comment-content"><p>I’ve a problem when i do the fixtures loading  it goes wrong<br>
there is the error<br>
 [Doctrine\ORM\Mapping\MappingException]<br>
  No identifier/primary key specified for Entity “Ens\JobeetBundle\Entity\Cat<br>
  egory” sub class of “”. Every Entity must have an identifier/primary key.</p>
</div>

			<div class="reply">
				<a class="comment-reply-link" href="http://www.ens.ro/2012/04/08/symfony2-jobeet-day-6-more-with-the-model/?replytocom=2410#respond" onclick="return addComment.moveForm(&quot;comment-2410&quot;, &quot;2410&quot;, &quot;respond&quot;, &quot;771&quot;)">Reply <span>↓</span></a>			</div><!-- .reply -->
		</article><!-- #comment-## -->

	</li>
	<li class="comment odd alt thread-even depth-1" id="li-comment-2937">
		<article id="comment-2937" class="comment">
			<footer class="comment-meta">
				<div class="comment-author vcard">
					<img alt="" src="./Symfony2 Jobeet Day 6  More with the Model   ENS_files/f622d62affb02e0607819940cc5c0fc3(1)" class="avatar avatar-68 photo" height="68" width="68"><span class="fn">Ovidiu</span> on <a href="http://www.ens.ro/2012/04/08/symfony2-jobeet-day-6-more-with-the-model/#comment-2937"><time datetime="2012-10-10T19:23:29+00:00">October 10, 2012 at 7:23 pm</time></a> <span class="says">said:</span>
									</div><!-- .comment-author .vcard -->

				
			</footer>

			<div class="comment-content"><p>Hey, after I added the new expire job in src/Ens/JobeetBundle/DataFixtures/ORM/LoadJobData.php , I saw that no job was displayed.</p>
<p>I fixed that by commenting the<br>
 //   $job_sensio_labs-&gt;setExpiresAt(new \DateTime(’2012-10-10′));<br>
…<br>
//   $job_extreme_sensio-&gt;setExpiresAt(new \DateTime(’2012-10-10′));</p>
<p>from the firs two jobs, so now the ExpiresAt is calculated as it should and the jobs aren’t expired.</p>
<p>I guess was my luck to try it on the same day the jobs were ment to expire <img src="./Symfony2 Jobeet Day 6  More with the Model   ENS_files/icon_smile.gif" alt=":)" class="wp-smiley"> . Maybe you change the date to something much longer in the previous tutorial.</p>
<p>Merci mult de tutorial si multa bafta!<br>
Ovidiu</p>
</div>

			<div class="reply">
				<a class="comment-reply-link" href="http://www.ens.ro/2012/04/08/symfony2-jobeet-day-6-more-with-the-model/?replytocom=2937#respond" onclick="return addComment.moveForm(&quot;comment-2937&quot;, &quot;2937&quot;, &quot;respond&quot;, &quot;771&quot;)">Reply <span>↓</span></a>			</div><!-- .reply -->
		</article><!-- #comment-## -->

	<ul class="children">
	<li class="comment even depth-2" id="li-comment-31379">
		<article id="comment-31379" class="comment">
			<footer class="comment-meta">
				<div class="comment-author vcard">
					<img alt="" src="./Symfony2 Jobeet Day 6  More with the Model   ENS_files/cfdb35fbf65703756174ed7cde13ee19" class="avatar avatar-39 photo" height="39" width="39"><span class="fn">Enkhdulguun</span> on <a href="http://www.ens.ro/2012/04/08/symfony2-jobeet-day-6-more-with-the-model/#comment-31379"><time datetime="2013-03-21T17:52:39+00:00">March 21, 2013 at 5:52 pm</time></a> <span class="says">said:</span>
									</div><!-- .comment-author .vcard -->

				
			</footer>

			<div class="comment-content"><p>You saved me . I was scratching my head . thanks</p>
</div>

			<div class="reply">
				<a class="comment-reply-link" href="http://www.ens.ro/2012/04/08/symfony2-jobeet-day-6-more-with-the-model/?replytocom=31379#respond" onclick="return addComment.moveForm(&quot;comment-31379&quot;, &quot;31379&quot;, &quot;respond&quot;, &quot;771&quot;)">Reply <span>↓</span></a>			</div><!-- .reply -->
		</article><!-- #comment-## -->

	</li>
</ul>
</li>
	<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-3247">
		<article id="comment-3247" class="comment">
			<footer class="comment-meta">
				<div class="comment-author vcard">
					<img alt="" src="./Symfony2 Jobeet Day 6  More with the Model   ENS_files/f622d62affb02e0607819940cc5c0fc3(1)" class="avatar avatar-68 photo" height="68" width="68"><span class="fn">Ovidiu</span> on <a href="http://www.ens.ro/2012/04/08/symfony2-jobeet-day-6-more-with-the-model/#comment-3247"><time datetime="2012-10-19T16:38:43+00:00">October 19, 2012 at 4:38 pm</time></a> <span class="says">said:</span>
									</div><!-- .comment-author .vcard -->

				
			</footer>

			<div class="comment-content"><p>Any ideea why i get this?</p>
<p>Fatal error: Call to undefined method Ens\JobeetBundle\Entity\Category::createQueryBuilder() in C:\jobeet\src\Ens\JobeetBundle\Entity\Category.php on line 163</p>
</div>

			<div class="reply">
				<a class="comment-reply-link" href="http://www.ens.ro/2012/04/08/symfony2-jobeet-day-6-more-with-the-model/?replytocom=3247#respond" onclick="return addComment.moveForm(&quot;comment-3247&quot;, &quot;3247&quot;, &quot;respond&quot;, &quot;771&quot;)">Reply <span>↓</span></a>			</div><!-- .reply -->
		</article><!-- #comment-## -->

	<ul class="children">
	<li class="comment even depth-2" id="li-comment-3416">
		<article id="comment-3416" class="comment">
			<footer class="comment-meta">
				<div class="comment-author vcard">
					<img alt="" src="./Symfony2 Jobeet Day 6  More with the Model   ENS_files/f622d62affb02e0607819940cc5c0fc3" class="avatar avatar-39 photo" height="39" width="39"><span class="fn">Ovidiu</span> on <a href="http://www.ens.ro/2012/04/08/symfony2-jobeet-day-6-more-with-the-model/#comment-3416"><time datetime="2012-10-23T23:22:02+00:00">October 23, 2012 at 11:22 pm</time></a> <span class="says">said:</span>
									</div><!-- .comment-author .vcard -->

				
			</footer>

			<div class="comment-content"><p>I found out. I putted the getActiveJobs function in the category.php too, instead of jobRepository.php only. probably just tired and noob <img src="./Symfony2 Jobeet Day 6  More with the Model   ENS_files/icon_smile.gif" alt=":)" class="wp-smiley"> </p>
</div>

			<div class="reply">
				<a class="comment-reply-link" href="http://www.ens.ro/2012/04/08/symfony2-jobeet-day-6-more-with-the-model/?replytocom=3416#respond" onclick="return addComment.moveForm(&quot;comment-3416&quot;, &quot;3416&quot;, &quot;respond&quot;, &quot;771&quot;)">Reply <span>↓</span></a>			</div><!-- .reply -->
		</article><!-- #comment-## -->

	<ul class="children">
	<li class="comment odd alt depth-3" id="li-comment-31383">
		<article id="comment-31383" class="comment">
			<footer class="comment-meta">
				<div class="comment-author vcard">
					<img alt="" src="./Symfony2 Jobeet Day 6  More with the Model   ENS_files/cfdb35fbf65703756174ed7cde13ee19" class="avatar avatar-39 photo" height="39" width="39"><span class="fn">Enkhdulguun</span> on <a href="http://www.ens.ro/2012/04/08/symfony2-jobeet-day-6-more-with-the-model/#comment-31383"><time datetime="2013-03-21T18:01:26+00:00">March 21, 2013 at 6:01 pm</time></a> <span class="says">said:</span>
									</div><!-- .comment-author .vcard -->

				
			</footer>

			<div class="comment-content"><p>same thing happened to me .</p>
</div>

			<div class="reply">
				<a class="comment-reply-link" href="http://www.ens.ro/2012/04/08/symfony2-jobeet-day-6-more-with-the-model/?replytocom=31383#respond" onclick="return addComment.moveForm(&quot;comment-31383&quot;, &quot;31383&quot;, &quot;respond&quot;, &quot;771&quot;)">Reply <span>↓</span></a>			</div><!-- .reply -->
		</article><!-- #comment-## -->

	</li>
</ul>
</li>
</ul>
</li>
	<li class="comment even thread-even depth-1" id="li-comment-6383">
		<article id="comment-6383" class="comment">
			<footer class="comment-meta">
				<div class="comment-author vcard">
					<img alt="" src="./Symfony2 Jobeet Day 6  More with the Model   ENS_files/512aa45fc4cfb396908a0c9d24752be5" class="avatar avatar-68 photo" height="68" width="68"><span class="fn">Hunter Trak</span> on <a href="http://www.ens.ro/2012/04/08/symfony2-jobeet-day-6-more-with-the-model/#comment-6383"><time datetime="2012-11-20T15:50:31+00:00">November 20, 2012 at 3:50 pm</time></a> <span class="says">said:</span>
									</div><!-- .comment-author .vcard -->

				
			</footer>

			<div class="comment-content"><p>I ran into a small problem at the top of this page. I am trying to do this tutorial using Symfony 2.1 and the latest version of Doctrine to force myself to keep up with the latest technologies.<br>
On the very first part where the indexAction() is reconfigured to display only active jobs. PhpStorm is telling me that getEntityManager() is deprecated. Could someone please tell me how to rewrite this piece using the new getManager() instead? When I change the class name to getManager() it says that getParameter() and getResult() are not found in class.</p>
</div>

			<div class="reply">
				<a class="comment-reply-link" href="http://www.ens.ro/2012/04/08/symfony2-jobeet-day-6-more-with-the-model/?replytocom=6383#respond" onclick="return addComment.moveForm(&quot;comment-6383&quot;, &quot;6383&quot;, &quot;respond&quot;, &quot;771&quot;)">Reply <span>↓</span></a>			</div><!-- .reply -->
		</article><!-- #comment-## -->

	<ul class="children">
	<li class="comment odd alt depth-2" id="li-comment-6397">
		<article id="comment-6397" class="comment">
			<footer class="comment-meta">
				<div class="comment-author vcard">
					<img alt="" src="./Symfony2 Jobeet Day 6  More with the Model   ENS_files/512aa45fc4cfb396908a0c9d24752be5(1)" class="avatar avatar-39 photo" height="39" width="39"><span class="fn">Hunter Trak</span> on <a href="http://www.ens.ro/2012/04/08/symfony2-jobeet-day-6-more-with-the-model/#comment-6397"><time datetime="2012-11-20T18:37:32+00:00">November 20, 2012 at 6:37 pm</time></a> <span class="says">said:</span>
									</div><!-- .comment-author .vcard -->

				
			</footer>

			<div class="comment-content"><p>Sorry, I am having a more important issue where getActiveJobs() in the line $entities = $em-&gt;getRepository(‘EnsJobeetBundle:Job’)-&gt;getActiveJobs(); is not found? Do I have to add a use statement or something? My repository class was created in Ens/JobeetBundle/Repository/ and I added the getActiveJobs method to it. For some reason my JobController is unable to find the method? Any ideas?</p>
</div>

			<div class="reply">
				<a class="comment-reply-link" href="http://www.ens.ro/2012/04/08/symfony2-jobeet-day-6-more-with-the-model/?replytocom=6397#respond" onclick="return addComment.moveForm(&quot;comment-6397&quot;, &quot;6397&quot;, &quot;respond&quot;, &quot;771&quot;)">Reply <span>↓</span></a>			</div><!-- .reply -->
		</article><!-- #comment-## -->

	<ul class="children">
	<li class="comment even depth-3" id="li-comment-13020">
		<article id="comment-13020" class="comment">
			<footer class="comment-meta">
				<div class="comment-author vcard">
					<img alt="" src="./Symfony2 Jobeet Day 6  More with the Model   ENS_files/4c4389f12117e56c4552202cf4ff7eea" class="avatar avatar-39 photo" height="39" width="39"><span class="fn">Milovan Milenkovic</span> on <a href="http://www.ens.ro/2012/04/08/symfony2-jobeet-day-6-more-with-the-model/#comment-13020"><time datetime="2012-12-30T14:50:40+00:00">December 30, 2012 at 2:50 pm</time></a> <span class="says">said:</span>
									</div><!-- .comment-author .vcard -->

				
			</footer>

			<div class="comment-content"><p>i have same problem like you. In my case I make mistake when when refactoring I ad  this ” # /src/Ens/JobeetBundle/Resources/config/doctrine/Job.orm.yml</p>
<p>Ens\JobeetBundle\Entity\Job:<br>
  type: entity<br>
  repositoryClass: Ens\JobeetBundle\Repository\JobRepository<br>
  # …”. When I ad just line “repositoryClass: Ens\JobeetBundle\Repository\JobRepository” on exsisting entity definition all work. Sory for my english.</p>
</div>

			<div class="reply">
				<a class="comment-reply-link" href="http://www.ens.ro/2012/04/08/symfony2-jobeet-day-6-more-with-the-model/?replytocom=13020#respond" onclick="return addComment.moveForm(&quot;comment-13020&quot;, &quot;13020&quot;, &quot;respond&quot;, &quot;771&quot;)">Reply <span>↓</span></a>			</div><!-- .reply -->
		</article><!-- #comment-## -->

	</li>
</ul>
</li>
</ul>
</li>
	<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-52852">
		<article id="comment-52852" class="comment">
			<footer class="comment-meta">
				<div class="comment-author vcard">
					<img alt="" src="./Symfony2 Jobeet Day 6  More with the Model   ENS_files/c6d469fb7d5327966027264ac72dd92f" class="avatar avatar-68 photo" height="68" width="68"><span class="fn"><a href="http://www.bezobaveze.com/" onclick="javascript:_gaq.push([&#39;_trackEvent&#39;,&#39;outbound-commentauthor&#39;,&#39;http://www.bezobaveze.com&#39;]);" rel="external nofollow" class="url">Zlajo</a></span> on <a href="http://www.ens.ro/2012/04/08/symfony2-jobeet-day-6-more-with-the-model/#comment-52852"><time datetime="2013-06-12T01:07:51+00:00">June 12, 2013 at 1:07 am</time></a> <span class="says">said:</span>
									</div><!-- .comment-author .vcard -->

				
			</footer>

			<div class="comment-content"><p>As part of the “Secure the Job Page” I would add, and forwarding on page 404 for the edit page. Now, you can change the job when it expired.<br>
Thx for tut <img src="./Symfony2 Jobeet Day 6  More with the Model   ENS_files/icon_smile.gif" alt=":)" class="wp-smiley"> </p>
</div>

			<div class="reply">
				<a class="comment-reply-link" href="http://www.ens.ro/2012/04/08/symfony2-jobeet-day-6-more-with-the-model/?replytocom=52852#respond" onclick="return addComment.moveForm(&quot;comment-52852&quot;, &quot;52852&quot;, &quot;respond&quot;, &quot;771&quot;)">Reply <span>↓</span></a>			</div><!-- .reply -->
		</article><!-- #comment-## -->

	</li>
	<li class="comment even thread-even depth-1" id="li-comment-52982">
		<article id="comment-52982" class="comment">
			<footer class="comment-meta">
				<div class="comment-author vcard">
					<img alt="" src="./Symfony2 Jobeet Day 6  More with the Model   ENS_files/487ec08b4cae342e299cac59b5b02aa6" class="avatar avatar-68 photo" height="68" width="68"><span class="fn">Bogdan</span> on <a href="http://www.ens.ro/2012/04/08/symfony2-jobeet-day-6-more-with-the-model/#comment-52982"><time datetime="2013-06-12T22:19:37+00:00">June 12, 2013 at 10:19 pm</time></a> <span class="says">said:</span>
									</div><!-- .comment-author .vcard -->

				
			</footer>

			<div class="comment-content"><p>I get the following error:<br>
[Semantical Error] line 0, col 58 near ‘j WHERE j.expires_at’: Error: Class Ens\JobeetBundle\Entity\Category has no association named jobs and I can’t figure it out. Please help</p>
</div>

			<div class="reply">
				<a class="comment-reply-link" href="http://www.ens.ro/2012/04/08/symfony2-jobeet-day-6-more-with-the-model/?replytocom=52982#respond" onclick="return addComment.moveForm(&quot;comment-52982&quot;, &quot;52982&quot;, &quot;respond&quot;, &quot;771&quot;)">Reply <span>↓</span></a>			</div><!-- .reply -->
		</article><!-- #comment-## -->

	</li>
	<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-53300">
		<article id="comment-53300" class="comment">
			<footer class="comment-meta">
				<div class="comment-author vcard">
					<img alt="" src="./Symfony2 Jobeet Day 6  More with the Model   ENS_files/fde0876c2e6262aef4433c297473e540" class="avatar avatar-68 photo" height="68" width="68"><span class="fn">Lina Maria Berbesi</span> on <a href="http://www.ens.ro/2012/04/08/symfony2-jobeet-day-6-more-with-the-model/#comment-53300"><time datetime="2013-06-14T15:52:03+00:00">June 14, 2013 at 3:52 pm</time></a> <span class="says">said:</span>
									</div><!-- .comment-author .vcard -->

				
			</footer>

			<div class="comment-content"><p>Did not anyone have problems with the getWithJobs  method producing that error message which is mentioned in different places on the internet but not resolution or i have not been able to fix the problem.<br>
 Undefined method ‘getWithJobs’. The method name must start with either findBy or findOneBy!</p>
</div>

			<div class="reply">
				<a class="comment-reply-link" href="http://www.ens.ro/2012/04/08/symfony2-jobeet-day-6-more-with-the-model/?replytocom=53300#respond" onclick="return addComment.moveForm(&quot;comment-53300&quot;, &quot;53300&quot;, &quot;respond&quot;, &quot;771&quot;)">Reply <span>↓</span></a>			</div><!-- .reply -->
		</article><!-- #comment-## -->

	<ul class="children">
	<li class="comment even depth-2" id="li-comment-57786">
		<article id="comment-57786" class="comment">
			<footer class="comment-meta">
				<div class="comment-author vcard">
					<img alt="" src="./Symfony2 Jobeet Day 6  More with the Model   ENS_files/de0a5d4eb50aa6ece93b87bcc545f829" class="avatar avatar-39 photo" height="39" width="39"><span class="fn">IronBone</span> on <a href="http://www.ens.ro/2012/04/08/symfony2-jobeet-day-6-more-with-the-model/#comment-57786"><time datetime="2013-07-10T23:24:04+00:00">July 10, 2013 at 11:24 pm</time></a> <span class="says">said:</span>
									</div><!-- .comment-author .vcard -->

				
			</footer>

			<div class="comment-content"><p>Try change<br>
public function indexAction()<br>
{<br>
  $em = $this-&gt;getDoctrine()-&gt;getEntityManager();<br>
 ===================<br>
to<br>
=======================<br>
public function indexAction()<br>
{<br>
  $em = $this-&gt;getDoctrine()-&gt;getManager();</p>
</div>

			<div class="reply">
				<a class="comment-reply-link" href="http://www.ens.ro/2012/04/08/symfony2-jobeet-day-6-more-with-the-model/?replytocom=57786#respond" onclick="return addComment.moveForm(&quot;comment-57786&quot;, &quot;57786&quot;, &quot;respond&quot;, &quot;771&quot;)">Reply <span>↓</span></a>			</div><!-- .reply -->
		</article><!-- #comment-## -->

	</li>
</ul>
</li>
		</ol>

		
		
	
									<div id="respond">
				<h3 id="reply-title">Leave a Reply <small><a rel="nofollow" id="cancel-comment-reply-link" href="http://www.ens.ro/2012/04/08/symfony2-jobeet-day-6-more-with-the-model/#respond" style="display:none;">Cancel reply</a></small></h3>
									<form action="http://www.ens.ro/wp-comments-post.php" method="post" id="commentform">
																			<p class="comment-notes">Your email address will not be published. Required fields are marked <span class="required">*</span></p>							<p class="comment-form-author"><label for="author">Name <span class="required">*</span></label> <input id="author" name="author" type="text" value="" size="30" aria-required="true"></p>
<p class="comment-form-email"><label for="email">Email <span class="required">*</span></label> <input id="email" name="email" type="text" value="" size="30" aria-required="true"></p>
<p class="comment-form-url"><label for="url">Website</label><input id="url" name="url" type="text" value="" size="30"></p>
												<p class="comment-form-comment"><label for="comment">Comment</label><textarea id="comment" name="comment" cols="45" rows="8" aria-required="true"></textarea></p>						<p class="form-allowed-tags">You may use these <abbr title="HyperText Markup Language">HTML</abbr> tags and attributes:  <code>&lt;a href="" title=""&gt; &lt;abbr title=""&gt; &lt;acronym title=""&gt; &lt;b&gt; &lt;blockquote cite=""&gt; &lt;cite&gt; &lt;code&gt; &lt;del datetime=""&gt; &lt;em&gt; &lt;i&gt; &lt;q cite=""&gt; &lt;strike&gt; &lt;strong&gt; </code></p>						<p class="form-submit">
							<input name="submit" type="submit" id="submit" value="Post Comment">
							<input type="hidden" name="comment_post_ID" value="771" id="comment_post_ID">
<input type="hidden" name="comment_parent" id="comment_parent" value="0">
						</p>
						<p style="display: none;"><input type="hidden" id="akismet_comment_nonce" name="akismet_comment_nonce" value="a40985b258"></p>					</form>
							</div><!-- #respond -->
				<script type="text/javascript">
		jQuery(document).ready(function () {
			jQuery('#commentform').submit(function () {
				_gaq.push(
					['_setAccount', 'UA-29990339-1'],
					['_trackEvent', 'comment', 'submit']
				);
			});
		});
	</script>
				
</div><!-- #comments -->

				
			</div><!-- #content -->
		</div><!-- #primary -->


	</div><!-- #main -->

	<footer id="colophon" role="contentinfo">

			

			<div id="site-generator">
								<a href="http://wordpress.org/" title="Semantic Personal Publishing Platform">Proudly powered by WordPress</a>
			</div>
	</footer><!-- #colophon -->
</div><!-- #page -->

<div id="dc-dcssb">
		<ul id="nav-dcssb" class=""><li id="dcssb-twitter" class="size-box"><iframe id="twitter-widget-0" scrolling="no" frameborder="0" allowtransparency="true" src="./Symfony2 Jobeet Day 6  More with the Model   ENS_files/tweet_button.1386967771.htm" class="twitter-share-button twitter-tweet-button twitter-count-vertical" title="Twitter Tweet Button" data-twttr-rendered="true" style="width: 59px; height: 62px;"></iframe></li>
			<script type="text/javascript" src="./Symfony2 Jobeet Day 6  More with the Model   ENS_files/widgets.js"></script>
			<div id="fb-root" class=" fb_reset"><script type="text/javascript" src="./Symfony2 Jobeet Day 6  More with the Model   ENS_files/all.js" async=""></script><div style="position: absolute; top: -10000px; height: 0px; width: 0px;"><div></div></div><div style="position: absolute; top: -10000px; height: 0px; width: 0px;"><div><iframe name="fb_xdm_frame_http" frameborder="0" allowtransparency="true" scrolling="no" id="fb_xdm_frame_http" aria-hidden="true" title="Facebook Cross Domain Communication Frame" tab-index="-1" src="./Symfony2 Jobeet Day 6  More with the Model   ENS_files/xd_arbiter.htm" style="border: none;"></iframe><iframe name="fb_xdm_frame_https" frameborder="0" allowtransparency="true" scrolling="no" id="fb_xdm_frame_https" aria-hidden="true" title="Facebook Cross Domain Communication Frame" tab-index="-1" src="./Symfony2 Jobeet Day 6  More with the Model   ENS_files/xd_arbiter(1).htm" style="border: none;"></iframe></div></div></div>
			<script>
	window.fbAsyncInit = function() {
	FB.init({appId: "", status: true, cookie: true, xfbml: true});};
	(function() {
		var e = document.createElement("script");
		e.type = "text/javascript";
		e.src = document.location.protocol + "//connect.facebook.net/en_US/all.js";
		e.async = true;
	document.getElementById("fb-root").appendChild(e);
	}());
</script>
<li id="dcssb-facebook" class="size-box"><fb:like href="http%3A%2F%2Fwww.ens.ro%2F2012%2F04%2F08%2Fsymfony2-jobeet-day-6-more-with-the-model%2F" send="false" layout="box_count" show_faces="false" font="" fb-xfbml-state="rendered" class=" fb_edge_widget_with_comment fb_iframe_widget"><span style="height: 65px; width: 55px;"><iframe id="f2bbab93b" name="f3c82ee118" scrolling="no" title="Like this content on Facebook." class="fb_ltr" src="./Symfony2 Jobeet Day 6  More with the Model   ENS_files/like.htm" style="border: none; overflow: hidden; height: 65px; width: 55px;"></iframe></span></fb:like></li>
			<li id="dcssb-plusone" class="size-box"><div id="___plusone_0" style="text-indent: 0px; margin: 0px; padding: 0px; background-color: transparent; border-style: none; float: none; line-height: normal; font-size: 1px; vertical-align: baseline; display: inline-block; width: 50px; height: 60px; background-position: initial initial; background-repeat: initial initial;"><iframe frameborder="0" hspace="0" marginheight="0" marginwidth="0" scrolling="no" style="position: static; top: 0px; width: 50px; margin: 0px; border-style: none; left: 0px; visibility: visible; height: 60px;" tabindex="0" vspace="0" width="100%" id="I0_1387031649607" name="I0_1387031649607" src="./Symfony2 Jobeet Day 6  More with the Model   ENS_files/fastbutton.htm" data-gapiattached="true" title="+1"></iframe></div></li>
			<script type="text/javascript">
				(function() {
					var po = document.createElement("script"); po.type = "text/javascript"; po.async = true;
					po.src = "https://apis.google.com/js/plusone.js";
					var s = document.getElementsByTagName("script")[0]; s.parentNode.insertBefore(po, s);
				})();
				</script>
				</ul>
		<div class="clear"></div>
		<div class="dc-corner"><span></span></div>
		</div><iframe name="oauth2relay864252123" id="oauth2relay864252123" src="./Symfony2 Jobeet Day 6  More with the Model   ENS_files/postmessageRelay.htm" style="width: 1px; height: 1px; position: absolute; top: -100px;"></iframe>			<script type="text/javascript">_ga.trackFacebook();</script>
			<script type="text/javascript">
				jQuery(window).load(function() {

								
					var config = {
						idWrapper : 'dcssb-slick',
						location: 'right',
						align: 'top',
						offset: '50px',
						speed: 600,
						tabText: '<img src="http://www.ens.ro/wp-content/plugins/slick-social-share-buttons/css/images/tab_right_vertical.png" alt="Share" />',
						autoClose: true,
						loadOpen: false,
						classWrapper: 'dc-social-slick vertical',
						classOpen: 'dcssb-open',
						classClose: 'dcssb-close',
						classToggle: 'dcssb-link'					
					};
					if(!jQuery().dcSocialSlick) {
						jQuery.getScript('http://www.ens.ro/wp-content/plugins/slick-social-share-buttons/js/jquery.social.slick.1.0.js', function(){
							jQuery('#dc-dcssb').dcSocialSlick(config);
						}); 
					} else {
						jQuery('#dc-dcssb').dcSocialSlick(config);
					}

								});
			</script>
		
			<script type="text/javascript" src="./Symfony2 Jobeet Day 6  More with the Model   ENS_files/shCore.js"></script>
<script type="text/javascript" src="./Symfony2 Jobeet Day 6  More with the Model   ENS_files/shBrushPhp.js"></script>
<script type="text/javascript" src="./Symfony2 Jobeet Day 6  More with the Model   ENS_files/shBrushPlain.js"></script>
<script type="text/javascript" src="./Symfony2 Jobeet Day 6  More with the Model   ENS_files/shBrushXml.js"></script>
<script type="text/javascript">
	(function(){
		var corecss = document.createElement('link');
		var themecss = document.createElement('link');
		var corecssurl = "http://www.ens.ro/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/styles/shCore.css?ver=3.0.83c";
		if ( corecss.setAttribute ) {
				corecss.setAttribute( "rel", "stylesheet" );
				corecss.setAttribute( "type", "text/css" );
				corecss.setAttribute( "href", corecssurl );
		} else {
				corecss.rel = "stylesheet";
				corecss.href = corecssurl;
		}
		document.getElementsByTagName("head")[0].insertBefore( corecss, document.getElementById("syntaxhighlighteranchor") );
		var themecssurl = "http://www.ens.ro/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/styles/shThemeDefault.css?ver=3.0.83c";
		if ( themecss.setAttribute ) {
				themecss.setAttribute( "rel", "stylesheet" );
				themecss.setAttribute( "type", "text/css" );
				themecss.setAttribute( "href", themecssurl );
		} else {
				themecss.rel = "stylesheet";
				themecss.href = themecssurl;
		}
		//document.getElementById("syntaxhighlighteranchor").appendChild(themecss);
		document.getElementsByTagName("head")[0].insertBefore( themecss, document.getElementById("syntaxhighlighteranchor") );
	})();
	SyntaxHighlighter.config.strings.expandSource = '+ expand source';
	SyntaxHighlighter.config.strings.help = '?';
	SyntaxHighlighter.config.strings.alert = 'SyntaxHighlighter\n\n';
	SyntaxHighlighter.config.strings.noBrush = 'Can\'t find brush for: ';
	SyntaxHighlighter.config.strings.brushNotHtmlScript = 'Brush wasn\'t configured for html-script option: ';
	SyntaxHighlighter.defaults['pad-line-numbers'] = false;
	SyntaxHighlighter.defaults['tab-size'] = 2;
	SyntaxHighlighter.defaults['toolbar'] = false;
	SyntaxHighlighter.all();
</script>
<script type="text/javascript" src="./Symfony2 Jobeet Day 6  More with the Model   ENS_files/jquery.form.min.js"></script>
<script type="text/javascript">
/* <![CDATA[ */
var _wpcf7 = {"loaderUrl":"http:\/\/www.ens.ro\/wp-content\/plugins\/contact-form-7\/images\/ajax-loader.gif","sending":"Sending ..."};
/* ]]> */
</script>
<script type="text/javascript" src="./Symfony2 Jobeet Day 6  More with the Model   ENS_files/scripts.js"></script>


</body></html>