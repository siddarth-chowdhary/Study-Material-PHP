<!DOCTYPE html>
<!-- saved from url=(0062)http://www.ens.ro/2012/05/17/symfony2-jobeet-day-10-the-forms/ -->
<html lang="en-US" xmlns:og="http://opengraphprotocol.org/schema/" xmlns:fb="http://www.facebook.com/2008/fbml"><!--<![endif]--><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><script type="text/javascript" async="" src="./Symfony2 Jobeet Day 10  The Forms   ENS_files/plusone.js" gapi_processed="true"></script>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<title>Symfony2 Jobeet Day 10: The Forms | ENS</title>
<link rel="profile" href="http://gmpg.org/xfn/11">
<link rel="stylesheet" type="text/css" media="all" href="./Symfony2 Jobeet Day 10  The Forms   ENS_files/style.css">
<link rel="pingback" href="http://www.ens.ro/xmlrpc.php">
<!--[if lt IE 9]>
<script src="http://www.ens.ro/wp-content/themes/twentyeleven/js/html5.js" type="text/javascript"></script>
<![endif]-->

	<link rel="stylesheet" href="./Symfony2 Jobeet Day 10  The Forms   ENS_files/dcssb.css" type="text/css" media="screen">
	<!--Facebook OpenGraph Slick Social Share Buttons -->
	<meta property="og:site_name" content="ENS">
		<meta property="og:title" content="Symfony2 Jobeet Day 10: The Forms">
			<meta property="og:description" content="Any website has forms, from the simple contact form to the complex ones with lots of fields. Writing forms is also one of the most complex and tedious task for a web developer: you need to write the H">
		
		<meta property="og:url" content="http://www.ens.ro/2012/05/17/symfony2-jobeet-day-10-the-forms/">
		
		<meta property="og:image" content="">
		<meta property="fb:admins" content="533936499">
		<meta property="fb:app_id" content="">
		<meta property="og:type" content="article"><!--End Facebook OpenGraph Settings -->
		<link rel="alternate" type="application/rss+xml" title="ENS » Feed" href="http://www.ens.ro/feed/">
<link rel="alternate" type="application/rss+xml" title="ENS » Comments Feed" href="http://www.ens.ro/comments/feed/">

			<script src="./Symfony2 Jobeet Day 10  The Forms   ENS_files/cb=gapi.loaded_1" async=""></script><script src="./Symfony2 Jobeet Day 10  The Forms   ENS_files/cb=gapi.loaded_0" async=""></script><script type="text/javascript" async="" src="./Symfony2 Jobeet Day 10  The Forms   ENS_files/plusone.js" gapi_processed="true"></script><script type="text/javascript" async="" src="./Symfony2 Jobeet Day 10  The Forms   ENS_files/ga.js"></script><script type="text/javascript">//<![CDATA[
			// Google Analytics for WordPress by Yoast v4.2.8 | http://yoast.com/wordpress/google-analytics/
			var _gaq = _gaq || [];
			_gaq.push(['_setAccount', 'UA-29990339-1']);
							_gaq.push(['_trackPageview']);
			(function () {
				var ga = document.createElement('script');
				ga.type = 'text/javascript';
				ga.async = true;
				ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
				var s = document.getElementsByTagName('script')[0];
				s.parentNode.insertBefore(ga, s);
			})();
			//]]></script>
			<link rel="alternate" type="application/rss+xml" title="ENS » Symfony2 Jobeet Day 10: The Forms Comments Feed" href="http://www.ens.ro/2012/05/17/symfony2-jobeet-day-10-the-forms/feed/">
<link rel="stylesheet" id="contact-form-7-css" href="./Symfony2 Jobeet Day 10  The Forms   ENS_files/styles.css" type="text/css" media="all">
<link rel="stylesheet" id="NextGEN-css" href="./Symfony2 Jobeet Day 10  The Forms   ENS_files/nggallery.css" type="text/css" media="screen">
<link rel="stylesheet" id="shutter-css" href="./Symfony2 Jobeet Day 10  The Forms   ENS_files/shutter-reloaded.css" type="text/css" media="screen">
<script type="text/javascript" src="./Symfony2 Jobeet Day 10  The Forms   ENS_files/comment-reply.min.js"></script>
<script type="text/javascript" src="./Symfony2 Jobeet Day 10  The Forms   ENS_files/jquery.js"></script>
<script type="text/javascript" src="./Symfony2 Jobeet Day 10  The Forms   ENS_files/ga.social_tracking.js"></script>
<script type="text/javascript" src="./Symfony2 Jobeet Day 10  The Forms   ENS_files/jquery.social.slick.1.0.js"></script>
<script type="text/javascript">
/* <![CDATA[ */
var shutterSettings = {"msgLoading":"L O A D I N G","msgClose":"Click to Close","imageCount":"1"};
/* ]]> */
</script>
<script type="text/javascript" src="./Symfony2 Jobeet Day 10  The Forms   ENS_files/shutter-reloaded.js"></script>
<script type="text/javascript" src="./Symfony2 Jobeet Day 10  The Forms   ENS_files/jquery.cycle.all.min.js"></script>
<script type="text/javascript" src="./Symfony2 Jobeet Day 10  The Forms   ENS_files/ngg.slideshow.min.js"></script>
<link rel="EditURI" type="application/rsd+xml" title="RSD" href="http://www.ens.ro/xmlrpc.php?rsd">
<link rel="wlwmanifest" type="application/wlwmanifest+xml" href="http://www.ens.ro/wp-includes/wlwmanifest.xml"> 
<link rel="prev" title="Usefull Linux Commands" href="http://www.ens.ro/2012/05/10/usefull-linux-commands/">
<link rel="next" title="Setting Up Symfony2 and Uploadify Session Id" href="http://www.ens.ro/2012/06/11/setting-up-symfony2-and-uploadify-session-id/">
<meta name="generator" content="WordPress 3.5">
<link rel="canonical" href="./Symfony2 Jobeet Day 10  The Forms   ENS_files/Symfony2 Jobeet Day 10  The Forms   ENS.htm">
<link rel="shortlink" href="http://www.ens.ro/?p=1271">
<!-- <meta name="NextGEN" version="1.9.10" /> -->
	<style type="text/css">.recentcomments a{display:inline !important;padding:0 !important;margin:0 !important;}</style>
<style type="text/css" id="custom-background-css">
body.custom-background { background-color: #f1f1f1; background-image: url('http://www.ens.ro/wp-content/uploads/2012/08/bgbody1.gif'); background-repeat: repeat; background-position: top left; background-attachment: fixed; }
</style>
<link rel="stylesheet" type="text/css" href="./Symfony2 Jobeet Day 10  The Forms   ENS_files/shCore.css"><link rel="stylesheet" type="text/css" href="./Symfony2 Jobeet Day 10  The Forms   ENS_files/shThemeDefault.css"><meta id="syntaxhighlighteranchor" name="syntaxhighlighter-version" content="3.1.3">
<style type="text/css">.fb_hidden{position:absolute;top:-10000px;z-index:10001}
.fb_invisible{display:none}
.fb_reset{background:none;border:0;border-spacing:0;color:#000;cursor:auto;direction:ltr;font-family:"lucida grande", tahoma, verdana, arial, sans-serif;font-size:11px;font-style:normal;font-variant:normal;font-weight:normal;letter-spacing:normal;line-height:1;margin:0;overflow:visible;padding:0;text-align:left;text-decoration:none;text-indent:0;text-shadow:none;text-transform:none;visibility:visible;white-space:normal;word-spacing:normal}
.fb_reset > div{overflow:hidden}
.fb_link img{border:none}
.fb_dialog{background:rgba(82, 82, 82, .7);position:absolute;top:-10000px;z-index:10001}
.fb_dialog_advanced{padding:10px;-moz-border-radius:8px;-webkit-border-radius:8px;border-radius:8px}
.fb_dialog_content{background:#fff;color:#333}
.fb_dialog_close_icon{background:url(http://static.ak.fbcdn.net/rsrc.php/v2/yq/r/IE9JII6Z1Ys.png) no-repeat scroll 0 0 transparent;_background-image:url(http://static.ak.fbcdn.net/rsrc.php/v2/yL/r/s816eWC-2sl.gif);cursor:pointer;display:block;height:15px;position:absolute;right:18px;top:17px;width:15px;top:8px\9;right:7px\9}
.fb_dialog_mobile .fb_dialog_close_icon{top:5px;left:5px;right:auto}
.fb_dialog_padding{background-color:transparent;position:absolute;width:1px;z-index:-1}
.fb_dialog_close_icon:hover{background:url(http://static.ak.fbcdn.net/rsrc.php/v2/yq/r/IE9JII6Z1Ys.png) no-repeat scroll 0 -15px transparent;_background-image:url(http://static.ak.fbcdn.net/rsrc.php/v2/yL/r/s816eWC-2sl.gif)}
.fb_dialog_close_icon:active{background:url(http://static.ak.fbcdn.net/rsrc.php/v2/yq/r/IE9JII6Z1Ys.png) no-repeat scroll 0 -30px transparent;_background-image:url(http://static.ak.fbcdn.net/rsrc.php/v2/yL/r/s816eWC-2sl.gif)}
.fb_dialog_loader{background-color:#f2f2f2;border:1px solid #606060;font-size:24px;padding:20px}
.fb_dialog_top_left,
.fb_dialog_top_right,
.fb_dialog_bottom_left,
.fb_dialog_bottom_right{height:10px;width:10px;overflow:hidden;position:absolute}
.fb_dialog_top_left{background:url(http://static.ak.fbcdn.net/rsrc.php/v2/ye/r/8YeTNIlTZjm.png) no-repeat 0 0;left:-10px;top:-10px}
.fb_dialog_top_right{background:url(http://static.ak.fbcdn.net/rsrc.php/v2/ye/r/8YeTNIlTZjm.png) no-repeat 0 -10px;right:-10px;top:-10px}
.fb_dialog_bottom_left{background:url(http://static.ak.fbcdn.net/rsrc.php/v2/ye/r/8YeTNIlTZjm.png) no-repeat 0 -20px;bottom:-10px;left:-10px}
.fb_dialog_bottom_right{background:url(http://static.ak.fbcdn.net/rsrc.php/v2/ye/r/8YeTNIlTZjm.png) no-repeat 0 -30px;right:-10px;bottom:-10px}
.fb_dialog_vert_left,
.fb_dialog_vert_right,
.fb_dialog_horiz_top,
.fb_dialog_horiz_bottom{position:absolute;background:#525252;filter:alpha(opacity=70);opacity:.7}
.fb_dialog_vert_left,
.fb_dialog_vert_right{width:10px;height:100%}
.fb_dialog_vert_left{margin-left:-10px}
.fb_dialog_vert_right{right:0;margin-right:-10px}
.fb_dialog_horiz_top,
.fb_dialog_horiz_bottom{width:100%;height:10px}
.fb_dialog_horiz_top{margin-top:-10px}
.fb_dialog_horiz_bottom{bottom:0;margin-bottom:-10px}
.fb_dialog_iframe{line-height:0}
.fb_dialog_content .dialog_title{background:#6d84b4;border:1px solid #3b5998;color:#fff;font-size:14px;font-weight:bold;margin:0}
.fb_dialog_content .dialog_title > span{background:url(http://static.ak.fbcdn.net/rsrc.php/v2/yd/r/Cou7n-nqK52.gif)
no-repeat 5px 50%;float:left;padding:5px 0 7px 26px}
body.fb_hidden{-webkit-transform:none;height:100%;margin:0;overflow:visible;position:absolute;top:-10000px;left:0;width:100%}
.fb_dialog.fb_dialog_mobile.loading{background:url(http://static.ak.fbcdn.net/rsrc.php/v2/ya/r/3rhSv5V8j3o.gif)
white no-repeat 50% 50%;min-height:100%;min-width:100%;overflow:hidden;position:absolute;top:0;z-index:10001}
.fb_dialog.fb_dialog_mobile.loading.centered{max-height:590px;min-height:590px;max-width:500px;min-width:500px}
#fb-root #fb_dialog_ipad_overlay{background:rgba(0, 0, 0, .45);position:absolute;left:0;top:0;width:100%;min-height:100%;z-index:10000}
#fb-root #fb_dialog_ipad_overlay.hidden{display:none}
.fb_dialog.fb_dialog_mobile.loading iframe{visibility:hidden}
.fb_dialog_content .dialog_header{-webkit-box-shadow:white 0 1px 1px -1px inset;background:-webkit-gradient(linear, 0% 0%, 0% 100%, from(#738ABA), to(#2C4987));border-bottom:1px solid;border-color:#1d4088;color:#fff;font:14px Helvetica, sans-serif;font-weight:bold;text-overflow:ellipsis;text-shadow:rgba(0, 30, 84, .296875) 0 -1px 0;vertical-align:middle;white-space:nowrap}
.fb_dialog_content .dialog_header table{-webkit-font-smoothing:subpixel-antialiased;height:43px;width:100%
}
.fb_dialog_content .dialog_header td.header_left{font-size:12px;padding-left:5px;vertical-align:middle;width:60px
}
.fb_dialog_content .dialog_header td.header_right{font-size:12px;padding-right:5px;vertical-align:middle;width:60px
}
.fb_dialog_content .touchable_button{background:-webkit-gradient(linear, 0% 0%, 0% 100%, from(#4966A6),
color-stop(0.5, #355492), to(#2A4887));border:1px solid #29447e;-webkit-background-clip:padding-box;-webkit-border-radius:3px;-webkit-box-shadow:rgba(0, 0, 0, .117188) 0 1px 1px inset,
rgba(255, 255, 255, .167969) 0 1px 0;display:inline-block;margin-top:3px;max-width:85px;line-height:18px;padding:4px 12px;position:relative}
.fb_dialog_content .dialog_header .touchable_button input{border:none;background:none;color:#fff;font:12px Helvetica, sans-serif;font-weight:bold;margin:2px -12px;padding:2px 6px 3px 6px;text-shadow:rgba(0, 30, 84, .296875) 0 -1px 0}
.fb_dialog_content .dialog_header .header_center{color:#fff;font-size:16px;font-weight:bold;line-height:18px;text-align:center;vertical-align:middle}
.fb_dialog_content .dialog_content{background:url(http://static.ak.fbcdn.net/rsrc.php/v2/y9/r/jKEcVPZFk-2.gif) no-repeat 50% 50%;border:1px solid #555;border-bottom:0;border-top:0;height:150px}
.fb_dialog_content .dialog_footer{background:#f2f2f2;border:1px solid #555;border-top-color:#ccc;height:40px}
#fb_dialog_loader_close{float:left}
.fb_dialog.fb_dialog_mobile .fb_dialog_close_button{text-shadow:rgba(0, 30, 84, .296875) 0 -1px 0}
.fb_dialog.fb_dialog_mobile .fb_dialog_close_icon{visibility:hidden}
.fb_iframe_widget{display:inline-block;position:relative}
.fb_iframe_widget span{display:inline-block;position:relative;text-align:justify}
.fb_iframe_widget iframe{position:absolute}
.fb_iframe_widget_lift{z-index:1}
.fb_hide_iframes iframe{position:relative;left:-10000px}
.fb_iframe_widget_loader{position:relative;display:inline-block}
.fb_iframe_widget_fluid{display:inline}
.fb_iframe_widget_fluid span{width:100%}
.fb_iframe_widget_loader iframe{min-height:32px;z-index:2;zoom:1}
.fb_iframe_widget_loader .FB_Loader{background:url(http://static.ak.fbcdn.net/rsrc.php/v2/y9/r/jKEcVPZFk-2.gif) no-repeat;height:32px;width:32px;margin-left:-16px;position:absolute;left:50%;z-index:4}
.fb_connect_bar_container div,
.fb_connect_bar_container span,
.fb_connect_bar_container a,
.fb_connect_bar_container img,
.fb_connect_bar_container strong{background:none;border-spacing:0;border:0;direction:ltr;font-style:normal;font-variant:normal;letter-spacing:normal;line-height:1;margin:0;overflow:visible;padding:0;text-align:left;text-decoration:none;text-indent:0;text-shadow:none;text-transform:none;visibility:visible;white-space:normal;word-spacing:normal;vertical-align:baseline}
.fb_connect_bar_container{position:fixed;left:0 !important;right:0 !important;height:42px !important;padding:0 25px !important;margin:0 !important;vertical-align:middle !important;border-bottom:1px solid #333 !important;background:#3b5998 !important;z-index:99999999 !important;overflow:hidden !important}
.fb_connect_bar_container_ie6{position:absolute;top:expression(document.compatMode=="CSS1Compat"? document.documentElement.scrollTop+"px":body.scrollTop+"px")}
.fb_connect_bar{position:relative;margin:auto;height:100%;width:100%;padding:6px 0 0 0 !important;background:none;color:#fff !important;font-family:"lucida grande", tahoma, verdana, arial, sans-serif !important;font-size:13px !important;font-style:normal !important;font-variant:normal !important;font-weight:normal !important;letter-spacing:normal !important;line-height:1 !important;text-decoration:none !important;text-indent:0 !important;text-shadow:none !important;text-transform:none !important;white-space:normal !important;word-spacing:normal !important}
.fb_connect_bar a:hover{color:#fff}
.fb_connect_bar .fb_profile img{height:30px;width:30px;vertical-align:middle;margin:0 6px 5px 0}
.fb_connect_bar div a,
.fb_connect_bar span,
.fb_connect_bar span a{color:#bac6da;font-size:11px;text-decoration:none}
.fb_connect_bar .fb_buttons{float:right;margin-top:7px}
.fb_edge_widget_with_comment{position:relative;*z-index:1000}
.fb_edge_widget_with_comment span.fb_edge_comment_widget{position:absolute}
.fb_edge_widget_with_comment span.fb_send_button_form_widget{z-index:1}
.fb_edge_widget_with_comment span.fb_send_button_form_widget .FB_Loader{left:0;top:1px;margin-top:6px;margin-left:0;background-position:50% 50%;background-color:#fff;height:150px;width:394px;border:1px #666 solid;border-bottom:2px solid #283e6c;z-index:1}
.fb_edge_widget_with_comment span.fb_send_button_form_widget.dark .FB_Loader{background-color:#000;border-bottom:2px solid #ccc}
.fb_edge_widget_with_comment span.fb_send_button_form_widget.siderender
.FB_Loader{margin-top:0}
.fbpluginrecommendationsbarleft,
.fbpluginrecommendationsbarright{position:fixed !important;bottom:0;z-index:999}
.fbpluginrecommendationsbarleft{left:10px}
.fbpluginrecommendationsbarright{right:10px}</style></head>

<body class="single single-post postid-1271 single-format-standard custom-background single-author singular two-column right-sidebar" data-twttr-rendered="true">
<div id="page" class="hfeed">
	<header id="branding" role="banner">
			<hgroup>
				<h1 id="site-title"><span><a href="http://www.ens.ro/" title="ENS" rel="home">ENS</a></span></h1>
				<h2 id="site-description">Entertainment, News, Software</h2>
			</hgroup>

						<a href="http://www.ens.ro/">
									<img src="./Symfony2 Jobeet Day 10  The Forms   ENS_files/cropped-wallpaper-15057031.jpg" width="1000" height="288" alt="">
							</a>
			
								<form method="get" id="searchform" action="http://www.ens.ro/">
		<label for="s" class="assistive-text">Search</label>
		<input type="text" class="field" name="s" id="s" placeholder="Search">
		<input type="submit" class="submit" name="submit" id="searchsubmit" value="Search">
	</form>
			
			<nav id="access" role="navigation">
				<h3 class="assistive-text">Main menu</h3>
								<div class="skip-link"><a class="assistive-text" href="http://www.ens.ro/2012/05/17/symfony2-jobeet-day-10-the-forms/#content" title="Skip to primary content">Skip to primary content</a></div>
				<div class="skip-link"><a class="assistive-text" href="http://www.ens.ro/2012/05/17/symfony2-jobeet-day-10-the-forms/#secondary" title="Skip to secondary content">Skip to secondary content</a></div>
								<div class="menu-my-menu-container"><ul id="menu-my-menu" class="menu"><li id="menu-item-161" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-home menu-item-161"><a href="http://www.ens.ro/">Home</a></li>
<li id="menu-item-160" class="menu-item menu-item-type-taxonomy menu-item-object-category current-post-ancestor current-menu-parent current-post-parent menu-item-160"><a href="http://www.ens.ro/category/web-development/">Web Development</a>
<ul class="sub-menu">
	<li id="menu-item-822" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-822"><a title="The Jobeet Tutorial with Symfony2" href="http://www.ens.ro/tag/symfony2-jobeet/">Symfony2 Jobeet</a></li>
	<li id="menu-item-2050" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-2050"><a title="Symfony2 Tutorials" href="http://www.ens.ro/tag/symfony2/">Symfony2</a></li>
	<li id="menu-item-2055" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-2055"><a title="Symfony 1.4 Tutorials" href="http://www.ens.ro/tag/symfony-1-4/">Symfony 1.4</a></li>
	<li id="menu-item-2049" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-2049"><a title="Zend Framework Tutorials" href="http://www.ens.ro/tag/zend/">Zend</a></li>
	<li id="menu-item-2063" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-2063"><a title="PHP Tutorials" href="http://www.ens.ro/tag/php-2/">PHP</a></li>
	<li id="menu-item-2064" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-2064"><a title="MySQL Tutorials" href="http://www.ens.ro/tag/mysql/">MySQL</a></li>
</ul>
</li>
<li id="menu-item-2073" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-2073"><a title="Entertainment" href="http://www.ens.ro/tag/entertainment/">Entertainment</a></li>
<li id="menu-item-159" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-159"><a href="http://www.ens.ro/about/">About ENS</a></li>
<li id="menu-item-1267" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-1267"><a href="http://www.ens.ro/contact/">Contact</a></li>
</ul></div>			</nav><!-- #access -->
	</header><!-- #branding -->


	<div id="main">

		<div id="primary">
			<div id="content" role="main">

				
					<nav id="nav-single">
						<h3 class="assistive-text">Post navigation</h3>
						<span class="nav-previous"><a href="http://www.ens.ro/2012/05/10/usefull-linux-commands/" rel="prev"><span class="meta-nav">←</span> Previous</a></span>
						<span class="nav-next"><a href="http://www.ens.ro/2012/06/11/setting-up-symfony2-and-uploadify-session-id/" rel="next">Next <span class="meta-nav">→</span></a></span>
					</nav><!-- #nav-single -->

					
<article id="post-1271" class="post-1271 post type-post status-publish format-standard hentry category-english category-php category-web-development tag-symfony2-jobeet">
	<header class="entry-header">
		<h1 class="entry-title">Symfony2 Jobeet Day 10: The Forms</h1>

				<div class="entry-meta">
			<span class="sep">Posted on </span><a href="./Symfony2 Jobeet Day 10  The Forms   ENS_files/Symfony2 Jobeet Day 10  The Forms   ENS.htm" title="10:08 am" rel="bookmark"><time class="entry-date" datetime="2012-05-17T10:08:34+00:00">May 17, 2012</time></a><span class="by-author"> <span class="sep"> by </span> <span class="author vcard"><a class="url fn n" href="http://www.ens.ro/author/dragos/" title="View all posts by Dragos Holban" rel="author">Dragos Holban</a></span></span>		</div><!-- .entry-meta -->
			</header><!-- .entry-header -->

	<div class="entry-content">
		<p>Any website has forms, from the simple contact form to the complex ones with lots of fields. Writing forms is also one of the most complex and tedious task for a web developer: you need to write the HTML form, implement validation rules for each field, process the values to store them in a database, display error messages, repopulate fields in case of errors, and much more…<span id="more-1271"></span></p>
<p>In <a title="Symfony2 Jobeet Day 3: The Data Model" href="http://www.ens.ro/2012/03/27/symfony2-jobeet-day-3-the-data-model/" target="_blank">Day 3</a> of this tutorial we used the <code>doctrine:generate:crud</code> command to generate a simple CRUD controller for out <code>Job</code> entity. This also generated a <code>Job</code> form that you can find in <code>/src/Ens/JobeetBundle/Form/JobType.php</code> file.</p>
<h2>Customizing the Job Form</h2>
<p>The <code>Job</code> form is a perfect example to learn form customization. Let’s see how to customize it, step by step.</p>
<p>First, change the “Post a Job” link in the layout to be able to check changes directly in your browser:</p>
<div><div id="highlighter_262712" class="syntaxhighlighter  xml"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="xml comments">&lt;!-- src/Ens/JobeetBundle/Resources/views/layout.html.twig --&gt;</code></div><div class="line number2 index1 alt1"><code class="xml plain">&lt;</code><code class="xml keyword">a</code> <code class="xml color1">href</code><code class="xml plain">=</code><code class="xml string">"{{ path('ens_job_new') }}"</code><code class="xml plain">&gt;Post a Job&lt;/</code><code class="xml keyword">a</code><code class="xml plain">&gt;</code></div></div></td></tr></tbody></table></div></div>
<p>Then, change the <code>ens_job_show</code> route parameters in <code>createAction</code> of the <code>JobController</code> to match the new route we created in day 5 of this tutorial:</p>
<div><div id="highlighter_260579" class="syntaxhighlighter  php"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div><div class="line number7 index6 alt2">7</div><div class="line number8 index7 alt1">8</div><div class="line number9 index8 alt2">9</div><div class="line number10 index9 alt1">10</div><div class="line number11 index10 alt2">11</div><div class="line number12 index11 alt1">12</div><div class="line number13 index12 alt2">13</div><div class="line number14 index13 alt1">14</div><div class="line number15 index14 alt2">15</div><div class="line number16 index15 alt1">16</div><div class="line number17 index16 alt2">17</div><div class="line number18 index17 alt1">18</div><div class="line number19 index18 alt2">19</div><div class="line number20 index19 alt1">20</div><div class="line number21 index20 alt2">21</div><div class="line number22 index21 alt1">22</div><div class="line number23 index22 alt2">23</div><div class="line number24 index23 alt1">24</div><div class="line number25 index24 alt2">25</div><div class="line number26 index25 alt1">26</div><div class="line number27 index26 alt2">27</div><div class="line number28 index27 alt1">28</div><div class="line number29 index28 alt2">29</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="php comments">// src/Ens/JobeetBundle/Controller/JobController.php</code></div><div class="line number2 index1 alt1"><code class="php comments">// ...</code></div><div class="line number3 index2 alt2">&nbsp;</div><div class="line number4 index3 alt1"><code class="php keyword">public</code> <code class="php keyword">function</code> <code class="php plain">createAction()</code></div><div class="line number5 index4 alt2"><code class="php plain">{</code></div><div class="line number6 index5 alt1"><code class="php spaces">&nbsp;&nbsp;</code><code class="php variable">$entity</code>&nbsp; <code class="php plain">= </code><code class="php keyword">new</code> <code class="php plain">Job();</code></div><div class="line number7 index6 alt2"><code class="php spaces">&nbsp;&nbsp;</code><code class="php variable">$request</code> <code class="php plain">= </code><code class="php variable">$this</code><code class="php plain">-&gt;getRequest();</code></div><div class="line number8 index7 alt1"><code class="php spaces">&nbsp;&nbsp;</code><code class="php variable">$form</code>&nbsp;&nbsp;&nbsp; <code class="php plain">= </code><code class="php variable">$this</code><code class="php plain">-&gt;createForm(</code><code class="php keyword">new</code> <code class="php plain">JobType(), </code><code class="php variable">$entity</code><code class="php plain">);</code></div><div class="line number9 index8 alt2"><code class="php spaces">&nbsp;&nbsp;</code><code class="php variable">$form</code><code class="php plain">-&gt;bindRequest(</code><code class="php variable">$request</code><code class="php plain">);</code></div><div class="line number10 index9 alt1">&nbsp;</div><div class="line number11 index10 alt2"><code class="php spaces">&nbsp;&nbsp;</code><code class="php keyword">if</code> <code class="php plain">(</code><code class="php variable">$form</code><code class="php plain">-&gt;isValid()) {</code></div><div class="line number12 index11 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php variable">$em</code> <code class="php plain">= </code><code class="php variable">$this</code><code class="php plain">-&gt;getDoctrine()-&gt;getEntityManager();</code></div><div class="line number13 index12 alt2">&nbsp;</div><div class="line number14 index13 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php variable">$em</code><code class="php plain">-&gt;persist(</code><code class="php variable">$entity</code><code class="php plain">);</code></div><div class="line number15 index14 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php variable">$em</code><code class="php plain">-&gt;</code><code class="php functions">flush</code><code class="php plain">();</code></div><div class="line number16 index15 alt1">&nbsp;</div><div class="line number17 index16 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php keyword">return</code> <code class="php variable">$this</code><code class="php plain">-&gt;redirect(</code><code class="php variable">$this</code><code class="php plain">-&gt;generateUrl(</code><code class="php string">'ens_job_show'</code><code class="php plain">, </code><code class="php keyword">array</code><code class="php plain">(</code></div><div class="line number18 index17 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php string">'company'</code> <code class="php plain">=&gt; </code><code class="php variable">$entity</code><code class="php plain">-&gt;getCompanySlug(),</code></div><div class="line number19 index18 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php string">'location'</code> <code class="php plain">=&gt; </code><code class="php variable">$entity</code><code class="php plain">-&gt;getLocationSlug(),</code></div><div class="line number20 index19 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php string">'id'</code> <code class="php plain">=&gt; </code><code class="php variable">$entity</code><code class="php plain">-&gt;getId(),</code></div><div class="line number21 index20 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php string">'position'</code> <code class="php plain">=&gt; </code><code class="php variable">$entity</code><code class="php plain">-&gt;getPositionSlug()</code></div><div class="line number22 index21 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">)));</code></div><div class="line number23 index22 alt2"><code class="php spaces">&nbsp;&nbsp;</code><code class="php plain">}</code></div><div class="line number24 index23 alt1">&nbsp;</div><div class="line number25 index24 alt2"><code class="php spaces">&nbsp;&nbsp;</code><code class="php keyword">return</code> <code class="php variable">$this</code><code class="php plain">-&gt;render(</code><code class="php string">'EnsJobeetBundle:Job:new.html.twig'</code><code class="php plain">, </code><code class="php keyword">array</code><code class="php plain">(</code></div><div class="line number26 index25 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php string">'entity'</code> <code class="php plain">=&gt; </code><code class="php variable">$entity</code><code class="php plain">,</code></div><div class="line number27 index26 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php string">'form'</code>&nbsp;&nbsp; <code class="php plain">=&gt; </code><code class="php variable">$form</code><code class="php plain">-&gt;createView()</code></div><div class="line number28 index27 alt1"><code class="php spaces">&nbsp;&nbsp;</code><code class="php plain">));</code></div><div class="line number29 index28 alt2"><code class="php plain">}</code></div></div></td></tr></tbody></table></div></div>
<p>By default, the Doctrine generated form displays fields for all the table columns. But for the <code>Job</code> form, some of them must not be editable by the end user. Edit the <code>Job</code> form as you see below:</p>
<div><div id="highlighter_89096" class="syntaxhighlighter  php"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div><div class="line number7 index6 alt2">7</div><div class="line number8 index7 alt1">8</div><div class="line number9 index8 alt2">9</div><div class="line number10 index9 alt1">10</div><div class="line number11 index10 alt2">11</div><div class="line number12 index11 alt1">12</div><div class="line number13 index12 alt2">13</div><div class="line number14 index13 alt1">14</div><div class="line number15 index14 alt2">15</div><div class="line number16 index15 alt1">16</div><div class="line number17 index16 alt2">17</div><div class="line number18 index17 alt1">18</div><div class="line number19 index18 alt2">19</div><div class="line number20 index19 alt1">20</div><div class="line number21 index20 alt2">21</div><div class="line number22 index21 alt1">22</div><div class="line number23 index22 alt2">23</div><div class="line number24 index23 alt1">24</div><div class="line number25 index24 alt2">25</div><div class="line number26 index25 alt1">26</div><div class="line number27 index26 alt2">27</div><div class="line number28 index27 alt1">28</div><div class="line number29 index28 alt2">29</div><div class="line number30 index29 alt1">30</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="php comments">// src/Ens/JobeetBundle/Form/JobType.php</code></div><div class="line number2 index1 alt1">&nbsp;</div><div class="line number3 index2 alt2"><code class="php keyword">namespace</code> <code class="php plain">Ens\JobeetBundle\Form;</code></div><div class="line number4 index3 alt1">&nbsp;</div><div class="line number5 index4 alt2"><code class="php keyword">use</code> <code class="php plain">Symfony\Component\Form\AbstractType;</code></div><div class="line number6 index5 alt1"><code class="php keyword">use</code> <code class="php plain">Symfony\Component\Form\FormBuilder;</code></div><div class="line number7 index6 alt2">&nbsp;</div><div class="line number8 index7 alt1"><code class="php keyword">class</code> <code class="php plain">JobType </code><code class="php keyword">extends</code> <code class="php plain">AbstractType</code></div><div class="line number9 index8 alt2"><code class="php plain">{</code></div><div class="line number10 index9 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php keyword">public</code> <code class="php keyword">function</code> <code class="php plain">buildForm(FormBuilder </code><code class="php variable">$builder</code><code class="php plain">, </code><code class="php keyword">array</code> <code class="php variable">$options</code><code class="php plain">)</code></div><div class="line number11 index10 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">{</code></div><div class="line number12 index11 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php variable">$builder</code><code class="php plain">-&gt;add(</code><code class="php string">'category'</code><code class="php plain">);</code></div><div class="line number13 index12 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php variable">$builder</code><code class="php plain">-&gt;add(</code><code class="php string">'type'</code><code class="php plain">);</code></div><div class="line number14 index13 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php variable">$builder</code><code class="php plain">-&gt;add(</code><code class="php string">'company'</code><code class="php plain">);</code></div><div class="line number15 index14 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php variable">$builder</code><code class="php plain">-&gt;add(</code><code class="php string">'logo'</code><code class="php plain">);</code></div><div class="line number16 index15 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php variable">$builder</code><code class="php plain">-&gt;add(</code><code class="php string">'url'</code><code class="php plain">);</code></div><div class="line number17 index16 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php variable">$builder</code><code class="php plain">-&gt;add(</code><code class="php string">'position'</code><code class="php plain">);</code></div><div class="line number18 index17 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php variable">$builder</code><code class="php plain">-&gt;add(</code><code class="php string">'location'</code><code class="php plain">);</code></div><div class="line number19 index18 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php variable">$builder</code><code class="php plain">-&gt;add(</code><code class="php string">'description'</code><code class="php plain">);</code></div><div class="line number20 index19 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php variable">$builder</code><code class="php plain">-&gt;add(</code><code class="php string">'how_to_apply'</code><code class="php plain">);</code></div><div class="line number21 index20 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php variable">$builder</code><code class="php plain">-&gt;add(</code><code class="php string">'token'</code><code class="php plain">);</code></div><div class="line number22 index21 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php variable">$builder</code><code class="php plain">-&gt;add(</code><code class="php string">'is_public'</code><code class="php plain">);</code></div><div class="line number23 index22 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php variable">$builder</code><code class="php plain">-&gt;add(</code><code class="php string">'email'</code><code class="php plain">);</code></div><div class="line number24 index23 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">}</code></div><div class="line number25 index24 alt2">&nbsp;</div><div class="line number26 index25 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php keyword">public</code> <code class="php keyword">function</code> <code class="php plain">getName()</code></div><div class="line number27 index26 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">{</code></div><div class="line number28 index27 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php keyword">return</code> <code class="php string">'ens_jobeetbundle_jobtype'</code><code class="php plain">;</code></div><div class="line number29 index28 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">}</code></div><div class="line number30 index29 alt1"><code class="php plain">}</code></div></div></td></tr></tbody></table></div></div>
<p>The form configuration must sometimes be more precise than what can be introspected from the database schema. For example, the <code>email</code> column is a <code>varchar</code> in the schema, but we need this column to be validated as an email. In Symfony2, validation is applied to the underlying object (e.g. Job). In other words, the question isn’t whether the “form” is valid, but whether or not the <code>Job</code> object is valid after the form has applied the submitted data to it. To do this, create a new <code>validation.yml</code> file in the <code>Resources/config</code> directory of our bundle:</p>
<div><div id="highlighter_149243" class="syntaxhighlighter  plain"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div><div class="line number7 index6 alt2">7</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="plain plain"># src/Ens/JobeetBundle/Resources/config/validation.yml</code></div><div class="line number2 index1 alt1">&nbsp;</div><div class="line number3 index2 alt2"><code class="plain plain">Ens\JobeetBundle\Entity\Job:</code></div><div class="line number4 index3 alt1"><code class="plain spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain plain">properties:</code></div><div class="line number5 index4 alt2"><code class="plain spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain plain">email:</code></div><div class="line number6 index5 alt1"><code class="plain spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain plain">- NotBlank: ~</code></div><div class="line number7 index6 alt2"><code class="plain spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain plain">- Email: ~</code></div></div></td></tr></tbody></table></div></div>
<p>Even if the <code>type</code> column is also a <code>varchar</code> in the schema, we want its value to be restricted to a list of choices: full time, part time, or freelance.</p>
<div><div id="highlighter_131264" class="syntaxhighlighter  php"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div><div class="line number7 index6 alt2">7</div><div class="line number8 index7 alt1">8</div><div class="line number9 index8 alt2">9</div><div class="line number10 index9 alt1">10</div><div class="line number11 index10 alt2">11</div><div class="line number12 index11 alt1">12</div><div class="line number13 index12 alt2">13</div><div class="line number14 index13 alt1">14</div><div class="line number15 index14 alt2">15</div><div class="line number16 index15 alt1">16</div><div class="line number17 index16 alt2">17</div><div class="line number18 index17 alt1">18</div><div class="line number19 index18 alt2">19</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="php comments">// src/Ens/JobeetBundle/Form/JobType.php</code></div><div class="line number2 index1 alt1"><code class="php comments">// ...</code></div><div class="line number3 index2 alt2">&nbsp;</div><div class="line number4 index3 alt1"><code class="php keyword">use</code> <code class="php plain">Ens\JobeetBundle\Entity\Job;</code></div><div class="line number5 index4 alt2">&nbsp;</div><div class="line number6 index5 alt1"><code class="php keyword">class</code> <code class="php plain">JobType </code><code class="php keyword">extends</code> <code class="php plain">AbstractType</code></div><div class="line number7 index6 alt2"><code class="php plain">{</code></div><div class="line number8 index7 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php keyword">public</code> <code class="php keyword">function</code> <code class="php plain">buildForm(FormBuilder </code><code class="php variable">$builder</code><code class="php plain">, </code><code class="php keyword">array</code> <code class="php variable">$options</code><code class="php plain">)</code></div><div class="line number9 index8 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">{</code></div><div class="line number10 index9 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php comments">// ...</code></div><div class="line number11 index10 alt2">&nbsp;</div><div class="line number12 index11 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php variable">$builder</code><code class="php plain">-&gt;add(</code><code class="php string">'type'</code><code class="php plain">, </code><code class="php string">'choice'</code><code class="php plain">, </code><code class="php keyword">array</code><code class="php plain">(</code><code class="php string">'choices'</code> <code class="php plain">=&gt; Job::getTypes(), </code><code class="php string">'expanded'</code> <code class="php plain">=&gt; true));</code></div><div class="line number13 index12 alt2">&nbsp;</div><div class="line number14 index13 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php comments">// ...</code></div><div class="line number15 index14 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">}</code></div><div class="line number16 index15 alt1">&nbsp;</div><div class="line number17 index16 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php comments">// ...</code></div><div class="line number18 index17 alt1">&nbsp;</div><div class="line number19 index18 alt2"><code class="php plain">}</code></div></div></td></tr></tbody></table></div></div>
<p>For this to work, add the following methods in the <code>Job</code> entity:</p>
<div><div id="highlighter_857055" class="syntaxhighlighter  php"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div><div class="line number7 index6 alt2">7</div><div class="line number8 index7 alt1">8</div><div class="line number9 index8 alt2">9</div><div class="line number10 index9 alt1">10</div><div class="line number11 index10 alt2">11</div><div class="line number12 index11 alt1">12</div><div class="line number13 index12 alt2">13</div><div class="line number14 index13 alt1">14</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="php comments">// src/Ens/JobeetBundle/Entity/Job.php</code></div><div class="line number2 index1 alt1"><code class="php comments">// ...</code></div><div class="line number3 index2 alt2">&nbsp;</div><div class="line number4 index3 alt1"><code class="php keyword">public</code> <code class="php keyword">static</code> <code class="php keyword">function</code> <code class="php plain">getTypes()</code></div><div class="line number5 index4 alt2"><code class="php plain">{</code></div><div class="line number6 index5 alt1"><code class="php spaces">&nbsp;&nbsp;</code><code class="php keyword">return</code> <code class="php keyword">array</code><code class="php plain">(</code><code class="php string">'full-time'</code> <code class="php plain">=&gt; </code><code class="php string">'Full time'</code><code class="php plain">, </code><code class="php string">'part-time'</code> <code class="php plain">=&gt; </code><code class="php string">'Part time'</code><code class="php plain">, </code><code class="php string">'freelance'</code> <code class="php plain">=&gt; </code><code class="php string">'Freelance'</code><code class="php plain">);</code></div><div class="line number7 index6 alt2"><code class="php plain">}</code></div><div class="line number8 index7 alt1">&nbsp;</div><div class="line number9 index8 alt2"><code class="php keyword">public</code> <code class="php keyword">static</code> <code class="php keyword">function</code> <code class="php plain">getTypeValues()</code></div><div class="line number10 index9 alt1"><code class="php plain">{</code></div><div class="line number11 index10 alt2"><code class="php spaces">&nbsp;&nbsp;</code><code class="php keyword">return</code> <code class="php functions">array_keys</code><code class="php plain">(self::getTypes());</code></div><div class="line number12 index11 alt1"><code class="php plain">}</code></div><div class="line number13 index12 alt2">&nbsp;</div><div class="line number14 index13 alt1"><code class="php comments">// ...</code></div></div></td></tr></tbody></table></div></div>
<p>The <code>getTypes</code> method is used in the form to get the possible types for a Job and <code>getTypeValues</code> will be used in the validation to get the valid values for the <code>type</code> field.</p>
<div><div id="highlighter_916209" class="syntaxhighlighter  plain"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div><div class="line number7 index6 alt2">7</div><div class="line number8 index7 alt1">8</div><div class="line number9 index8 alt2">9</div><div class="line number10 index9 alt1">10</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="plain plain"># src/Ens/JobeetBundle/Resources/config/validation.yml</code></div><div class="line number2 index1 alt1">&nbsp;</div><div class="line number3 index2 alt2"><code class="plain plain">Ens\JobeetBundle\Entity\Job:</code></div><div class="line number4 index3 alt1"><code class="plain spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain plain">properties:</code></div><div class="line number5 index4 alt2"><code class="plain spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain plain">type:</code></div><div class="line number6 index5 alt1"><code class="plain spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain plain">- NotBlank: ~</code></div><div class="line number7 index6 alt2"><code class="plain spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain plain">- Choice: { callback: getTypeValues }</code></div><div class="line number8 index7 alt1"><code class="plain spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain plain">email:</code></div><div class="line number9 index8 alt2"><code class="plain spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain plain">- NotBlank: ~</code></div><div class="line number10 index9 alt1"><code class="plain spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain plain">- Email: ~</code></div></div></td></tr></tbody></table></div></div>
<p>For each field, symfony automatically generates a label (which will be used in the rendered <code>&lt;label&gt;</code> tag). This can be changed with the <code>label</code> option:</p>
<div><div id="highlighter_118661" class="syntaxhighlighter  php"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="php variable">$builder</code><code class="php plain">-&gt;add(</code><code class="php string">'logo'</code><code class="php plain">, null, </code><code class="php keyword">array</code><code class="php plain">(</code><code class="php string">'label'</code> <code class="php plain">=&gt; </code><code class="php string">'Company logo'</code><code class="php plain">));</code></div><div class="line number2 index1 alt1"><code class="php variable">$builder</code><code class="php plain">-&gt;add(</code><code class="php string">'how_to_apply'</code><code class="php plain">, null, </code><code class="php keyword">array</code><code class="php plain">(</code><code class="php string">'label'</code> <code class="php plain">=&gt; </code><code class="php string">'How to apply?'</code><code class="php plain">));</code></div><div class="line number3 index2 alt2"><code class="php variable">$builder</code><code class="php plain">-&gt;add(</code><code class="php string">'is_public'</code><code class="php plain">, null, </code><code class="php keyword">array</code><code class="php plain">(</code><code class="php string">'label'</code> <code class="php plain">=&gt; </code><code class="php string">'Public?'</code><code class="php plain">));</code></div></div></td></tr></tbody></table></div></div>
<p>You should also add validation constraints for the rest of the fields:</p>
<div><div id="highlighter_250369" class="syntaxhighlighter  plain"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div><div class="line number7 index6 alt2">7</div><div class="line number8 index7 alt1">8</div><div class="line number9 index8 alt2">9</div><div class="line number10 index9 alt1">10</div><div class="line number11 index10 alt2">11</div><div class="line number12 index11 alt1">12</div><div class="line number13 index12 alt2">13</div><div class="line number14 index13 alt1">14</div><div class="line number15 index14 alt2">15</div><div class="line number16 index15 alt1">16</div><div class="line number17 index16 alt2">17</div><div class="line number18 index17 alt1">18</div><div class="line number19 index18 alt2">19</div><div class="line number20 index19 alt1">20</div><div class="line number21 index20 alt2">21</div><div class="line number22 index21 alt1">22</div><div class="line number23 index22 alt2">23</div><div class="line number24 index23 alt1">24</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="plain plain"># src/Ens/JobeetBundle/Resources/config/validation.yml</code></div><div class="line number2 index1 alt1">&nbsp;</div><div class="line number3 index2 alt2"><code class="plain plain">Ens\JobeetBundle\Entity\Job:</code></div><div class="line number4 index3 alt1"><code class="plain spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain plain">properties:</code></div><div class="line number5 index4 alt2"><code class="plain spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain plain">category:</code></div><div class="line number6 index5 alt1"><code class="plain spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain plain">- NotBlank: ~</code></div><div class="line number7 index6 alt2"><code class="plain spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain plain">type:</code></div><div class="line number8 index7 alt1"><code class="plain spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain plain">- NotBlank: ~</code></div><div class="line number9 index8 alt2"><code class="plain spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain plain">- Choice: {callback: getTypeValues}</code></div><div class="line number10 index9 alt1"><code class="plain spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain plain">company:</code></div><div class="line number11 index10 alt2"><code class="plain spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain plain">- NotBlank: ~</code></div><div class="line number12 index11 alt1"><code class="plain spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain plain">position:</code></div><div class="line number13 index12 alt2"><code class="plain spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain plain">- NotBlank: ~</code></div><div class="line number14 index13 alt1"><code class="plain spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain plain">location:</code></div><div class="line number15 index14 alt2"><code class="plain spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain plain">- NotBlank: ~</code></div><div class="line number16 index15 alt1"><code class="plain spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain plain">description:</code></div><div class="line number17 index16 alt2"><code class="plain spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain plain">- NotBlank: ~</code></div><div class="line number18 index17 alt1"><code class="plain spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain plain">how_to_apply:</code></div><div class="line number19 index18 alt2"><code class="plain spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain plain">- NotBlank: ~</code></div><div class="line number20 index19 alt1"><code class="plain spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain plain">token:</code></div><div class="line number21 index20 alt2"><code class="plain spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain plain">- NotBlank: ~</code></div><div class="line number22 index21 alt1"><code class="plain spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain plain">email:</code></div><div class="line number23 index22 alt2"><code class="plain spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain plain">- NotBlank: ~</code></div><div class="line number24 index23 alt1"><code class="plain spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain plain">- Email: ~</code></div></div></td></tr></tbody></table></div></div>
<h2>Handling File Uploads in Symfony2</h2>
<p>To handle the actual file upload in the form, we will use a “virtual” <code>file</code> field. For this we will add a new file property to the Job entity:</p>
<div><div id="highlighter_958122" class="syntaxhighlighter  php"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="php comments">// src/Ens/JobeetBundle/Entity/Job.php</code></div><div class="line number2 index1 alt1"><code class="php comments">// ...</code></div><div class="line number3 index2 alt2">&nbsp;</div><div class="line number4 index3 alt1"><code class="php keyword">public</code> <code class="php variable">$file</code><code class="php plain">;</code></div></div></td></tr></tbody></table></div></div>
<p>Now we need to replace the logo with the file widget and change it to a file input tag:</p>
<div><div id="highlighter_460402" class="syntaxhighlighter  php"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="php comments">// src/Ens/JobeetBundle/Form/JobType.php</code></div><div class="line number2 index1 alt1"><code class="php comments">// ...</code></div><div class="line number3 index2 alt2">&nbsp;</div><div class="line number4 index3 alt1"><code class="php variable">$builder</code><code class="php plain">-&gt;add(</code><code class="php string">'file'</code><code class="php plain">, </code><code class="php string">'file'</code><code class="php plain">, </code><code class="php keyword">array</code><code class="php plain">(</code><code class="php string">'label'</code> <code class="php plain">=&gt; </code><code class="php string">'Company logo'</code><code class="php plain">, </code><code class="php string">'required'</code> <code class="php plain">=&gt; false));</code></div><div class="line number5 index4 alt2">&nbsp;</div><div class="line number6 index5 alt1"><code class="php comments">// ...</code></div></div></td></tr></tbody></table></div></div>
<p>To make sure the uploaded file is a valid image we will use the <code>Image</code> validation constraint:</p>
<div><div id="highlighter_272235" class="syntaxhighlighter  plain"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="plain plain"># src/Ens/JobeetBundle/Resources/config/validation.yml</code></div><div class="line number2 index1 alt1"><code class="plain plain">Ens\JobeetBundle\Entity\Job:</code></div><div class="line number3 index2 alt2"><code class="plain spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain plain">properties:</code></div><div class="line number4 index3 alt1"><code class="plain spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain plain"># ...</code></div><div class="line number5 index4 alt2"><code class="plain spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain plain">file:</code></div><div class="line number6 index5 alt1"><code class="plain spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain plain">- Image: ~</code></div></div></td></tr></tbody></table></div></div>
<p>When the form is submitted, the <code>file</code> field will be an instance of <a href="http://api.symfony.com/2.0/Symfony/Component/HttpFoundation/File/UploadedFile.html" onclick="javascript:_gaq.push([&#39;_trackEvent&#39;,&#39;outbound-article&#39;,&#39;http://api.symfony.com&#39;]);" target="_blank"><code>UploadedFile</code></a>. It can be used to move the <code></code>file to a permanent location. After this we will set the job <code>logo</code> property to the uploaded file name.</p>
<div><div id="highlighter_329185" class="syntaxhighlighter  php"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div><div class="line number7 index6 alt2">7</div><div class="line number8 index7 alt1">8</div><div class="line number9 index8 alt2">9</div><div class="line number10 index9 alt1">10</div><div class="line number11 index10 alt2">11</div><div class="line number12 index11 alt1">12</div><div class="line number13 index12 alt2">13</div><div class="line number14 index13 alt1">14</div><div class="line number15 index14 alt2">15</div><div class="line number16 index15 alt1">16</div><div class="line number17 index16 alt2">17</div><div class="line number18 index17 alt1">18</div><div class="line number19 index18 alt2">19</div><div class="line number20 index19 alt1">20</div><div class="line number21 index20 alt2">21</div><div class="line number22 index21 alt1">22</div><div class="line number23 index22 alt2">23</div><div class="line number24 index23 alt1">24</div><div class="line number25 index24 alt2">25</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="php comments">// src/Ens/JobeedBundle/Controller/JobController.php</code></div><div class="line number2 index1 alt1"><code class="php comments">// ...</code></div><div class="line number3 index2 alt2">&nbsp;</div><div class="line number4 index3 alt1"><code class="php keyword">public</code> <code class="php keyword">function</code> <code class="php plain">createAction()</code></div><div class="line number5 index4 alt2"><code class="php plain">{</code></div><div class="line number6 index5 alt1"><code class="php spaces">&nbsp;&nbsp;</code><code class="php comments">// ...</code></div><div class="line number7 index6 alt2">&nbsp;</div><div class="line number8 index7 alt1"><code class="php spaces">&nbsp;&nbsp;</code><code class="php keyword">if</code> <code class="php plain">(</code><code class="php variable">$form</code><code class="php plain">-&gt;isValid()) {</code></div><div class="line number9 index8 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php variable">$em</code> <code class="php plain">= </code><code class="php variable">$this</code><code class="php plain">-&gt;getDoctrine()-&gt;getEntityManager();</code></div><div class="line number10 index9 alt1">&nbsp;</div><div class="line number11 index10 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php variable">$entity</code><code class="php plain">-&gt;file-&gt;move(__DIR__.</code><code class="php string">'/../../../../web/uploads/jobs'</code><code class="php plain">, </code><code class="php variable">$entity</code><code class="php plain">-&gt;file-&gt;getClientOriginalName());</code></div><div class="line number12 index11 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php variable">$entity</code><code class="php plain">-&gt;setLogo(</code><code class="php variable">$entity</code><code class="php plain">-&gt;file-&gt;getClientOriginalName());</code></div><div class="line number13 index12 alt2">&nbsp;</div><div class="line number14 index13 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php variable">$em</code><code class="php plain">-&gt;persist(</code><code class="php variable">$entity</code><code class="php plain">);</code></div><div class="line number15 index14 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php variable">$em</code><code class="php plain">-&gt;</code><code class="php functions">flush</code><code class="php plain">();</code></div><div class="line number16 index15 alt1">&nbsp;</div><div class="line number17 index16 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php keyword">return</code> <code class="php variable">$this</code><code class="php plain">-&gt;redirect(</code><code class="php variable">$this</code><code class="php plain">-&gt;generateUrl(</code><code class="php string">'ens_job_show'</code><code class="php plain">, </code><code class="php keyword">array</code><code class="php plain">(</code></div><div class="line number18 index17 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php string">'company'</code> <code class="php plain">=&gt; </code><code class="php variable">$entity</code><code class="php plain">-&gt;getCompanySlug(),</code></div><div class="line number19 index18 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php string">'location'</code> <code class="php plain">=&gt; </code><code class="php variable">$entity</code><code class="php plain">-&gt;getLocationSlug(),</code></div><div class="line number20 index19 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php string">'id'</code> <code class="php plain">=&gt; </code><code class="php variable">$entity</code><code class="php plain">-&gt;getId(),</code></div><div class="line number21 index20 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php string">'position'</code> <code class="php plain">=&gt; </code><code class="php variable">$entity</code><code class="php plain">-&gt;getPositionSlug()</code></div><div class="line number22 index21 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">)));</code></div><div class="line number23 index22 alt2"><code class="php spaces">&nbsp;&nbsp;</code><code class="php plain">}</code></div><div class="line number24 index23 alt1"><code class="php spaces">&nbsp;&nbsp;</code><code class="php comments">// ...</code></div><div class="line number25 index24 alt2"><code class="php plain">}</code></div></div></td></tr></tbody></table></div></div>
<blockquote><p>You need to create the logo directory (<code>web/uploads/jobs/</code>) and check that it is writable by the web server.</p></blockquote>
<p>Even if this implementation works, a better way is to handle the file upload using the Doctrine <code>Job</code> entity.</p>
<p>First, add the following to the <code>Job</code> entity:</p>
<div><div id="highlighter_917022" class="syntaxhighlighter  php"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div><div class="line number7 index6 alt2">7</div><div class="line number8 index7 alt1">8</div><div class="line number9 index8 alt2">9</div><div class="line number10 index9 alt1">10</div><div class="line number11 index10 alt2">11</div><div class="line number12 index11 alt1">12</div><div class="line number13 index12 alt2">13</div><div class="line number14 index13 alt1">14</div><div class="line number15 index14 alt2">15</div><div class="line number16 index15 alt1">16</div><div class="line number17 index16 alt2">17</div><div class="line number18 index17 alt1">18</div><div class="line number19 index18 alt2">19</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="php keyword">protected</code> <code class="php keyword">function</code> <code class="php plain">getUploadDir()</code></div><div class="line number2 index1 alt1"><code class="php plain">{</code></div><div class="line number3 index2 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php keyword">return</code> <code class="php string">'uploads/jobs'</code><code class="php plain">;</code></div><div class="line number4 index3 alt1"><code class="php plain">}</code></div><div class="line number5 index4 alt2">&nbsp;</div><div class="line number6 index5 alt1"><code class="php keyword">protected</code> <code class="php keyword">function</code> <code class="php plain">getUploadRootDir()</code></div><div class="line number7 index6 alt2"><code class="php plain">{</code></div><div class="line number8 index7 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php keyword">return</code> <code class="php plain">__DIR__.</code><code class="php string">'/../../../../web/'</code><code class="php plain">.</code><code class="php variable">$this</code><code class="php plain">-&gt;getUploadDir();</code></div><div class="line number9 index8 alt2"><code class="php plain">}</code></div><div class="line number10 index9 alt1">&nbsp;</div><div class="line number11 index10 alt2"><code class="php keyword">public</code> <code class="php keyword">function</code> <code class="php plain">getWebPath()</code></div><div class="line number12 index11 alt1"><code class="php plain">{</code></div><div class="line number13 index12 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php keyword">return</code> <code class="php plain">null === </code><code class="php variable">$this</code><code class="php plain">-&gt;logo ? null : </code><code class="php variable">$this</code><code class="php plain">-&gt;getUploadDir().</code><code class="php string">'/'</code><code class="php plain">.</code><code class="php variable">$this</code><code class="php plain">-&gt;logo;</code></div><div class="line number14 index13 alt1"><code class="php plain">}</code></div><div class="line number15 index14 alt2">&nbsp;</div><div class="line number16 index15 alt1"><code class="php keyword">public</code> <code class="php keyword">function</code> <code class="php plain">getAbsolutePath()</code></div><div class="line number17 index16 alt2"><code class="php plain">{</code></div><div class="line number18 index17 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php keyword">return</code> <code class="php plain">null === </code><code class="php variable">$this</code><code class="php plain">-&gt;logo ? null : </code><code class="php variable">$this</code><code class="php plain">-&gt;getUploadRootDir().</code><code class="php string">'/'</code><code class="php plain">.</code><code class="php variable">$this</code><code class="php plain">-&gt;logo;</code></div><div class="line number19 index18 alt2"><code class="php plain">}</code></div></div></td></tr></tbody></table></div></div>
<p>The <code>logo</code> property stores the relative path to the file and is persisted to the database. The <code>getAbsolutePath()</code> is a convenience method that returns the absolute path to the file while the <code>getWebPath()</code> is a convenience method that returns the web path, which can be used in a template to link to the uploaded file.</p>
<p>We will make the implementation so that the database operation and the moving of the file are atomic: if there is a problem persisting the entity or if the file cannot be saved, then nothing will happen. To do this, we need to move the file right as Doctrine persists the entity to the database. This can be accomplished by hooking into the <code>Job</code> entity lifecycle callback. Like we did in day 3 of the Jobeet tutorial, we will edit the <code>Job.orm.yml</code> file and add the <code>preUpload</code>, <code>upload</code> and <code>removeUpload</code> callbacks in it:</p>
<div><div id="highlighter_191505" class="syntaxhighlighter  plain"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div><div class="line number7 index6 alt2">7</div><div class="line number8 index7 alt1">8</div><div class="line number9 index8 alt2">9</div><div class="line number10 index9 alt1">10</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="plain plain"># src/Ens/JobeetBundle/Resources/config/doctrine/Job.orm.yml</code></div><div class="line number2 index1 alt1"><code class="plain plain">Ens\JobeetBundle\Entity\Job:</code></div><div class="line number3 index2 alt2"><code class="plain plain"># ...</code></div><div class="line number4 index3 alt1">&nbsp;</div><div class="line number5 index4 alt2"><code class="plain spaces">&nbsp;&nbsp;</code><code class="plain plain">lifecycleCallbacks:</code></div><div class="line number6 index5 alt1"><code class="plain spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain plain">prePersist: [ preUpload, setCreatedAtValue, setExpiresAtValue ]</code></div><div class="line number7 index6 alt2"><code class="plain spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain plain">preUpdate: [ preUpload, setUpdatedAtValue ]</code></div><div class="line number8 index7 alt1"><code class="plain spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain plain">postPersist: [ upload ]</code></div><div class="line number9 index8 alt2"><code class="plain spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain plain">postUpdate: [ upload ]</code></div><div class="line number10 index9 alt1"><code class="plain spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain plain">postRemove: [ removeUpload ]</code></div></div></td></tr></tbody></table></div></div>
<p>Now run the <code>generate:entities</code> doctrine command to add these new methods to the <code>Job</code> entity:</p>
<div><div id="highlighter_937404" class="syntaxhighlighter nogutter  plain"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="plain plain">php app/console doctrine:generate:entities EnsJobeetBundle</code></div></div></td></tr></tbody></table></div></div>
<p>Edit the <code>Job</code> entity and change the added methods to the following:</p>
<div><div id="highlighter_940625" class="syntaxhighlighter  php"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div><div class="line number7 index6 alt2">7</div><div class="line number8 index7 alt1">8</div><div class="line number9 index8 alt2">9</div><div class="line number10 index9 alt1">10</div><div class="line number11 index10 alt2">11</div><div class="line number12 index11 alt1">12</div><div class="line number13 index12 alt2">13</div><div class="line number14 index13 alt1">14</div><div class="line number15 index14 alt2">15</div><div class="line number16 index15 alt1">16</div><div class="line number17 index16 alt2">17</div><div class="line number18 index17 alt1">18</div><div class="line number19 index18 alt2">19</div><div class="line number20 index19 alt1">20</div><div class="line number21 index20 alt2">21</div><div class="line number22 index21 alt1">22</div><div class="line number23 index22 alt2">23</div><div class="line number24 index23 alt1">24</div><div class="line number25 index24 alt2">25</div><div class="line number26 index25 alt1">26</div><div class="line number27 index26 alt2">27</div><div class="line number28 index27 alt1">28</div><div class="line number29 index28 alt2">29</div><div class="line number30 index29 alt1">30</div><div class="line number31 index30 alt2">31</div><div class="line number32 index31 alt1">32</div><div class="line number33 index32 alt2">33</div><div class="line number34 index33 alt1">34</div><div class="line number35 index34 alt2">35</div><div class="line number36 index35 alt1">36</div><div class="line number37 index36 alt2">37</div><div class="line number38 index37 alt1">38</div><div class="line number39 index38 alt2">39</div><div class="line number40 index39 alt1">40</div><div class="line number41 index40 alt2">41</div><div class="line number42 index41 alt1">42</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="php comments">// src/Ens/JobeetBundle/Entity/Job.php</code></div><div class="line number2 index1 alt1"><code class="php comments">// ...</code></div><div class="line number3 index2 alt2">&nbsp;</div><div class="line number4 index3 alt1"><code class="php comments">/**</code></div><div class="line number5 index4 alt2"><code class="php comments">* @ORM\prePersist</code></div><div class="line number6 index5 alt1"><code class="php comments">*/</code></div><div class="line number7 index6 alt2"><code class="php keyword">public</code> <code class="php keyword">function</code> <code class="php plain">preUpload()</code></div><div class="line number8 index7 alt1"><code class="php plain">{</code></div><div class="line number9 index8 alt2"><code class="php spaces">&nbsp;&nbsp;</code><code class="php keyword">if</code> <code class="php plain">(null !== </code><code class="php variable">$this</code><code class="php plain">-&gt;file) {</code></div><div class="line number10 index9 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php comments">// do whatever you want to generate a unique name</code></div><div class="line number11 index10 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php variable">$this</code><code class="php plain">-&gt;logo = uniqid().</code><code class="php string">'.'</code><code class="php plain">.</code><code class="php variable">$this</code><code class="php plain">-&gt;file-&gt;guessExtension();</code></div><div class="line number12 index11 alt1"><code class="php spaces">&nbsp;&nbsp;</code><code class="php plain">}</code></div><div class="line number13 index12 alt2"><code class="php plain">}</code></div><div class="line number14 index13 alt1">&nbsp;</div><div class="line number15 index14 alt2"><code class="php comments">/**</code></div><div class="line number16 index15 alt1"><code class="php comments">* @ORM\postPersist</code></div><div class="line number17 index16 alt2"><code class="php comments">*/</code></div><div class="line number18 index17 alt1"><code class="php keyword">public</code> <code class="php keyword">function</code> <code class="php plain">upload()</code></div><div class="line number19 index18 alt2"><code class="php plain">{</code></div><div class="line number20 index19 alt1"><code class="php spaces">&nbsp;&nbsp;</code><code class="php keyword">if</code> <code class="php plain">(null === </code><code class="php variable">$this</code><code class="php plain">-&gt;file) {</code></div><div class="line number21 index20 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php keyword">return</code><code class="php plain">;</code></div><div class="line number22 index21 alt1"><code class="php spaces">&nbsp;&nbsp;</code><code class="php plain">}</code></div><div class="line number23 index22 alt2">&nbsp;</div><div class="line number24 index23 alt1"><code class="php spaces">&nbsp;&nbsp;</code><code class="php comments">// if there is an error when moving the file, an exception will</code></div><div class="line number25 index24 alt2"><code class="php spaces">&nbsp;&nbsp;</code><code class="php comments">// be automatically thrown by move(). This will properly prevent</code></div><div class="line number26 index25 alt1"><code class="php spaces">&nbsp;&nbsp;</code><code class="php comments">// the entity from being persisted to the database on error</code></div><div class="line number27 index26 alt2"><code class="php spaces">&nbsp;&nbsp;</code><code class="php variable">$this</code><code class="php plain">-&gt;file-&gt;move(</code><code class="php variable">$this</code><code class="php plain">-&gt;getUploadRootDir(), </code><code class="php variable">$this</code><code class="php plain">-&gt;logo);</code></div><div class="line number28 index27 alt1">&nbsp;</div><div class="line number29 index28 alt2"><code class="php spaces">&nbsp;&nbsp;</code><code class="php plain">unset(</code><code class="php variable">$this</code><code class="php plain">-&gt;file);</code></div><div class="line number30 index29 alt1"><code class="php plain">}</code></div><div class="line number31 index30 alt2">&nbsp;</div><div class="line number32 index31 alt1"><code class="php comments">/**</code></div><div class="line number33 index32 alt2"><code class="php comments">* @ORM\postRemove</code></div><div class="line number34 index33 alt1"><code class="php comments">*/</code></div><div class="line number35 index34 alt2"><code class="php keyword">public</code> <code class="php keyword">function</code> <code class="php plain">removeUpload()</code></div><div class="line number36 index35 alt1"><code class="php plain">{</code></div><div class="line number37 index36 alt2"><code class="php spaces">&nbsp;&nbsp;</code><code class="php keyword">if</code> <code class="php plain">(</code><code class="php variable">$file</code> <code class="php plain">= </code><code class="php variable">$this</code><code class="php plain">-&gt;getAbsolutePath()) {</code></div><div class="line number38 index37 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">unlink(</code><code class="php variable">$file</code><code class="php plain">);</code></div><div class="line number39 index38 alt2"><code class="php spaces">&nbsp;&nbsp;</code><code class="php plain">}</code></div><div class="line number40 index39 alt1"><code class="php plain">}</code></div><div class="line number41 index40 alt2">&nbsp;</div><div class="line number42 index41 alt1"><code class="php comments">// ...</code></div></div></td></tr></tbody></table></div></div>
<p>The class now does everything we need: it generates a unique filename before persisting, moves the file after persisting, and removes the file if the entity is ever deleted. Now that the moving of the file is handled atomically by the entity, we should remove the code we added earlier in the controller to handle the the upload:</p>
<div><div id="highlighter_701607" class="syntaxhighlighter  php"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div><div class="line number7 index6 alt2">7</div><div class="line number8 index7 alt1">8</div><div class="line number9 index8 alt2">9</div><div class="line number10 index9 alt1">10</div><div class="line number11 index10 alt2">11</div><div class="line number12 index11 alt1">12</div><div class="line number13 index12 alt2">13</div><div class="line number14 index13 alt1">14</div><div class="line number15 index14 alt2">15</div><div class="line number16 index15 alt1">16</div><div class="line number17 index16 alt2">17</div><div class="line number18 index17 alt1">18</div><div class="line number19 index18 alt2">19</div><div class="line number20 index19 alt1">20</div><div class="line number21 index20 alt2">21</div><div class="line number22 index21 alt1">22</div><div class="line number23 index22 alt2">23</div><div class="line number24 index23 alt1">24</div><div class="line number25 index24 alt2">25</div><div class="line number26 index25 alt1">26</div><div class="line number27 index26 alt2">27</div><div class="line number28 index27 alt1">28</div><div class="line number29 index28 alt2">29</div><div class="line number30 index29 alt1">30</div><div class="line number31 index30 alt2">31</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="php comments">// src/Ens/JobeetBundle/Controller/JobController.php</code></div><div class="line number2 index1 alt1"><code class="php comments">// ...</code></div><div class="line number3 index2 alt2">&nbsp;</div><div class="line number4 index3 alt1"><code class="php keyword">public</code> <code class="php keyword">function</code> <code class="php plain">createAction()</code></div><div class="line number5 index4 alt2"><code class="php plain">{</code></div><div class="line number6 index5 alt1"><code class="php spaces">&nbsp;&nbsp;</code><code class="php variable">$entity</code>&nbsp; <code class="php plain">= </code><code class="php keyword">new</code> <code class="php plain">Job();</code></div><div class="line number7 index6 alt2"><code class="php spaces">&nbsp;&nbsp;</code><code class="php variable">$request</code> <code class="php plain">= </code><code class="php variable">$this</code><code class="php plain">-&gt;getRequest();</code></div><div class="line number8 index7 alt1"><code class="php spaces">&nbsp;&nbsp;</code><code class="php variable">$form</code>&nbsp;&nbsp;&nbsp; <code class="php plain">= </code><code class="php variable">$this</code><code class="php plain">-&gt;createForm(</code><code class="php keyword">new</code> <code class="php plain">JobType(), </code><code class="php variable">$entity</code><code class="php plain">);</code></div><div class="line number9 index8 alt2"><code class="php spaces">&nbsp;&nbsp;</code><code class="php variable">$form</code><code class="php plain">-&gt;bindRequest(</code><code class="php variable">$request</code><code class="php plain">);</code></div><div class="line number10 index9 alt1">&nbsp;</div><div class="line number11 index10 alt2"><code class="php spaces">&nbsp;&nbsp;</code><code class="php keyword">if</code> <code class="php plain">(</code><code class="php variable">$form</code><code class="php plain">-&gt;isValid()) {</code></div><div class="line number12 index11 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php variable">$em</code> <code class="php plain">= </code><code class="php variable">$this</code><code class="php plain">-&gt;getDoctrine()-&gt;getEntityManager();</code></div><div class="line number13 index12 alt2">&nbsp;</div><div class="line number14 index13 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php variable">$em</code><code class="php plain">-&gt;persist(</code><code class="php variable">$entity</code><code class="php plain">);</code></div><div class="line number15 index14 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php variable">$em</code><code class="php plain">-&gt;</code><code class="php functions">flush</code><code class="php plain">();</code></div><div class="line number16 index15 alt1">&nbsp;</div><div class="line number17 index16 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php keyword">return</code> <code class="php variable">$this</code><code class="php plain">-&gt;redirect(</code><code class="php variable">$this</code><code class="php plain">-&gt;generateUrl(</code><code class="php string">'ens_job_show'</code><code class="php plain">, </code><code class="php keyword">array</code><code class="php plain">(</code></div><div class="line number18 index17 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php string">'company'</code> <code class="php plain">=&gt; </code><code class="php variable">$entity</code><code class="php plain">-&gt;getCompanySlug(),</code></div><div class="line number19 index18 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php string">'location'</code> <code class="php plain">=&gt; </code><code class="php variable">$entity</code><code class="php plain">-&gt;getLocationSlug(),</code></div><div class="line number20 index19 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php string">'id'</code> <code class="php plain">=&gt; </code><code class="php variable">$entity</code><code class="php plain">-&gt;getId(),</code></div><div class="line number21 index20 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php string">'position'</code> <code class="php plain">=&gt; </code><code class="php variable">$entity</code><code class="php plain">-&gt;getPositionSlug()</code></div><div class="line number22 index21 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">)));</code></div><div class="line number23 index22 alt2"><code class="php spaces">&nbsp;&nbsp;</code><code class="php plain">}</code></div><div class="line number24 index23 alt1">&nbsp;</div><div class="line number25 index24 alt2"><code class="php spaces">&nbsp;&nbsp;</code><code class="php keyword">return</code> <code class="php variable">$this</code><code class="php plain">-&gt;render(</code><code class="php string">'EnsJobeetBundle:Job:new.html.twig'</code><code class="php plain">, </code><code class="php keyword">array</code><code class="php plain">(</code></div><div class="line number26 index25 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php string">'entity'</code> <code class="php plain">=&gt; </code><code class="php variable">$entity</code><code class="php plain">,</code></div><div class="line number27 index26 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php string">'form'</code>&nbsp;&nbsp; <code class="php plain">=&gt; </code><code class="php variable">$form</code><code class="php plain">-&gt;createView()</code></div><div class="line number28 index27 alt1"><code class="php spaces">&nbsp;&nbsp;</code><code class="php plain">));</code></div><div class="line number29 index28 alt2"><code class="php plain">}</code></div><div class="line number30 index29 alt1">&nbsp;</div><div class="line number31 index30 alt2"><code class="php comments">// ...</code></div></div></td></tr></tbody></table></div></div>
<h2>The Form Template</h2>
<p>Now that the form class has been customized, we need to display it. Open the <code>new.html.twig</code> template and edit it:</p>
<div><div id="highlighter_385952" class="syntaxhighlighter  xml"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div><div class="line number7 index6 alt2">7</div><div class="line number8 index7 alt1">8</div><div class="line number9 index8 alt2">9</div><div class="line number10 index9 alt1">10</div><div class="line number11 index10 alt2">11</div><div class="line number12 index11 alt1">12</div><div class="line number13 index12 alt2">13</div><div class="line number14 index13 alt1">14</div><div class="line number15 index14 alt2">15</div><div class="line number16 index15 alt1">16</div><div class="line number17 index16 alt2">17</div><div class="line number18 index17 alt1">18</div><div class="line number19 index18 alt2">19</div><div class="line number20 index19 alt1">20</div><div class="line number21 index20 alt2">21</div><div class="line number22 index21 alt1">22</div><div class="line number23 index22 alt2">23</div><div class="line number24 index23 alt1">24</div><div class="line number25 index24 alt2">25</div><div class="line number26 index25 alt1">26</div><div class="line number27 index26 alt2">27</div><div class="line number28 index27 alt1">28</div><div class="line number29 index28 alt2">29</div><div class="line number30 index29 alt1">30</div><div class="line number31 index30 alt2">31</div><div class="line number32 index31 alt1">32</div><div class="line number33 index32 alt2">33</div><div class="line number34 index33 alt1">34</div><div class="line number35 index34 alt2">35</div><div class="line number36 index35 alt1">36</div><div class="line number37 index36 alt2">37</div><div class="line number38 index37 alt1">38</div><div class="line number39 index38 alt2">39</div><div class="line number40 index39 alt1">40</div><div class="line number41 index40 alt2">41</div><div class="line number42 index41 alt1">42</div><div class="line number43 index42 alt2">43</div><div class="line number44 index43 alt1">44</div><div class="line number45 index44 alt2">45</div><div class="line number46 index45 alt1">46</div><div class="line number47 index46 alt2">47</div><div class="line number48 index47 alt1">48</div><div class="line number49 index48 alt2">49</div><div class="line number50 index49 alt1">50</div><div class="line number51 index50 alt2">51</div><div class="line number52 index51 alt1">52</div><div class="line number53 index52 alt2">53</div><div class="line number54 index53 alt1">54</div><div class="line number55 index54 alt2">55</div><div class="line number56 index55 alt1">56</div><div class="line number57 index56 alt2">57</div><div class="line number58 index57 alt1">58</div><div class="line number59 index58 alt2">59</div><div class="line number60 index59 alt1">60</div><div class="line number61 index60 alt2">61</div><div class="line number62 index61 alt1">62</div><div class="line number63 index62 alt2">63</div><div class="line number64 index63 alt1">64</div><div class="line number65 index64 alt2">65</div><div class="line number66 index65 alt1">66</div><div class="line number67 index66 alt2">67</div><div class="line number68 index67 alt1">68</div><div class="line number69 index68 alt2">69</div><div class="line number70 index69 alt1">70</div><div class="line number71 index70 alt2">71</div><div class="line number72 index71 alt1">72</div><div class="line number73 index72 alt2">73</div><div class="line number74 index73 alt1">74</div><div class="line number75 index74 alt2">75</div><div class="line number76 index75 alt1">76</div><div class="line number77 index76 alt2">77</div><div class="line number78 index77 alt1">78</div><div class="line number79 index78 alt2">79</div><div class="line number80 index79 alt1">80</div><div class="line number81 index80 alt2">81</div><div class="line number82 index81 alt1">82</div><div class="line number83 index82 alt2">83</div><div class="line number84 index83 alt1">84</div><div class="line number85 index84 alt2">85</div><div class="line number86 index85 alt1">86</div><div class="line number87 index86 alt2">87</div><div class="line number88 index87 alt1">88</div><div class="line number89 index88 alt2">89</div><div class="line number90 index89 alt1">90</div><div class="line number91 index90 alt2">91</div><div class="line number92 index91 alt1">92</div><div class="line number93 index92 alt2">93</div><div class="line number94 index93 alt1">94</div><div class="line number95 index94 alt2">95</div><div class="line number96 index95 alt1">96</div><div class="line number97 index96 alt2">97</div><div class="line number98 index97 alt1">98</div><div class="line number99 index98 alt2">99</div><div class="line number100 index99 alt1">100</div><div class="line number101 index100 alt2">101</div><div class="line number102 index101 alt1">102</div><div class="line number103 index102 alt2">103</div><div class="line number104 index103 alt1">104</div><div class="line number105 index104 alt2">105</div><div class="line number106 index105 alt1">106</div><div class="line number107 index106 alt2">107</div><div class="line number108 index107 alt1">108</div><div class="line number109 index108 alt2">109</div><div class="line number110 index109 alt1">110</div><div class="line number111 index110 alt2">111</div><div class="line number112 index111 alt1">112</div><div class="line number113 index112 alt2">113</div><div class="line number114 index113 alt1">114</div><div class="line number115 index114 alt2">115</div><div class="line number116 index115 alt1">116</div><div class="line number117 index116 alt2">117</div><div class="line number118 index117 alt1">118</div><div class="line number119 index118 alt2">119</div><div class="line number120 index119 alt1">120</div><div class="line number121 index120 alt2">121</div><div class="line number122 index121 alt1">122</div><div class="line number123 index122 alt2">123</div><div class="line number124 index123 alt1">124</div><div class="line number125 index124 alt2">125</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="xml comments">&lt;!-- /src/Ens/JobeetBundle/Resources/views/Job/new.html.twig --&gt;</code></div><div class="line number2 index1 alt1"><code class="xml plain">{% extends 'EnsJobeetBundle::layout.html.twig' %}</code></div><div class="line number3 index2 alt2">&nbsp;</div><div class="line number4 index3 alt1"><code class="xml plain">{% form_theme form _self %}</code></div><div class="line number5 index4 alt2">&nbsp;</div><div class="line number6 index5 alt1"><code class="xml plain">{% block field_errors %}</code></div><div class="line number7 index6 alt2"><code class="xml plain">{% spaceless %}</code></div><div class="line number8 index7 alt1"><code class="xml spaces">&nbsp;&nbsp;</code><code class="xml plain">{% if errors|length &gt; 0 %}</code></div><div class="line number9 index8 alt2"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;</code><code class="xml keyword">ul</code> <code class="xml color1">class</code><code class="xml plain">=</code><code class="xml string">"error_list"</code><code class="xml plain">&gt;</code></div><div class="line number10 index9 alt1"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">{% for error in errors %}</code></div><div class="line number11 index10 alt2"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;</code><code class="xml keyword">li</code><code class="xml plain">&gt;{{ error.messageTemplate|trans(error.messageParameters, 'validators') }}&lt;/</code><code class="xml keyword">li</code><code class="xml plain">&gt;</code></div><div class="line number12 index11 alt1"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">{% endfor %}</code></div><div class="line number13 index12 alt2"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;/</code><code class="xml keyword">ul</code><code class="xml plain">&gt;</code></div><div class="line number14 index13 alt1"><code class="xml spaces">&nbsp;&nbsp;</code><code class="xml plain">{% endif %}</code></div><div class="line number15 index14 alt2"><code class="xml plain">{% endspaceless %}</code></div><div class="line number16 index15 alt1"><code class="xml plain">{% endblock field_errors %}</code></div><div class="line number17 index16 alt2">&nbsp;</div><div class="line number18 index17 alt1"><code class="xml plain">{% block stylesheets %}</code></div><div class="line number19 index18 alt2"><code class="xml spaces">&nbsp;&nbsp;</code><code class="xml plain">{{ parent() }}</code></div><div class="line number20 index19 alt1"><code class="xml spaces">&nbsp;&nbsp;</code><code class="xml plain">&lt;</code><code class="xml keyword">link</code> <code class="xml color1">rel</code><code class="xml plain">=</code><code class="xml string">"stylesheet"</code> <code class="xml color1">href</code><code class="xml plain">=</code><code class="xml string">"{{ asset('bundles/ensjobeet/css/job.css') }}"</code> <code class="xml color1">type</code><code class="xml plain">=</code><code class="xml string">"text/css"</code> <code class="xml color1">media</code><code class="xml plain">=</code><code class="xml string">"all"</code> <code class="xml plain">/&gt;</code></div><div class="line number21 index20 alt2"><code class="xml plain">{% endblock %}</code></div><div class="line number22 index21 alt1">&nbsp;</div><div class="line number23 index22 alt2"><code class="xml plain">{% block content %}</code></div><div class="line number24 index23 alt1"><code class="xml spaces">&nbsp;&nbsp;</code><code class="xml plain">&lt;</code><code class="xml keyword">h1</code><code class="xml plain">&gt;Job creation&lt;/</code><code class="xml keyword">h1</code><code class="xml plain">&gt;</code></div><div class="line number25 index24 alt2"><code class="xml spaces">&nbsp;&nbsp;</code><code class="xml plain">&lt;</code><code class="xml keyword">form</code> <code class="xml color1">action</code><code class="xml plain">=</code><code class="xml string">"{{ path('ens_job_create') }}"</code> <code class="xml color1">method</code><code class="xml plain">=</code><code class="xml string">"post"</code> <code class="xml plain">{{ form_enctype(form) }}&gt;</code></div><div class="line number26 index25 alt1"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;</code><code class="xml keyword">table</code> <code class="xml color1">id</code><code class="xml plain">=</code><code class="xml string">"job_form"</code><code class="xml plain">&gt;</code></div><div class="line number27 index26 alt2"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;</code><code class="xml keyword">tfoot</code><code class="xml plain">&gt;</code></div><div class="line number28 index27 alt1"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;</code><code class="xml keyword">tr</code><code class="xml plain">&gt;</code></div><div class="line number29 index28 alt2"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;</code><code class="xml keyword">td</code> <code class="xml color1">colspan</code><code class="xml plain">=</code><code class="xml string">"2"</code><code class="xml plain">&gt;</code></div><div class="line number30 index29 alt1"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;</code><code class="xml keyword">input</code> <code class="xml color1">type</code><code class="xml plain">=</code><code class="xml string">"submit"</code> <code class="xml color1">value</code><code class="xml plain">=</code><code class="xml string">"Preview your job"</code> <code class="xml plain">/&gt;</code></div><div class="line number31 index30 alt2"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;/</code><code class="xml keyword">td</code><code class="xml plain">&gt;</code></div><div class="line number32 index31 alt1"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;/</code><code class="xml keyword">tr</code><code class="xml plain">&gt;</code></div><div class="line number33 index32 alt2"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;/</code><code class="xml keyword">tfoot</code><code class="xml plain">&gt;</code></div><div class="line number34 index33 alt1"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;</code><code class="xml keyword">tbody</code><code class="xml plain">&gt;</code></div><div class="line number35 index34 alt2"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;</code><code class="xml keyword">tr</code><code class="xml plain">&gt;</code></div><div class="line number36 index35 alt1"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;</code><code class="xml keyword">th</code><code class="xml plain">&gt;{{ form_label(form.category) }}&lt;/</code><code class="xml keyword">th</code><code class="xml plain">&gt;</code></div><div class="line number37 index36 alt2"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;</code><code class="xml keyword">td</code><code class="xml plain">&gt;</code></div><div class="line number38 index37 alt1"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">{{ form_errors(form.category) }}</code></div><div class="line number39 index38 alt2"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">{{ form_widget(form.category) }}</code></div><div class="line number40 index39 alt1"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;/</code><code class="xml keyword">td</code><code class="xml plain">&gt;</code></div><div class="line number41 index40 alt2"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;/</code><code class="xml keyword">tr</code><code class="xml plain">&gt;</code></div><div class="line number42 index41 alt1"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;</code><code class="xml keyword">tr</code><code class="xml plain">&gt;</code></div><div class="line number43 index42 alt2"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;</code><code class="xml keyword">th</code><code class="xml plain">&gt;{{ form_label(form.type) }}&lt;/</code><code class="xml keyword">th</code><code class="xml plain">&gt;</code></div><div class="line number44 index43 alt1"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;</code><code class="xml keyword">td</code><code class="xml plain">&gt;</code></div><div class="line number45 index44 alt2"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">{{ form_errors(form.type) }}</code></div><div class="line number46 index45 alt1"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">{{ form_widget(form.type) }}</code></div><div class="line number47 index46 alt2"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;/</code><code class="xml keyword">td</code><code class="xml plain">&gt;</code></div><div class="line number48 index47 alt1"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;/</code><code class="xml keyword">tr</code><code class="xml plain">&gt;</code></div><div class="line number49 index48 alt2"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;</code><code class="xml keyword">tr</code><code class="xml plain">&gt;</code></div><div class="line number50 index49 alt1"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;</code><code class="xml keyword">th</code><code class="xml plain">&gt;{{ form_label(form.company) }}&lt;/</code><code class="xml keyword">th</code><code class="xml plain">&gt;</code></div><div class="line number51 index50 alt2"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;</code><code class="xml keyword">td</code><code class="xml plain">&gt;</code></div><div class="line number52 index51 alt1"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">{{ form_errors(form.company) }}</code></div><div class="line number53 index52 alt2"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">{{ form_widget(form.company) }}</code></div><div class="line number54 index53 alt1"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;/</code><code class="xml keyword">td</code><code class="xml plain">&gt;</code></div><div class="line number55 index54 alt2"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;/</code><code class="xml keyword">tr</code><code class="xml plain">&gt;</code></div><div class="line number56 index55 alt1"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;</code><code class="xml keyword">tr</code><code class="xml plain">&gt;</code></div><div class="line number57 index56 alt2"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;</code><code class="xml keyword">th</code><code class="xml plain">&gt;{{ form_label(form.file) }}&lt;/</code><code class="xml keyword">th</code><code class="xml plain">&gt;</code></div><div class="line number58 index57 alt1"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;</code><code class="xml keyword">td</code><code class="xml plain">&gt;</code></div><div class="line number59 index58 alt2"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">{{ form_errors(form.file) }}</code></div><div class="line number60 index59 alt1"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">{{ form_widget(form.file) }}</code></div><div class="line number61 index60 alt2"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;/</code><code class="xml keyword">td</code><code class="xml plain">&gt;</code></div><div class="line number62 index61 alt1"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;/</code><code class="xml keyword">tr</code><code class="xml plain">&gt;</code></div><div class="line number63 index62 alt2"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;</code><code class="xml keyword">tr</code><code class="xml plain">&gt;</code></div><div class="line number64 index63 alt1"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;</code><code class="xml keyword">th</code><code class="xml plain">&gt;{{ form_label(form.url) }}&lt;/</code><code class="xml keyword">th</code><code class="xml plain">&gt;</code></div><div class="line number65 index64 alt2"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;</code><code class="xml keyword">td</code><code class="xml plain">&gt;</code></div><div class="line number66 index65 alt1"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">{{ form_errors(form.url) }}</code></div><div class="line number67 index66 alt2"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">{{ form_widget(form.url) }}</code></div><div class="line number68 index67 alt1"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;/</code><code class="xml keyword">td</code><code class="xml plain">&gt;</code></div><div class="line number69 index68 alt2"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;/</code><code class="xml keyword">tr</code><code class="xml plain">&gt;</code></div><div class="line number70 index69 alt1"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;</code><code class="xml keyword">tr</code><code class="xml plain">&gt;</code></div><div class="line number71 index70 alt2"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;</code><code class="xml keyword">th</code><code class="xml plain">&gt;{{ form_label(form.position) }}&lt;/</code><code class="xml keyword">th</code><code class="xml plain">&gt;</code></div><div class="line number72 index71 alt1"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;</code><code class="xml keyword">td</code><code class="xml plain">&gt;</code></div><div class="line number73 index72 alt2"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">{{ form_errors(form.position) }}</code></div><div class="line number74 index73 alt1"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">{{ form_widget(form.position) }}</code></div><div class="line number75 index74 alt2"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;/</code><code class="xml keyword">td</code><code class="xml plain">&gt;</code></div><div class="line number76 index75 alt1"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;/</code><code class="xml keyword">tr</code><code class="xml plain">&gt;</code></div><div class="line number77 index76 alt2"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;</code><code class="xml keyword">tr</code><code class="xml plain">&gt;</code></div><div class="line number78 index77 alt1"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;</code><code class="xml keyword">th</code><code class="xml plain">&gt;{{ form_label(form.location) }}&lt;/</code><code class="xml keyword">th</code><code class="xml plain">&gt;</code></div><div class="line number79 index78 alt2"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;</code><code class="xml keyword">td</code><code class="xml plain">&gt;</code></div><div class="line number80 index79 alt1"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">{{ form_errors(form.location) }}</code></div><div class="line number81 index80 alt2"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">{{ form_widget(form.location) }}</code></div><div class="line number82 index81 alt1"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;/</code><code class="xml keyword">td</code><code class="xml plain">&gt;</code></div><div class="line number83 index82 alt2"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;/</code><code class="xml keyword">tr</code><code class="xml plain">&gt;</code></div><div class="line number84 index83 alt1"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;</code><code class="xml keyword">tr</code><code class="xml plain">&gt;</code></div><div class="line number85 index84 alt2"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;</code><code class="xml keyword">th</code><code class="xml plain">&gt;{{ form_label(form.description) }}&lt;/</code><code class="xml keyword">th</code><code class="xml plain">&gt;</code></div><div class="line number86 index85 alt1"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;</code><code class="xml keyword">td</code><code class="xml plain">&gt;</code></div><div class="line number87 index86 alt2"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">{{ form_errors(form.description) }}</code></div><div class="line number88 index87 alt1"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">{{ form_widget(form.description) }}</code></div><div class="line number89 index88 alt2"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;/</code><code class="xml keyword">td</code><code class="xml plain">&gt;</code></div><div class="line number90 index89 alt1"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;/</code><code class="xml keyword">tr</code><code class="xml plain">&gt;</code></div><div class="line number91 index90 alt2"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;</code><code class="xml keyword">tr</code><code class="xml plain">&gt;</code></div><div class="line number92 index91 alt1"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;</code><code class="xml keyword">th</code><code class="xml plain">&gt;{{ form_label(form.how_to_apply) }}&lt;/</code><code class="xml keyword">th</code><code class="xml plain">&gt;</code></div><div class="line number93 index92 alt2"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;</code><code class="xml keyword">td</code><code class="xml plain">&gt;</code></div><div class="line number94 index93 alt1"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">{{ form_errors(form.how_to_apply) }}</code></div><div class="line number95 index94 alt2"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">{{ form_widget(form.how_to_apply) }}</code></div><div class="line number96 index95 alt1"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;/</code><code class="xml keyword">td</code><code class="xml plain">&gt;</code></div><div class="line number97 index96 alt2"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;/</code><code class="xml keyword">tr</code><code class="xml plain">&gt;</code></div><div class="line number98 index97 alt1"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;</code><code class="xml keyword">tr</code><code class="xml plain">&gt;</code></div><div class="line number99 index98 alt2"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;</code><code class="xml keyword">th</code><code class="xml plain">&gt;{{ form_label(form.token) }}&lt;/</code><code class="xml keyword">th</code><code class="xml plain">&gt;</code></div><div class="line number100 index99 alt1"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;</code><code class="xml keyword">td</code><code class="xml plain">&gt;</code></div><div class="line number101 index100 alt2"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">{{ form_errors(form.token) }}</code></div><div class="line number102 index101 alt1"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">{{ form_widget(form.token) }}</code></div><div class="line number103 index102 alt2"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;/</code><code class="xml keyword">td</code><code class="xml plain">&gt;</code></div><div class="line number104 index103 alt1"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;/</code><code class="xml keyword">tr</code><code class="xml plain">&gt;</code></div><div class="line number105 index104 alt2"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;</code><code class="xml keyword">tr</code><code class="xml plain">&gt;</code></div><div class="line number106 index105 alt1"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;</code><code class="xml keyword">th</code><code class="xml plain">&gt;{{ form_label(form.is_public) }}&lt;/</code><code class="xml keyword">th</code><code class="xml plain">&gt;</code></div><div class="line number107 index106 alt2"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;</code><code class="xml keyword">td</code><code class="xml plain">&gt;</code></div><div class="line number108 index107 alt1"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">{{ form_errors(form.is_public) }}</code></div><div class="line number109 index108 alt2"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">{{ form_widget(form.is_public) }}</code></div><div class="line number110 index109 alt1"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;</code><code class="xml keyword">br</code> <code class="xml plain">/&gt; Whether the job can also be published on affiliate websites or not.</code></div><div class="line number111 index110 alt2"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;/</code><code class="xml keyword">td</code><code class="xml plain">&gt;</code></div><div class="line number112 index111 alt1"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;/</code><code class="xml keyword">tr</code><code class="xml plain">&gt;</code></div><div class="line number113 index112 alt2"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;</code><code class="xml keyword">tr</code><code class="xml plain">&gt;</code></div><div class="line number114 index113 alt1"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;</code><code class="xml keyword">th</code><code class="xml plain">&gt;{{ form_label(form.email) }}&lt;/</code><code class="xml keyword">th</code><code class="xml plain">&gt;</code></div><div class="line number115 index114 alt2"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;</code><code class="xml keyword">td</code><code class="xml plain">&gt;</code></div><div class="line number116 index115 alt1"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">{{ form_errors(form.email) }}</code></div><div class="line number117 index116 alt2"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">{{ form_widget(form.email) }}</code></div><div class="line number118 index117 alt1"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;/</code><code class="xml keyword">td</code><code class="xml plain">&gt;</code></div><div class="line number119 index118 alt2"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;/</code><code class="xml keyword">tr</code><code class="xml plain">&gt;</code></div><div class="line number120 index119 alt1"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;/</code><code class="xml keyword">tbody</code><code class="xml plain">&gt;</code></div><div class="line number121 index120 alt2"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;/</code><code class="xml keyword">table</code><code class="xml plain">&gt;</code></div><div class="line number122 index121 alt1">&nbsp;</div><div class="line number123 index122 alt2"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">{{ form_rest(form) }}</code></div><div class="line number124 index123 alt1"><code class="xml spaces">&nbsp;&nbsp;</code><code class="xml plain">&lt;/</code><code class="xml keyword">form</code><code class="xml plain">&gt;</code></div><div class="line number125 index124 alt2"><code class="xml plain">{% endblock %}</code></div></div></td></tr></tbody></table></div></div>
<p>We could render the form by just using the following line of code, but as we need more customization, we choose to render each form field by hand.</p>
<div><div id="highlighter_28207" class="syntaxhighlighter  php"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="php plain">{{ form_widget(form) }}</code></div></div></td></tr></tbody></table></div></div>
<p>By printing <code>form_widget(form)</code>, each field in the form is rendered, along with a label and error message (if there is one). As easy as this is, it’s not very flexible (yet). Usually, you’ll want to render each form field individually so you can control how the form looks.</p>
<p>We also used a technique named <a href="http://symfony.com/doc/current/book/forms.html#form-theming" onclick="javascript:_gaq.push([&#39;_trackEvent&#39;,&#39;outbound-article&#39;,&#39;http://symfony.com&#39;]);" target="_blank">form theming</a> to <a href="http://symfony.com/doc/current/cookbook/form/form_customization.html#customizing-error-outputhttp://" onclick="javascript:_gaq.push([&#39;_trackEvent&#39;,&#39;outbound-article&#39;,&#39;http://symfony.com&#39;]);" target="_blank">customize how the form errors will be rendered</a>. You can read more about this in the official Symfony2 documentation.</p>
<p>Do the same thing with the <code>edit.html.twig</code> template:</p>
<div><div id="highlighter_304436" class="syntaxhighlighter  xml"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div><div class="line number7 index6 alt2">7</div><div class="line number8 index7 alt1">8</div><div class="line number9 index8 alt2">9</div><div class="line number10 index9 alt1">10</div><div class="line number11 index10 alt2">11</div><div class="line number12 index11 alt1">12</div><div class="line number13 index12 alt2">13</div><div class="line number14 index13 alt1">14</div><div class="line number15 index14 alt2">15</div><div class="line number16 index15 alt1">16</div><div class="line number17 index16 alt2">17</div><div class="line number18 index17 alt1">18</div><div class="line number19 index18 alt2">19</div><div class="line number20 index19 alt1">20</div><div class="line number21 index20 alt2">21</div><div class="line number22 index21 alt1">22</div><div class="line number23 index22 alt2">23</div><div class="line number24 index23 alt1">24</div><div class="line number25 index24 alt2">25</div><div class="line number26 index25 alt1">26</div><div class="line number27 index26 alt2">27</div><div class="line number28 index27 alt1">28</div><div class="line number29 index28 alt2">29</div><div class="line number30 index29 alt1">30</div><div class="line number31 index30 alt2">31</div><div class="line number32 index31 alt1">32</div><div class="line number33 index32 alt2">33</div><div class="line number34 index33 alt1">34</div><div class="line number35 index34 alt2">35</div><div class="line number36 index35 alt1">36</div><div class="line number37 index36 alt2">37</div><div class="line number38 index37 alt1">38</div><div class="line number39 index38 alt2">39</div><div class="line number40 index39 alt1">40</div><div class="line number41 index40 alt2">41</div><div class="line number42 index41 alt1">42</div><div class="line number43 index42 alt2">43</div><div class="line number44 index43 alt1">44</div><div class="line number45 index44 alt2">45</div><div class="line number46 index45 alt1">46</div><div class="line number47 index46 alt2">47</div><div class="line number48 index47 alt1">48</div><div class="line number49 index48 alt2">49</div><div class="line number50 index49 alt1">50</div><div class="line number51 index50 alt2">51</div><div class="line number52 index51 alt1">52</div><div class="line number53 index52 alt2">53</div><div class="line number54 index53 alt1">54</div><div class="line number55 index54 alt2">55</div><div class="line number56 index55 alt1">56</div><div class="line number57 index56 alt2">57</div><div class="line number58 index57 alt1">58</div><div class="line number59 index58 alt2">59</div><div class="line number60 index59 alt1">60</div><div class="line number61 index60 alt2">61</div><div class="line number62 index61 alt1">62</div><div class="line number63 index62 alt2">63</div><div class="line number64 index63 alt1">64</div><div class="line number65 index64 alt2">65</div><div class="line number66 index65 alt1">66</div><div class="line number67 index66 alt2">67</div><div class="line number68 index67 alt1">68</div><div class="line number69 index68 alt2">69</div><div class="line number70 index69 alt1">70</div><div class="line number71 index70 alt2">71</div><div class="line number72 index71 alt1">72</div><div class="line number73 index72 alt2">73</div><div class="line number74 index73 alt1">74</div><div class="line number75 index74 alt2">75</div><div class="line number76 index75 alt1">76</div><div class="line number77 index76 alt2">77</div><div class="line number78 index77 alt1">78</div><div class="line number79 index78 alt2">79</div><div class="line number80 index79 alt1">80</div><div class="line number81 index80 alt2">81</div><div class="line number82 index81 alt1">82</div><div class="line number83 index82 alt2">83</div><div class="line number84 index83 alt1">84</div><div class="line number85 index84 alt2">85</div><div class="line number86 index85 alt1">86</div><div class="line number87 index86 alt2">87</div><div class="line number88 index87 alt1">88</div><div class="line number89 index88 alt2">89</div><div class="line number90 index89 alt1">90</div><div class="line number91 index90 alt2">91</div><div class="line number92 index91 alt1">92</div><div class="line number93 index92 alt2">93</div><div class="line number94 index93 alt1">94</div><div class="line number95 index94 alt2">95</div><div class="line number96 index95 alt1">96</div><div class="line number97 index96 alt2">97</div><div class="line number98 index97 alt1">98</div><div class="line number99 index98 alt2">99</div><div class="line number100 index99 alt1">100</div><div class="line number101 index100 alt2">101</div><div class="line number102 index101 alt1">102</div><div class="line number103 index102 alt2">103</div><div class="line number104 index103 alt1">104</div><div class="line number105 index104 alt2">105</div><div class="line number106 index105 alt1">106</div><div class="line number107 index106 alt2">107</div><div class="line number108 index107 alt1">108</div><div class="line number109 index108 alt2">109</div><div class="line number110 index109 alt1">110</div><div class="line number111 index110 alt2">111</div><div class="line number112 index111 alt1">112</div><div class="line number113 index112 alt2">113</div><div class="line number114 index113 alt1">114</div><div class="line number115 index114 alt2">115</div><div class="line number116 index115 alt1">116</div><div class="line number117 index116 alt2">117</div><div class="line number118 index117 alt1">118</div><div class="line number119 index118 alt2">119</div><div class="line number120 index119 alt1">120</div><div class="line number121 index120 alt2">121</div><div class="line number122 index121 alt1">122</div><div class="line number123 index122 alt2">123</div><div class="line number124 index123 alt1">124</div><div class="line number125 index124 alt2">125</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="xml comments">&lt;!-- /src/Ens/JobeetBundle/Resources/views/Job/edit.html.twig --&gt;</code></div><div class="line number2 index1 alt1"><code class="xml plain">{% extends 'EnsJobeetBundle::layout.html.twig' %}</code></div><div class="line number3 index2 alt2">&nbsp;</div><div class="line number4 index3 alt1"><code class="xml plain">{% form_theme edit_form _self %}</code></div><div class="line number5 index4 alt2">&nbsp;</div><div class="line number6 index5 alt1"><code class="xml plain">{% block field_errors %}</code></div><div class="line number7 index6 alt2"><code class="xml plain">{% spaceless %}</code></div><div class="line number8 index7 alt1"><code class="xml spaces">&nbsp;&nbsp;</code><code class="xml plain">{% if errors|length &gt; 0 %}</code></div><div class="line number9 index8 alt2"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;</code><code class="xml keyword">ul</code><code class="xml plain">&gt;</code></div><div class="line number10 index9 alt1"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">{% for error in errors %}</code></div><div class="line number11 index10 alt2"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;</code><code class="xml keyword">li</code><code class="xml plain">&gt;{{ error.messageTemplate|trans(error.messageParameters, 'validators') }}&lt;/</code><code class="xml keyword">li</code><code class="xml plain">&gt;</code></div><div class="line number12 index11 alt1"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">{% endfor %}</code></div><div class="line number13 index12 alt2"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;/</code><code class="xml keyword">ul</code><code class="xml plain">&gt;</code></div><div class="line number14 index13 alt1"><code class="xml spaces">&nbsp;&nbsp;</code><code class="xml plain">{% endif %}</code></div><div class="line number15 index14 alt2"><code class="xml plain">{% endspaceless %}</code></div><div class="line number16 index15 alt1"><code class="xml plain">{% endblock field_errors %}</code></div><div class="line number17 index16 alt2">&nbsp;</div><div class="line number18 index17 alt1"><code class="xml plain">{% block stylesheets %}</code></div><div class="line number19 index18 alt2"><code class="xml spaces">&nbsp;&nbsp;</code><code class="xml plain">{{ parent() }}</code></div><div class="line number20 index19 alt1"><code class="xml spaces">&nbsp;&nbsp;</code><code class="xml plain">&lt;</code><code class="xml keyword">link</code> <code class="xml color1">rel</code><code class="xml plain">=</code><code class="xml string">"stylesheet"</code> <code class="xml color1">href</code><code class="xml plain">=</code><code class="xml string">"{{ asset('bundles/ensjobeet/css/job.css') }}"</code> <code class="xml color1">type</code><code class="xml plain">=</code><code class="xml string">"text/css"</code> <code class="xml color1">media</code><code class="xml plain">=</code><code class="xml string">"all"</code> <code class="xml plain">/&gt;</code></div><div class="line number21 index20 alt2"><code class="xml plain">{% endblock %}</code></div><div class="line number22 index21 alt1">&nbsp;</div><div class="line number23 index22 alt2"><code class="xml plain">{% block content %}</code></div><div class="line number24 index23 alt1"><code class="xml spaces">&nbsp;&nbsp;</code><code class="xml plain">&lt;</code><code class="xml keyword">h1</code><code class="xml plain">&gt;Job edit&lt;/</code><code class="xml keyword">h1</code><code class="xml plain">&gt;</code></div><div class="line number25 index24 alt2"><code class="xml spaces">&nbsp;&nbsp;</code><code class="xml plain">&lt;</code><code class="xml keyword">form</code> <code class="xml color1">action</code><code class="xml plain">=</code><code class="xml string">"{{ path('ens_job_update', { 'id': entity.id }) }}"</code> <code class="xml color1">method</code><code class="xml plain">=</code><code class="xml string">"post"</code> <code class="xml plain">{{ form_enctype(edit_form) }}&gt;</code></div><div class="line number26 index25 alt1"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;</code><code class="xml keyword">table</code> <code class="xml color1">id</code><code class="xml plain">=</code><code class="xml string">"job_form"</code><code class="xml plain">&gt;</code></div><div class="line number27 index26 alt2"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;</code><code class="xml keyword">tfoot</code><code class="xml plain">&gt;</code></div><div class="line number28 index27 alt1"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;</code><code class="xml keyword">tr</code><code class="xml plain">&gt;</code></div><div class="line number29 index28 alt2"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;</code><code class="xml keyword">td</code> <code class="xml color1">colspan</code><code class="xml plain">=</code><code class="xml string">"2"</code><code class="xml plain">&gt;</code></div><div class="line number30 index29 alt1"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;</code><code class="xml keyword">input</code> <code class="xml color1">type</code><code class="xml plain">=</code><code class="xml string">"submit"</code> <code class="xml color1">value</code><code class="xml plain">=</code><code class="xml string">"Preview your job"</code> <code class="xml plain">/&gt;</code></div><div class="line number31 index30 alt2"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;/</code><code class="xml keyword">td</code><code class="xml plain">&gt;</code></div><div class="line number32 index31 alt1"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;/</code><code class="xml keyword">tr</code><code class="xml plain">&gt;</code></div><div class="line number33 index32 alt2"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;/</code><code class="xml keyword">tfoot</code><code class="xml plain">&gt;</code></div><div class="line number34 index33 alt1"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;</code><code class="xml keyword">tbody</code><code class="xml plain">&gt;</code></div><div class="line number35 index34 alt2"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;</code><code class="xml keyword">tr</code><code class="xml plain">&gt;</code></div><div class="line number36 index35 alt1"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;</code><code class="xml keyword">th</code><code class="xml plain">&gt;{{ form_label(edit_form.category) }}&lt;/</code><code class="xml keyword">th</code><code class="xml plain">&gt;</code></div><div class="line number37 index36 alt2"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;</code><code class="xml keyword">td</code><code class="xml plain">&gt;</code></div><div class="line number38 index37 alt1"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">{{ form_errors(edit_form.category) }}</code></div><div class="line number39 index38 alt2"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">{{ form_widget(edit_form.category) }}</code></div><div class="line number40 index39 alt1"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;/</code><code class="xml keyword">td</code><code class="xml plain">&gt;</code></div><div class="line number41 index40 alt2"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;/</code><code class="xml keyword">tr</code><code class="xml plain">&gt;</code></div><div class="line number42 index41 alt1"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;</code><code class="xml keyword">tr</code><code class="xml plain">&gt;</code></div><div class="line number43 index42 alt2"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;</code><code class="xml keyword">th</code><code class="xml plain">&gt;{{ form_label(edit_form.type) }}&lt;/</code><code class="xml keyword">th</code><code class="xml plain">&gt;</code></div><div class="line number44 index43 alt1"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;</code><code class="xml keyword">td</code><code class="xml plain">&gt;</code></div><div class="line number45 index44 alt2"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">{{ form_errors(edit_form.type) }}</code></div><div class="line number46 index45 alt1"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">{{ form_widget(edit_form.type) }}</code></div><div class="line number47 index46 alt2"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;/</code><code class="xml keyword">td</code><code class="xml plain">&gt;</code></div><div class="line number48 index47 alt1"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;/</code><code class="xml keyword">tr</code><code class="xml plain">&gt;</code></div><div class="line number49 index48 alt2"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;</code><code class="xml keyword">tr</code><code class="xml plain">&gt;</code></div><div class="line number50 index49 alt1"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;</code><code class="xml keyword">th</code><code class="xml plain">&gt;{{ form_label(edit_form.company) }}&lt;/</code><code class="xml keyword">th</code><code class="xml plain">&gt;</code></div><div class="line number51 index50 alt2"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;</code><code class="xml keyword">td</code><code class="xml plain">&gt;</code></div><div class="line number52 index51 alt1"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">{{ form_errors(edit_form.company) }}</code></div><div class="line number53 index52 alt2"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">{{ form_widget(edit_form.company) }}</code></div><div class="line number54 index53 alt1"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;/</code><code class="xml keyword">td</code><code class="xml plain">&gt;</code></div><div class="line number55 index54 alt2"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;/</code><code class="xml keyword">tr</code><code class="xml plain">&gt;</code></div><div class="line number56 index55 alt1"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;</code><code class="xml keyword">tr</code><code class="xml plain">&gt;</code></div><div class="line number57 index56 alt2"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;</code><code class="xml keyword">th</code><code class="xml plain">&gt;{{ form_label(edit_form.file) }}&lt;/</code><code class="xml keyword">th</code><code class="xml plain">&gt;</code></div><div class="line number58 index57 alt1"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;</code><code class="xml keyword">td</code><code class="xml plain">&gt;</code></div><div class="line number59 index58 alt2"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">{{ form_errors(edit_form.file) }}</code></div><div class="line number60 index59 alt1"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">{{ form_widget(edit_form.file) }}</code></div><div class="line number61 index60 alt2"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;/</code><code class="xml keyword">td</code><code class="xml plain">&gt;</code></div><div class="line number62 index61 alt1"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;/</code><code class="xml keyword">tr</code><code class="xml plain">&gt;</code></div><div class="line number63 index62 alt2"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;</code><code class="xml keyword">tr</code><code class="xml plain">&gt;</code></div><div class="line number64 index63 alt1"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;</code><code class="xml keyword">th</code><code class="xml plain">&gt;{{ form_label(edit_form.url) }}&lt;/</code><code class="xml keyword">th</code><code class="xml plain">&gt;</code></div><div class="line number65 index64 alt2"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;</code><code class="xml keyword">td</code><code class="xml plain">&gt;</code></div><div class="line number66 index65 alt1"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">{{ form_errors(edit_form.url) }}</code></div><div class="line number67 index66 alt2"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">{{ form_widget(edit_form.url) }}</code></div><div class="line number68 index67 alt1"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;/</code><code class="xml keyword">td</code><code class="xml plain">&gt;</code></div><div class="line number69 index68 alt2"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;/</code><code class="xml keyword">tr</code><code class="xml plain">&gt;</code></div><div class="line number70 index69 alt1"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;</code><code class="xml keyword">tr</code><code class="xml plain">&gt;</code></div><div class="line number71 index70 alt2"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;</code><code class="xml keyword">th</code><code class="xml plain">&gt;{{ form_label(edit_form.position) }}&lt;/</code><code class="xml keyword">th</code><code class="xml plain">&gt;</code></div><div class="line number72 index71 alt1"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;</code><code class="xml keyword">td</code><code class="xml plain">&gt;</code></div><div class="line number73 index72 alt2"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">{{ form_errors(edit_form.position) }}</code></div><div class="line number74 index73 alt1"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">{{ form_widget(edit_form.position) }}</code></div><div class="line number75 index74 alt2"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;/</code><code class="xml keyword">td</code><code class="xml plain">&gt;</code></div><div class="line number76 index75 alt1"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;/</code><code class="xml keyword">tr</code><code class="xml plain">&gt;</code></div><div class="line number77 index76 alt2"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;</code><code class="xml keyword">tr</code><code class="xml plain">&gt;</code></div><div class="line number78 index77 alt1"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;</code><code class="xml keyword">th</code><code class="xml plain">&gt;{{ form_label(edit_form.location) }}&lt;/</code><code class="xml keyword">th</code><code class="xml plain">&gt;</code></div><div class="line number79 index78 alt2"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;</code><code class="xml keyword">td</code><code class="xml plain">&gt;</code></div><div class="line number80 index79 alt1"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">{{ form_errors(edit_form.location) }}</code></div><div class="line number81 index80 alt2"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">{{ form_widget(edit_form.location) }}</code></div><div class="line number82 index81 alt1"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;/</code><code class="xml keyword">td</code><code class="xml plain">&gt;</code></div><div class="line number83 index82 alt2"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;/</code><code class="xml keyword">tr</code><code class="xml plain">&gt;</code></div><div class="line number84 index83 alt1"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;</code><code class="xml keyword">tr</code><code class="xml plain">&gt;</code></div><div class="line number85 index84 alt2"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;</code><code class="xml keyword">th</code><code class="xml plain">&gt;{{ form_label(edit_form.description) }}&lt;/</code><code class="xml keyword">th</code><code class="xml plain">&gt;</code></div><div class="line number86 index85 alt1"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;</code><code class="xml keyword">td</code><code class="xml plain">&gt;</code></div><div class="line number87 index86 alt2"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">{{ form_errors(edit_form.description) }}</code></div><div class="line number88 index87 alt1"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">{{ form_widget(edit_form.description) }}</code></div><div class="line number89 index88 alt2"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;/</code><code class="xml keyword">td</code><code class="xml plain">&gt;</code></div><div class="line number90 index89 alt1"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;/</code><code class="xml keyword">tr</code><code class="xml plain">&gt;</code></div><div class="line number91 index90 alt2"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;</code><code class="xml keyword">tr</code><code class="xml plain">&gt;</code></div><div class="line number92 index91 alt1"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;</code><code class="xml keyword">th</code><code class="xml plain">&gt;{{ form_label(edit_form.how_to_apply) }}&lt;/</code><code class="xml keyword">th</code><code class="xml plain">&gt;</code></div><div class="line number93 index92 alt2"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;</code><code class="xml keyword">td</code><code class="xml plain">&gt;</code></div><div class="line number94 index93 alt1"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">{{ form_errors(edit_form.how_to_apply) }}</code></div><div class="line number95 index94 alt2"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">{{ form_widget(edit_form.how_to_apply) }}</code></div><div class="line number96 index95 alt1"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;/</code><code class="xml keyword">td</code><code class="xml plain">&gt;</code></div><div class="line number97 index96 alt2"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;/</code><code class="xml keyword">tr</code><code class="xml plain">&gt;</code></div><div class="line number98 index97 alt1"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;</code><code class="xml keyword">tr</code><code class="xml plain">&gt;</code></div><div class="line number99 index98 alt2"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;</code><code class="xml keyword">th</code><code class="xml plain">&gt;{{ form_label(edit_form.token) }}&lt;/</code><code class="xml keyword">th</code><code class="xml plain">&gt;</code></div><div class="line number100 index99 alt1"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;</code><code class="xml keyword">td</code><code class="xml plain">&gt;</code></div><div class="line number101 index100 alt2"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">{{ form_errors(edit_form.token) }}</code></div><div class="line number102 index101 alt1"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">{{ form_widget(edit_form.token) }}</code></div><div class="line number103 index102 alt2"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;/</code><code class="xml keyword">td</code><code class="xml plain">&gt;</code></div><div class="line number104 index103 alt1"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;/</code><code class="xml keyword">tr</code><code class="xml plain">&gt;</code></div><div class="line number105 index104 alt2"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;</code><code class="xml keyword">tr</code><code class="xml plain">&gt;</code></div><div class="line number106 index105 alt1"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;</code><code class="xml keyword">th</code><code class="xml plain">&gt;{{ form_label(edit_form.is_public) }}&lt;/</code><code class="xml keyword">th</code><code class="xml plain">&gt;</code></div><div class="line number107 index106 alt2"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;</code><code class="xml keyword">td</code><code class="xml plain">&gt;</code></div><div class="line number108 index107 alt1"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">{{ form_errors(edit_form.is_public) }}</code></div><div class="line number109 index108 alt2"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">{{ form_widget(edit_form.is_public) }}</code></div><div class="line number110 index109 alt1"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;</code><code class="xml keyword">br</code> <code class="xml plain">/&gt; Whether the job can also be published on affiliate websites or not.</code></div><div class="line number111 index110 alt2"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;/</code><code class="xml keyword">td</code><code class="xml plain">&gt;</code></div><div class="line number112 index111 alt1"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;/</code><code class="xml keyword">tr</code><code class="xml plain">&gt;</code></div><div class="line number113 index112 alt2"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;</code><code class="xml keyword">tr</code><code class="xml plain">&gt;</code></div><div class="line number114 index113 alt1"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;</code><code class="xml keyword">th</code><code class="xml plain">&gt;{{ form_label(edit_form.email) }}&lt;/</code><code class="xml keyword">th</code><code class="xml plain">&gt;</code></div><div class="line number115 index114 alt2"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;</code><code class="xml keyword">td</code><code class="xml plain">&gt;</code></div><div class="line number116 index115 alt1"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">{{ form_errors(edit_form.email) }}</code></div><div class="line number117 index116 alt2"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">{{ form_widget(edit_form.email) }}</code></div><div class="line number118 index117 alt1"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;/</code><code class="xml keyword">td</code><code class="xml plain">&gt;</code></div><div class="line number119 index118 alt2"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;/</code><code class="xml keyword">tr</code><code class="xml plain">&gt;</code></div><div class="line number120 index119 alt1"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;/</code><code class="xml keyword">tbody</code><code class="xml plain">&gt;</code></div><div class="line number121 index120 alt2"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;/</code><code class="xml keyword">table</code><code class="xml plain">&gt;</code></div><div class="line number122 index121 alt1">&nbsp;</div><div class="line number123 index122 alt2"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">{{ form_rest(edit_form) }}</code></div><div class="line number124 index123 alt1"><code class="xml spaces">&nbsp;&nbsp;</code><code class="xml plain">&lt;/</code><code class="xml keyword">form</code><code class="xml plain">&gt;</code></div><div class="line number125 index124 alt2"><code class="xml plain">{% endblock %}</code></div></div></td></tr></tbody></table></div></div>
<h2>The Form Action</h2>
<p>We now have a form class and a template that renders it. Now, it’s time to actually make it work with some actions. The job form is managed by four methods in the <code>JobController</code>:</p>
<ul>
<li><strong>newAction</strong>: Displays a blank form to create a new job</li>
<li><strong>createAction</strong>: Processes the form (validation, form repopulation) and creates a new job with the user submitted values</li>
<li><strong>editAction</strong>: Displays a form to edit an existing job</li>
<li><strong>updateAction</strong>: Processes the form (validation, form repopulation) and updates an existing job with the user submitted values</li>
</ul>
<p>When you browse to the <code>/job/new</code> page, a form instance for a new job object is created by calling the <code>createForm</code> method and passed to the template (<code>newAction</code>).</p>
<p>When the user submits the form (<code>createAction</code>), the form is bound (<code>bindRequest()</code> method) with the user submitted values and the validation is triggered.</p>
<p>Once the form is bound, it is possible to check its validity using the <code>isValid()</code> method: If the form is valid (returns <code>true</code>), the job is saved to the database (<code>$em-&gt;persist($entity)</code>), and the user is redirected to the job preview page; if not, the <code>new.html.twig</code> template is displayed again with the user submitted values and the associated error messages.</p>
<p>The modification of an existing job is quite similar. The only difference between the <code>new</code> and the <code>edit</code> action is that the job object to be modified is passed as the second argument of the <code>createForm</code> method. This object will be used for default widget values in the template.</p>
<p>You can also define default values for the creation form. For this we will pass a pre-modified <code>Job</code> object to the <code>createForm</code> method to set the <code>type</code> default value to <code>full-time</code>:</p>
<div><div id="highlighter_736124" class="syntaxhighlighter  php"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div><div class="line number7 index6 alt2">7</div><div class="line number8 index7 alt1">8</div><div class="line number9 index8 alt2">9</div><div class="line number10 index9 alt1">10</div><div class="line number11 index10 alt2">11</div><div class="line number12 index11 alt1">12</div><div class="line number13 index12 alt2">13</div><div class="line number14 index13 alt1">14</div><div class="line number15 index14 alt2">15</div><div class="line number16 index15 alt1">16</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="php comments">// src/Ens/JobeetBundle/Controller/JobController.php</code></div><div class="line number2 index1 alt1"><code class="php comments">// ...</code></div><div class="line number3 index2 alt2">&nbsp;</div><div class="line number4 index3 alt1"><code class="php keyword">public</code> <code class="php keyword">function</code> <code class="php plain">newAction()</code></div><div class="line number5 index4 alt2"><code class="php plain">{</code></div><div class="line number6 index5 alt1"><code class="php spaces">&nbsp;&nbsp;</code><code class="php variable">$entity</code> <code class="php plain">= </code><code class="php keyword">new</code> <code class="php plain">Job();</code></div><div class="line number7 index6 alt2"><code class="php spaces">&nbsp;&nbsp;</code><code class="php variable">$entity</code><code class="php plain">-&gt;setType(</code><code class="php string">'full-time'</code><code class="php plain">);</code></div><div class="line number8 index7 alt1"><code class="php spaces">&nbsp;&nbsp;</code><code class="php variable">$form</code>&nbsp;&nbsp; <code class="php plain">= </code><code class="php variable">$this</code><code class="php plain">-&gt;createForm(</code><code class="php keyword">new</code> <code class="php plain">JobType(), </code><code class="php variable">$entity</code><code class="php plain">);</code></div><div class="line number9 index8 alt2">&nbsp;</div><div class="line number10 index9 alt1"><code class="php spaces">&nbsp;&nbsp;</code><code class="php keyword">return</code> <code class="php variable">$this</code><code class="php plain">-&gt;render(</code><code class="php string">'EnsJobeetBundle:Job:new.html.twig'</code><code class="php plain">, </code><code class="php keyword">array</code><code class="php plain">(</code></div><div class="line number11 index10 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php string">'entity'</code> <code class="php plain">=&gt; </code><code class="php variable">$entity</code><code class="php plain">,</code></div><div class="line number12 index11 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php string">'form'</code>&nbsp;&nbsp; <code class="php plain">=&gt; </code><code class="php variable">$form</code><code class="php plain">-&gt;createView()</code></div><div class="line number13 index12 alt2"><code class="php spaces">&nbsp;&nbsp;</code><code class="php plain">));</code></div><div class="line number14 index13 alt1"><code class="php plain">}</code></div><div class="line number15 index14 alt2">&nbsp;</div><div class="line number16 index15 alt1"><code class="php comments">// ...</code></div></div></td></tr></tbody></table></div></div>
<h3>Protecting the Job Form with a Token</h3>
<p>Everything must work fine by now. As of now, the user must enter the token for the job. But the job token must be generated automatically when a new job is created, as we don’t want to rely on the user to provide a unique token. Create a new <code>setTokenValue()</code> method of the <code>Job</code> entity to add the logic that generates the token before a new job is saved:</p>
<div><div id="highlighter_768710" class="syntaxhighlighter  php"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div><div class="line number7 index6 alt2">7</div><div class="line number8 index7 alt1">8</div><div class="line number9 index8 alt2">9</div><div class="line number10 index9 alt1">10</div><div class="line number11 index10 alt2">11</div><div class="line number12 index11 alt1">12</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="php comments">// src/Ens/JobeetBundle/Entity/Job.php</code></div><div class="line number2 index1 alt1"><code class="php comments">// ...</code></div><div class="line number3 index2 alt2">&nbsp;</div><div class="line number4 index3 alt1"><code class="php keyword">public</code> <code class="php keyword">function</code> <code class="php plain">setTokenValue()</code></div><div class="line number5 index4 alt2"><code class="php plain">{</code></div><div class="line number6 index5 alt1"><code class="php spaces">&nbsp;&nbsp;</code><code class="php keyword">if</code><code class="php plain">(!</code><code class="php variable">$this</code><code class="php plain">-&gt;getToken())</code></div><div class="line number7 index6 alt2"><code class="php spaces">&nbsp;&nbsp;</code><code class="php plain">{</code></div><div class="line number8 index7 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php variable">$this</code><code class="php plain">-&gt;token = sha1(</code><code class="php variable">$this</code><code class="php plain">-&gt;getEmail().rand(11111, 99999));</code></div><div class="line number9 index8 alt2"><code class="php spaces">&nbsp;&nbsp;</code><code class="php plain">}</code></div><div class="line number10 index9 alt1"><code class="php plain">}</code></div><div class="line number11 index10 alt2">&nbsp;</div><div class="line number12 index11 alt1"><code class="php comments">// ...</code></div></div></td></tr></tbody></table></div></div>
<p>Add this method to the <code>prePersist</code> <code>lifecycleCallbacks</code> for the <code>Job</code> entity:</p>
<div><div id="highlighter_555344" class="syntaxhighlighter  plain"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="plain plain"># src/End/JobeetBundle/Resources/config/doctrine/Job.orm.yml</code></div><div class="line number2 index1 alt1"><code class="plain plain"># ...</code></div><div class="line number3 index2 alt2">&nbsp;</div><div class="line number4 index3 alt1"><code class="plain spaces">&nbsp;&nbsp;</code><code class="plain plain">lifecycleCallbacks:</code></div><div class="line number5 index4 alt2"><code class="plain spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain plain">prePersist: [ setTokenValue, preUpload, setCreatedAtValue, setExpiresAtValue ]</code></div><div class="line number6 index5 alt1"><code class="plain spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain plain"># ...</code></div></div></td></tr></tbody></table></div></div>
<p>Regenerate the doctrine entities to apply this modification:</p>
<div><div id="highlighter_159928" class="syntaxhighlighter nogutter  plain"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="plain plain">php app/console doctrine:generate:entities EnsJobeetBundle</code></div></div></td></tr></tbody></table></div></div>
<p>You can now remove the <code>token</code> field from the form:</p>
<div><div id="highlighter_89453" class="syntaxhighlighter  php"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div><div class="line number7 index6 alt2">7</div><div class="line number8 index7 alt1">8</div><div class="line number9 index8 alt2">9</div><div class="line number10 index9 alt1">10</div><div class="line number11 index10 alt2">11</div><div class="line number12 index11 alt1">12</div><div class="line number13 index12 alt2">13</div><div class="line number14 index13 alt1">14</div><div class="line number15 index14 alt2">15</div><div class="line number16 index15 alt1">16</div><div class="line number17 index16 alt2">17</div><div class="line number18 index17 alt1">18</div><div class="line number19 index18 alt2">19</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="php comments">// src/Ens/JobeetBundle/Form/JobType.php</code></div><div class="line number2 index1 alt1"><code class="php comments">// ...</code></div><div class="line number3 index2 alt2">&nbsp;</div><div class="line number4 index3 alt1"><code class="php keyword">public</code> <code class="php keyword">function</code> <code class="php plain">buildForm(FormBuilder </code><code class="php variable">$builder</code><code class="php plain">, </code><code class="php keyword">array</code> <code class="php variable">$options</code><code class="php plain">)</code></div><div class="line number5 index4 alt2"><code class="php plain">{</code></div><div class="line number6 index5 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php variable">$builder</code><code class="php plain">-&gt;add(</code><code class="php string">'category'</code><code class="php plain">);</code></div><div class="line number7 index6 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php variable">$builder</code><code class="php plain">-&gt;add(</code><code class="php string">'type'</code><code class="php plain">, </code><code class="php string">'choice'</code><code class="php plain">, </code><code class="php keyword">array</code><code class="php plain">(</code><code class="php string">'choices'</code> <code class="php plain">=&gt; Job::getTypes(), </code><code class="php string">'expanded'</code> <code class="php plain">=&gt; true));</code></div><div class="line number8 index7 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php variable">$builder</code><code class="php plain">-&gt;add(</code><code class="php string">'company'</code><code class="php plain">);</code></div><div class="line number9 index8 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php variable">$builder</code><code class="php plain">-&gt;add(</code><code class="php string">'file'</code><code class="php plain">, </code><code class="php string">'file'</code><code class="php plain">, </code><code class="php keyword">array</code><code class="php plain">(</code><code class="php string">'label'</code> <code class="php plain">=&gt; </code><code class="php string">'Company logo'</code><code class="php plain">, </code><code class="php string">'required'</code> <code class="php plain">=&gt; false));</code></div><div class="line number10 index9 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php variable">$builder</code><code class="php plain">-&gt;add(</code><code class="php string">'url'</code><code class="php plain">);</code></div><div class="line number11 index10 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php variable">$builder</code><code class="php plain">-&gt;add(</code><code class="php string">'position'</code><code class="php plain">);</code></div><div class="line number12 index11 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php variable">$builder</code><code class="php plain">-&gt;add(</code><code class="php string">'location'</code><code class="php plain">);</code></div><div class="line number13 index12 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php variable">$builder</code><code class="php plain">-&gt;add(</code><code class="php string">'description'</code><code class="php plain">);</code></div><div class="line number14 index13 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php variable">$builder</code><code class="php plain">-&gt;add(</code><code class="php string">'how_to_apply'</code><code class="php plain">, null, </code><code class="php keyword">array</code><code class="php plain">(</code><code class="php string">'label'</code> <code class="php plain">=&gt; </code><code class="php string">'How to apply?'</code><code class="php plain">));</code></div><div class="line number15 index14 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php variable">$builder</code><code class="php plain">-&gt;add(</code><code class="php string">'is_public'</code><code class="php plain">, null, </code><code class="php keyword">array</code><code class="php plain">(</code><code class="php string">'label'</code> <code class="php plain">=&gt; </code><code class="php string">'Public?'</code><code class="php plain">));</code></div><div class="line number16 index15 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php variable">$builder</code><code class="php plain">-&gt;add(</code><code class="php string">'email'</code><code class="php plain">);</code></div><div class="line number17 index16 alt2"><code class="php plain">}</code></div><div class="line number18 index17 alt1">&nbsp;</div><div class="line number19 index18 alt2"><code class="php comments">// ...</code></div></div></td></tr></tbody></table></div></div>
<p>Remove it from the <code>new.html.twig</code> and <code>edit.html.twig</code> templates also:</p>
<div><div id="highlighter_673582" class="syntaxhighlighter  xml"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div><div class="line number7 index6 alt2">7</div><div class="line number8 index7 alt1">8</div><div class="line number9 index8 alt2">9</div><div class="line number10 index9 alt1">10</div><div class="line number11 index10 alt2">11</div><div class="line number12 index11 alt1">12</div><div class="line number13 index12 alt2">13</div><div class="line number14 index13 alt1">14</div><div class="line number15 index14 alt2">15</div><div class="line number16 index15 alt1">16</div><div class="line number17 index16 alt2">17</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="xml comments">&lt;!-- src/Ens/JobeetBundle/Resources/views/Job/new.html/twig --&gt;</code></div><div class="line number2 index1 alt1"><code class="xml plain">&lt;</code><code class="xml keyword">tr</code><code class="xml plain">&gt;</code></div><div class="line number3 index2 alt2"><code class="xml spaces">&nbsp;&nbsp;</code><code class="xml plain">&lt;</code><code class="xml keyword">th</code><code class="xml plain">&gt;{{ form_label(form.token) }}&lt;/</code><code class="xml keyword">th</code><code class="xml plain">&gt;</code></div><div class="line number4 index3 alt1"><code class="xml spaces">&nbsp;&nbsp;</code><code class="xml plain">&lt;</code><code class="xml keyword">td</code><code class="xml plain">&gt;</code></div><div class="line number5 index4 alt2"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">{{ form_errors(form.token) }}</code></div><div class="line number6 index5 alt1"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">{{ form_widget(form.token) }}</code></div><div class="line number7 index6 alt2"><code class="xml spaces">&nbsp;&nbsp;</code><code class="xml plain">&lt;/</code><code class="xml keyword">td</code><code class="xml plain">&gt;</code></div><div class="line number8 index7 alt1"><code class="xml plain">&lt;/</code><code class="xml keyword">tr</code><code class="xml plain">&gt;</code></div><div class="line number9 index8 alt2">&nbsp;</div><div class="line number10 index9 alt1"><code class="xml comments">&lt;!-- src/Ens/JobeetBundle/Resources/views/Job/edit.html/twig --&gt;</code></div><div class="line number11 index10 alt2"><code class="xml plain">&lt;</code><code class="xml keyword">tr</code><code class="xml plain">&gt;</code></div><div class="line number12 index11 alt1"><code class="xml spaces">&nbsp;&nbsp;</code><code class="xml plain">&lt;</code><code class="xml keyword">th</code><code class="xml plain">&gt;{{ form_label(edit_form.token) }}&lt;/</code><code class="xml keyword">th</code><code class="xml plain">&gt;</code></div><div class="line number13 index12 alt2"><code class="xml spaces">&nbsp;&nbsp;</code><code class="xml plain">&lt;</code><code class="xml keyword">td</code><code class="xml plain">&gt;</code></div><div class="line number14 index13 alt1"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">{{ form_errors(edit_form.token) }}</code></div><div class="line number15 index14 alt2"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">{{ form_widget(edit_form.token) }}</code></div><div class="line number16 index15 alt1"><code class="xml spaces">&nbsp;&nbsp;</code><code class="xml plain">&lt;/</code><code class="xml keyword">td</code><code class="xml plain">&gt;</code></div><div class="line number17 index16 alt2"><code class="xml plain">&lt;/</code><code class="xml keyword">tr</code><code class="xml plain">&gt;</code></div></div></td></tr></tbody></table></div></div>
<p>And from the <code>validation.yml</code> file:</p>
<div><div id="highlighter_88603" class="syntaxhighlighter  plain"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="plain plain">token:</code></div><div class="line number2 index1 alt1"><code class="plain spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain plain">- NotBlank: ~</code></div></div></td></tr></tbody></table></div></div>
<p>If you remember the user stories from day 2, a job can be edited only if the user knows the associated token. Right now, it is pretty easy to edit or delete any job, just by guessing the URL. That’s because the edit URL is like <code>/job/ID/edit</code>, where <code>ID</code> is the primary key of the job.</p>
<p>Let’s change the routes so you can edit or delete a job only if you now the secret token:</p>
<div><div id="highlighter_39094" class="syntaxhighlighter  plain"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div><div class="line number7 index6 alt2">7</div><div class="line number8 index7 alt1">8</div><div class="line number9 index8 alt2">9</div><div class="line number10 index9 alt1">10</div><div class="line number11 index10 alt2">11</div><div class="line number12 index11 alt1">12</div><div class="line number13 index12 alt2">13</div><div class="line number14 index13 alt1">14</div><div class="line number15 index14 alt2">15</div><div class="line number16 index15 alt1">16</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="plain plain"># src/End/JobeetBundle/Resources/config/routing/job.yml</code></div><div class="line number2 index1 alt1"><code class="plain plain"># ...</code></div><div class="line number3 index2 alt2">&nbsp;</div><div class="line number4 index3 alt1"><code class="plain plain">ens_job_edit:</code></div><div class="line number5 index4 alt2"><code class="plain spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain plain">pattern:&nbsp; /{token}/edit</code></div><div class="line number6 index5 alt1"><code class="plain spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain plain">defaults: { _controller: "EnsJobeetBundle:Job:edit" }</code></div><div class="line number7 index6 alt2">&nbsp;</div><div class="line number8 index7 alt1"><code class="plain plain">ens_job_update:</code></div><div class="line number9 index8 alt2"><code class="plain spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain plain">pattern:&nbsp; /{token}/update</code></div><div class="line number10 index9 alt1"><code class="plain spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain plain">defaults: { _controller: "EnsJobeetBundle:Job:update" }</code></div><div class="line number11 index10 alt2"><code class="plain spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain plain">requirements: { _method: post }</code></div><div class="line number12 index11 alt1">&nbsp;</div><div class="line number13 index12 alt2"><code class="plain plain">ens_job_delete:</code></div><div class="line number14 index13 alt1"><code class="plain spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain plain">pattern:&nbsp; /{token}/delete</code></div><div class="line number15 index14 alt2"><code class="plain spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain plain">defaults: { _controller: "EnsJobeetBundle:Job:delete" }</code></div><div class="line number16 index15 alt1"><code class="plain spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain plain">requirements: { _method: post }</code></div></div></td></tr></tbody></table></div></div>
<p>Now edit the JobController to use the token instead of the id:</p>
<div><div id="highlighter_232034" class="syntaxhighlighter  php"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div><div class="line number7 index6 alt2">7</div><div class="line number8 index7 alt1">8</div><div class="line number9 index8 alt2">9</div><div class="line number10 index9 alt1">10</div><div class="line number11 index10 alt2">11</div><div class="line number12 index11 alt1">12</div><div class="line number13 index12 alt2">13</div><div class="line number14 index13 alt1">14</div><div class="line number15 index14 alt2">15</div><div class="line number16 index15 alt1">16</div><div class="line number17 index16 alt2">17</div><div class="line number18 index17 alt1">18</div><div class="line number19 index18 alt2">19</div><div class="line number20 index19 alt1">20</div><div class="line number21 index20 alt2">21</div><div class="line number22 index21 alt1">22</div><div class="line number23 index22 alt2">23</div><div class="line number24 index23 alt1">24</div><div class="line number25 index24 alt2">25</div><div class="line number26 index25 alt1">26</div><div class="line number27 index26 alt2">27</div><div class="line number28 index27 alt1">28</div><div class="line number29 index28 alt2">29</div><div class="line number30 index29 alt1">30</div><div class="line number31 index30 alt2">31</div><div class="line number32 index31 alt1">32</div><div class="line number33 index32 alt2">33</div><div class="line number34 index33 alt1">34</div><div class="line number35 index34 alt2">35</div><div class="line number36 index35 alt1">36</div><div class="line number37 index36 alt2">37</div><div class="line number38 index37 alt1">38</div><div class="line number39 index38 alt2">39</div><div class="line number40 index39 alt1">40</div><div class="line number41 index40 alt2">41</div><div class="line number42 index41 alt1">42</div><div class="line number43 index42 alt2">43</div><div class="line number44 index43 alt1">44</div><div class="line number45 index44 alt2">45</div><div class="line number46 index45 alt1">46</div><div class="line number47 index46 alt2">47</div><div class="line number48 index47 alt1">48</div><div class="line number49 index48 alt2">49</div><div class="line number50 index49 alt1">50</div><div class="line number51 index50 alt2">51</div><div class="line number52 index51 alt1">52</div><div class="line number53 index52 alt2">53</div><div class="line number54 index53 alt1">54</div><div class="line number55 index54 alt2">55</div><div class="line number56 index55 alt1">56</div><div class="line number57 index56 alt2">57</div><div class="line number58 index57 alt1">58</div><div class="line number59 index58 alt2">59</div><div class="line number60 index59 alt1">60</div><div class="line number61 index60 alt2">61</div><div class="line number62 index61 alt1">62</div><div class="line number63 index62 alt2">63</div><div class="line number64 index63 alt1">64</div><div class="line number65 index64 alt2">65</div><div class="line number66 index65 alt1">66</div><div class="line number67 index66 alt2">67</div><div class="line number68 index67 alt1">68</div><div class="line number69 index68 alt2">69</div><div class="line number70 index69 alt1">70</div><div class="line number71 index70 alt2">71</div><div class="line number72 index71 alt1">72</div><div class="line number73 index72 alt2">73</div><div class="line number74 index73 alt1">74</div><div class="line number75 index74 alt2">75</div><div class="line number76 index75 alt1">76</div><div class="line number77 index76 alt2">77</div><div class="line number78 index77 alt1">78</div><div class="line number79 index78 alt2">79</div><div class="line number80 index79 alt1">80</div><div class="line number81 index80 alt2">81</div><div class="line number82 index81 alt1">82</div><div class="line number83 index82 alt2">83</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="php comments">// src/Ens/JobeetBundle/Controller/JobController.php</code></div><div class="line number2 index1 alt1"><code class="php comments">// ...</code></div><div class="line number3 index2 alt2">&nbsp;</div><div class="line number4 index3 alt1"><code class="php keyword">public</code> <code class="php keyword">function</code> <code class="php plain">editAction(</code><code class="php variable">$token</code><code class="php plain">)</code></div><div class="line number5 index4 alt2"><code class="php plain">{</code></div><div class="line number6 index5 alt1"><code class="php spaces">&nbsp;&nbsp;</code><code class="php variable">$em</code> <code class="php plain">= </code><code class="php variable">$this</code><code class="php plain">-&gt;getDoctrine()-&gt;getEntityManager();</code></div><div class="line number7 index6 alt2">&nbsp;</div><div class="line number8 index7 alt1"><code class="php spaces">&nbsp;&nbsp;</code><code class="php variable">$entity</code> <code class="php plain">= </code><code class="php variable">$em</code><code class="php plain">-&gt;getRepository(</code><code class="php string">'EnsJobeetBundle:Job'</code><code class="php plain">)-&gt;findOneByToken(</code><code class="php variable">$token</code><code class="php plain">);</code></div><div class="line number9 index8 alt2">&nbsp;</div><div class="line number10 index9 alt1"><code class="php spaces">&nbsp;&nbsp;</code><code class="php keyword">if</code> <code class="php plain">(!</code><code class="php variable">$entity</code><code class="php plain">) {</code></div><div class="line number11 index10 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php keyword">throw</code> <code class="php variable">$this</code><code class="php plain">-&gt;createNotFoundException(</code><code class="php string">'Unable to find Job entity.'</code><code class="php plain">);</code></div><div class="line number12 index11 alt1"><code class="php spaces">&nbsp;&nbsp;</code><code class="php plain">}</code></div><div class="line number13 index12 alt2">&nbsp;</div><div class="line number14 index13 alt1"><code class="php spaces">&nbsp;&nbsp;</code><code class="php variable">$editForm</code> <code class="php plain">= </code><code class="php variable">$this</code><code class="php plain">-&gt;createForm(</code><code class="php keyword">new</code> <code class="php plain">JobType(), </code><code class="php variable">$entity</code><code class="php plain">);</code></div><div class="line number15 index14 alt2"><code class="php spaces">&nbsp;&nbsp;</code><code class="php variable">$deleteForm</code> <code class="php plain">= </code><code class="php variable">$this</code><code class="php plain">-&gt;createDeleteForm(</code><code class="php variable">$token</code><code class="php plain">);</code></div><div class="line number16 index15 alt1">&nbsp;</div><div class="line number17 index16 alt2"><code class="php spaces">&nbsp;&nbsp;</code><code class="php keyword">return</code> <code class="php variable">$this</code><code class="php plain">-&gt;render(</code><code class="php string">'EnsJobeetBundle:Job:edit.html.twig'</code><code class="php plain">, </code><code class="php keyword">array</code><code class="php plain">(</code></div><div class="line number18 index17 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php string">'entity'</code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <code class="php plain">=&gt; </code><code class="php variable">$entity</code><code class="php plain">,</code></div><div class="line number19 index18 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php string">'edit_form'</code>&nbsp;&nbsp; <code class="php plain">=&gt; </code><code class="php variable">$editForm</code><code class="php plain">-&gt;createView(),</code></div><div class="line number20 index19 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php string">'delete_form'</code> <code class="php plain">=&gt; </code><code class="php variable">$deleteForm</code><code class="php plain">-&gt;createView(),</code></div><div class="line number21 index20 alt2"><code class="php spaces">&nbsp;&nbsp;</code><code class="php plain">));</code></div><div class="line number22 index21 alt1"><code class="php plain">}</code></div><div class="line number23 index22 alt2">&nbsp;</div><div class="line number24 index23 alt1"><code class="php keyword">public</code> <code class="php keyword">function</code> <code class="php plain">updateAction(</code><code class="php variable">$token</code><code class="php plain">)</code></div><div class="line number25 index24 alt2"><code class="php plain">{</code></div><div class="line number26 index25 alt1"><code class="php spaces">&nbsp;&nbsp;</code><code class="php variable">$em</code> <code class="php plain">= </code><code class="php variable">$this</code><code class="php plain">-&gt;getDoctrine()-&gt;getEntityManager();</code></div><div class="line number27 index26 alt2">&nbsp;</div><div class="line number28 index27 alt1"><code class="php spaces">&nbsp;&nbsp;</code><code class="php variable">$entity</code> <code class="php plain">= </code><code class="php variable">$em</code><code class="php plain">-&gt;getRepository(</code><code class="php string">'EnsJobeetBundle:Job'</code><code class="php plain">)-&gt;findOneByToken(</code><code class="php variable">$token</code><code class="php plain">);</code></div><div class="line number29 index28 alt2">&nbsp;</div><div class="line number30 index29 alt1"><code class="php spaces">&nbsp;&nbsp;</code><code class="php keyword">if</code> <code class="php plain">(!</code><code class="php variable">$entity</code><code class="php plain">) {</code></div><div class="line number31 index30 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php keyword">throw</code> <code class="php variable">$this</code><code class="php plain">-&gt;createNotFoundException(</code><code class="php string">'Unable to find Job entity.'</code><code class="php plain">);</code></div><div class="line number32 index31 alt1"><code class="php spaces">&nbsp;&nbsp;</code><code class="php plain">}</code></div><div class="line number33 index32 alt2">&nbsp;</div><div class="line number34 index33 alt1"><code class="php spaces">&nbsp;&nbsp;</code><code class="php variable">$editForm</code>&nbsp;&nbsp; <code class="php plain">= </code><code class="php variable">$this</code><code class="php plain">-&gt;createForm(</code><code class="php keyword">new</code> <code class="php plain">JobType(), </code><code class="php variable">$entity</code><code class="php plain">);</code></div><div class="line number35 index34 alt2"><code class="php spaces">&nbsp;&nbsp;</code><code class="php variable">$deleteForm</code> <code class="php plain">= </code><code class="php variable">$this</code><code class="php plain">-&gt;createDeleteForm(</code><code class="php variable">$token</code><code class="php plain">);</code></div><div class="line number36 index35 alt1">&nbsp;</div><div class="line number37 index36 alt2"><code class="php spaces">&nbsp;&nbsp;</code><code class="php variable">$request</code> <code class="php plain">= </code><code class="php variable">$this</code><code class="php plain">-&gt;getRequest();</code></div><div class="line number38 index37 alt1">&nbsp;</div><div class="line number39 index38 alt2"><code class="php spaces">&nbsp;&nbsp;</code><code class="php variable">$editForm</code><code class="php plain">-&gt;bindRequest(</code><code class="php variable">$request</code><code class="php plain">);</code></div><div class="line number40 index39 alt1">&nbsp;</div><div class="line number41 index40 alt2"><code class="php spaces">&nbsp;&nbsp;</code><code class="php keyword">if</code> <code class="php plain">(</code><code class="php variable">$editForm</code><code class="php plain">-&gt;isValid()) {</code></div><div class="line number42 index41 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php variable">$em</code><code class="php plain">-&gt;persist(</code><code class="php variable">$entity</code><code class="php plain">);</code></div><div class="line number43 index42 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php variable">$em</code><code class="php plain">-&gt;</code><code class="php functions">flush</code><code class="php plain">();</code></div><div class="line number44 index43 alt1">&nbsp;</div><div class="line number45 index44 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php keyword">return</code> <code class="php variable">$this</code><code class="php plain">-&gt;redirect(</code><code class="php variable">$this</code><code class="php plain">-&gt;generateUrl(</code><code class="php string">'ens_job_edit'</code><code class="php plain">, </code><code class="php keyword">array</code><code class="php plain">(</code><code class="php string">'token'</code> <code class="php plain">=&gt; </code><code class="php variable">$token</code><code class="php plain">)));</code></div><div class="line number46 index45 alt1"><code class="php spaces">&nbsp;&nbsp;</code><code class="php plain">}</code></div><div class="line number47 index46 alt2">&nbsp;</div><div class="line number48 index47 alt1"><code class="php spaces">&nbsp;&nbsp;</code><code class="php keyword">return</code> <code class="php variable">$this</code><code class="php plain">-&gt;render(</code><code class="php string">'EnsJobeetBundle:Job:edit.html.twig'</code><code class="php plain">, </code><code class="php keyword">array</code><code class="php plain">(</code></div><div class="line number49 index48 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php string">'entity'</code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <code class="php plain">=&gt; </code><code class="php variable">$entity</code><code class="php plain">,</code></div><div class="line number50 index49 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php string">'edit_form'</code>&nbsp;&nbsp; <code class="php plain">=&gt; </code><code class="php variable">$editForm</code><code class="php plain">-&gt;createView(),</code></div><div class="line number51 index50 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php string">'delete_form'</code> <code class="php plain">=&gt; </code><code class="php variable">$deleteForm</code><code class="php plain">-&gt;createView(),</code></div><div class="line number52 index51 alt1"><code class="php spaces">&nbsp;&nbsp;</code><code class="php plain">));</code></div><div class="line number53 index52 alt2"><code class="php plain">}</code></div><div class="line number54 index53 alt1">&nbsp;</div><div class="line number55 index54 alt2"><code class="php keyword">public</code> <code class="php keyword">function</code> <code class="php plain">deleteAction(</code><code class="php variable">$token</code><code class="php plain">)</code></div><div class="line number56 index55 alt1"><code class="php plain">{</code></div><div class="line number57 index56 alt2"><code class="php spaces">&nbsp;&nbsp;</code><code class="php variable">$form</code> <code class="php plain">= </code><code class="php variable">$this</code><code class="php plain">-&gt;createDeleteForm(</code><code class="php variable">$token</code><code class="php plain">);</code></div><div class="line number58 index57 alt1"><code class="php spaces">&nbsp;&nbsp;</code><code class="php variable">$request</code> <code class="php plain">= </code><code class="php variable">$this</code><code class="php plain">-&gt;getRequest();</code></div><div class="line number59 index58 alt2">&nbsp;</div><div class="line number60 index59 alt1"><code class="php spaces">&nbsp;&nbsp;</code><code class="php variable">$form</code><code class="php plain">-&gt;bindRequest(</code><code class="php variable">$request</code><code class="php plain">);</code></div><div class="line number61 index60 alt2">&nbsp;</div><div class="line number62 index61 alt1"><code class="php spaces">&nbsp;&nbsp;</code><code class="php keyword">if</code> <code class="php plain">(</code><code class="php variable">$form</code><code class="php plain">-&gt;isValid()) {</code></div><div class="line number63 index62 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php variable">$em</code> <code class="php plain">= </code><code class="php variable">$this</code><code class="php plain">-&gt;getDoctrine()-&gt;getEntityManager();</code></div><div class="line number64 index63 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php variable">$entity</code> <code class="php plain">= </code><code class="php variable">$em</code><code class="php plain">-&gt;getRepository(</code><code class="php string">'EnsJobeetBundle:Job'</code><code class="php plain">)-&gt;findOneByToken(</code><code class="php variable">$token</code><code class="php plain">);</code></div><div class="line number65 index64 alt2">&nbsp;</div><div class="line number66 index65 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php keyword">if</code> <code class="php plain">(!</code><code class="php variable">$entity</code><code class="php plain">) {</code></div><div class="line number67 index66 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php keyword">throw</code> <code class="php variable">$this</code><code class="php plain">-&gt;createNotFoundException(</code><code class="php string">'Unable to find Job entity.'</code><code class="php plain">);</code></div><div class="line number68 index67 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">}</code></div><div class="line number69 index68 alt2">&nbsp;</div><div class="line number70 index69 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php variable">$em</code><code class="php plain">-&gt;remove(</code><code class="php variable">$entity</code><code class="php plain">);</code></div><div class="line number71 index70 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php variable">$em</code><code class="php plain">-&gt;</code><code class="php functions">flush</code><code class="php plain">();</code></div><div class="line number72 index71 alt1"><code class="php spaces">&nbsp;&nbsp;</code><code class="php plain">}</code></div><div class="line number73 index72 alt2">&nbsp;</div><div class="line number74 index73 alt1"><code class="php spaces">&nbsp;&nbsp;</code><code class="php keyword">return</code> <code class="php variable">$this</code><code class="php plain">-&gt;redirect(</code><code class="php variable">$this</code><code class="php plain">-&gt;generateUrl(</code><code class="php string">'ens_job'</code><code class="php plain">));</code></div><div class="line number75 index74 alt2"><code class="php plain">}</code></div><div class="line number76 index75 alt1">&nbsp;</div><div class="line number77 index76 alt2"><code class="php keyword">private</code> <code class="php keyword">function</code> <code class="php plain">createDeleteForm(</code><code class="php variable">$token</code><code class="php plain">)</code></div><div class="line number78 index77 alt1"><code class="php plain">{</code></div><div class="line number79 index78 alt2"><code class="php spaces">&nbsp;&nbsp;</code><code class="php keyword">return</code> <code class="php variable">$this</code><code class="php plain">-&gt;createFormBuilder(</code><code class="php keyword">array</code><code class="php plain">(</code><code class="php string">'token'</code> <code class="php plain">=&gt; </code><code class="php variable">$token</code><code class="php plain">))</code></div><div class="line number80 index79 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">-&gt;add(</code><code class="php string">'token'</code><code class="php plain">, </code><code class="php string">'hidden'</code><code class="php plain">)</code></div><div class="line number81 index80 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">-&gt;getForm()</code></div><div class="line number82 index81 alt1"><code class="php spaces">&nbsp;&nbsp;</code><code class="php plain">;</code></div><div class="line number83 index82 alt2"><code class="php plain">}</code></div></div></td></tr></tbody></table></div></div>
<p>In the job show template <code>show.html.twig</code>, change the <code>ens_job_edit</code> route parameter:</p>
<div><div id="highlighter_388201" class="syntaxhighlighter  xml"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="xml plain">&lt;</code><code class="xml keyword">a</code> <code class="xml color1">href</code><code class="xml plain">=</code><code class="xml string">"{{ path('ens_job_edit', { 'token': entity.token }) }}"</code><code class="xml plain">&gt;</code></div></div></td></tr></tbody></table></div></div>
<p>Do the same for <code>ens_job_update</code> route in <code>edit.html.twig</code> job template:</p>
<div><div id="highlighter_675280" class="syntaxhighlighter  xml"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="xml plain">&lt;</code><code class="xml keyword">form</code> <code class="xml color1">action</code><code class="xml plain">=</code><code class="xml string">"{{ path('ens_job_update', { 'token': entity.token }) }}"</code> <code class="xml color1">method</code><code class="xml plain">=</code><code class="xml string">"post"</code> <code class="xml plain">{{ form_enctype(edit_form) }}&gt;</code></div></div></td></tr></tbody></table></div></div>
<p>Now, all routes related to the jobs, except the job_show_user one, embed the token. For instance, the route to edit a job is now of the following pattern:</p>
<div><div id="highlighter_539607" class="syntaxhighlighter nogutter  plain"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="plain plain"><a href="http://jobeet.local/job/TOKEN/edit">http://jobeet.local/job/TOKEN/edit</a></code></div></div></td></tr></tbody></table></div></div>
<h2>The Preview Page</h2>
<p>The preview page is the same as the job page display. The only difference is that the job preview page will be accessed using the job token instead of the job id:</p>
<div><div id="highlighter_387690" class="syntaxhighlighter  plain"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div><div class="line number7 index6 alt2">7</div><div class="line number8 index7 alt1">8</div><div class="line number9 index8 alt2">9</div><div class="line number10 index9 alt1">10</div><div class="line number11 index10 alt2">11</div><div class="line number12 index11 alt1">12</div><div class="line number13 index12 alt2">13</div><div class="line number14 index13 alt1">14</div><div class="line number15 index14 alt2">15</div><div class="line number16 index15 alt1">16</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="plain plain"># src/End/JobeetBundle/Resources/config/routing/job.yml</code></div><div class="line number2 index1 alt1"><code class="plain plain"># ...</code></div><div class="line number3 index2 alt2">&nbsp;</div><div class="line number4 index3 alt1"><code class="plain plain">ens_job_show:</code></div><div class="line number5 index4 alt2"><code class="plain spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain plain">pattern:&nbsp; /{company}/{location}/{id}/{position}</code></div><div class="line number6 index5 alt1"><code class="plain spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain plain">defaults: { _controller: "EnsJobeetBundle:Job:show" }</code></div><div class="line number7 index6 alt2"><code class="plain spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain plain">requirements:</code></div><div class="line number8 index7 alt1"><code class="plain spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain plain">id:&nbsp; \d+</code></div><div class="line number9 index8 alt2">&nbsp;</div><div class="line number10 index9 alt1"><code class="plain plain">ens_job_preview:</code></div><div class="line number11 index10 alt2"><code class="plain spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain plain">pattern:&nbsp; /{company}/{location}/{token}/{position}</code></div><div class="line number12 index11 alt1"><code class="plain spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain plain">defaults: { _controller: "EnsJobeetBundle:Job:preview" }</code></div><div class="line number13 index12 alt2"><code class="plain spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain plain">requirements:</code></div><div class="line number14 index13 alt1"><code class="plain spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain plain">token:&nbsp; \w+</code></div><div class="line number15 index14 alt2">&nbsp;</div><div class="line number16 index15 alt1"><code class="plain plain"># ...</code></div></div></td></tr></tbody></table></div></div>
<p>The preview action (here the difference from the show action is that the job is retrieved from the database using the provided token instead of the id):</p>
<div><div id="highlighter_211311" class="syntaxhighlighter  php"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div><div class="line number7 index6 alt2">7</div><div class="line number8 index7 alt1">8</div><div class="line number9 index8 alt2">9</div><div class="line number10 index9 alt1">10</div><div class="line number11 index10 alt2">11</div><div class="line number12 index11 alt1">12</div><div class="line number13 index12 alt2">13</div><div class="line number14 index13 alt1">14</div><div class="line number15 index14 alt2">15</div><div class="line number16 index15 alt1">16</div><div class="line number17 index16 alt2">17</div><div class="line number18 index17 alt1">18</div><div class="line number19 index18 alt2">19</div><div class="line number20 index19 alt1">20</div><div class="line number21 index20 alt2">21</div><div class="line number22 index21 alt1">22</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="php comments">// src/Ens/JobeetBundle/Controller/JobController.php</code></div><div class="line number2 index1 alt1"><code class="php comments">// ...</code></div><div class="line number3 index2 alt2">&nbsp;</div><div class="line number4 index3 alt1"><code class="php keyword">public</code> <code class="php keyword">function</code> <code class="php plain">previewAction(</code><code class="php variable">$token</code><code class="php plain">)</code></div><div class="line number5 index4 alt2"><code class="php plain">{</code></div><div class="line number6 index5 alt1"><code class="php spaces">&nbsp;&nbsp;</code><code class="php variable">$em</code> <code class="php plain">= </code><code class="php variable">$this</code><code class="php plain">-&gt;getDoctrine()-&gt;getEntityManager();</code></div><div class="line number7 index6 alt2">&nbsp;</div><div class="line number8 index7 alt1"><code class="php spaces">&nbsp;&nbsp;</code><code class="php variable">$entity</code> <code class="php plain">= </code><code class="php variable">$em</code><code class="php plain">-&gt;getRepository(</code><code class="php string">'EnsJobeetBundle:Job'</code><code class="php plain">)-&gt;findOneByToken(</code><code class="php variable">$token</code><code class="php plain">);</code></div><div class="line number9 index8 alt2">&nbsp;</div><div class="line number10 index9 alt1"><code class="php spaces">&nbsp;&nbsp;</code><code class="php keyword">if</code> <code class="php plain">(!</code><code class="php variable">$entity</code><code class="php plain">) {</code></div><div class="line number11 index10 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php keyword">throw</code> <code class="php variable">$this</code><code class="php plain">-&gt;createNotFoundException(</code><code class="php string">'Unable to find Job entity.'</code><code class="php plain">);</code></div><div class="line number12 index11 alt1"><code class="php spaces">&nbsp;&nbsp;</code><code class="php plain">}</code></div><div class="line number13 index12 alt2">&nbsp;</div><div class="line number14 index13 alt1"><code class="php spaces">&nbsp;&nbsp;</code><code class="php variable">$deleteForm</code> <code class="php plain">= </code><code class="php variable">$this</code><code class="php plain">-&gt;createDeleteForm(</code><code class="php variable">$entity</code><code class="php plain">-&gt;getId());</code></div><div class="line number15 index14 alt2">&nbsp;</div><div class="line number16 index15 alt1"><code class="php spaces">&nbsp;&nbsp;</code><code class="php keyword">return</code> <code class="php variable">$this</code><code class="php plain">-&gt;render(</code><code class="php string">'EnsJobeetBundle:Job:show.html.twig'</code><code class="php plain">, </code><code class="php keyword">array</code><code class="php plain">(</code></div><div class="line number17 index16 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php string">'entity'</code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <code class="php plain">=&gt; </code><code class="php variable">$entity</code><code class="php plain">,</code></div><div class="line number18 index17 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php string">'delete_form'</code> <code class="php plain">=&gt; </code><code class="php variable">$deleteForm</code><code class="php plain">-&gt;createView(),</code></div><div class="line number19 index18 alt2"><code class="php spaces">&nbsp;&nbsp;</code><code class="php plain">));</code></div><div class="line number20 index19 alt1"><code class="php plain">}</code></div><div class="line number21 index20 alt2">&nbsp;</div><div class="line number22 index21 alt1"><code class="php comments">// ...</code></div></div></td></tr></tbody></table></div></div>
<p>If the user comes in with the tokenized URL, we will add an admin bar at the top. At the beginning of the <code>show.html.twig</code> template, include a template to host the admin bar and remove the <code>edit</code> link at the bottom:</p>
<div><div id="highlighter_191141" class="syntaxhighlighter  xml"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div><div class="line number7 index6 alt2">7</div><div class="line number8 index7 alt1">8</div><div class="line number9 index8 alt2">9</div><div class="line number10 index9 alt1">10</div><div class="line number11 index10 alt2">11</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="xml comments">&lt;!-- /src/Ens/JobeetBundle/Resources/views/Job/show.html.twig --&gt;</code></div><div class="line number2 index1 alt1"><code class="xml comments">&lt;!-- ... --&gt;</code></div><div class="line number3 index2 alt2">&nbsp;</div><div class="line number4 index3 alt1"><code class="xml plain">{% block content %}</code></div><div class="line number5 index4 alt2"><code class="xml spaces">&nbsp;&nbsp;</code><code class="xml plain">{% if app.request.get('token') %}</code></div><div class="line number6 index5 alt1"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">{% include 'EnsJobeetBundle:Job:admin.html.twig' with {'job': entity} %}</code></div><div class="line number7 index6 alt2"><code class="xml spaces">&nbsp;&nbsp;</code><code class="xml plain">{% endif %}</code></div><div class="line number8 index7 alt1">&nbsp;</div><div class="line number9 index8 alt2"><code class="xml spaces">&nbsp;&nbsp;</code><code class="xml comments">&lt;!-- ... --&gt;</code></div><div class="line number10 index9 alt1">&nbsp;</div><div class="line number11 index10 alt2"><code class="xml plain">{% endblock %}</code></div></div></td></tr></tbody></table></div></div>
<p>Then, create the <code>admin.html.twig</code> template:</p>
<div><div id="highlighter_770033" class="syntaxhighlighter  xml"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div><div class="line number7 index6 alt2">7</div><div class="line number8 index7 alt1">8</div><div class="line number9 index8 alt2">9</div><div class="line number10 index9 alt1">10</div><div class="line number11 index10 alt2">11</div><div class="line number12 index11 alt1">12</div><div class="line number13 index12 alt2">13</div><div class="line number14 index13 alt1">14</div><div class="line number15 index14 alt2">15</div><div class="line number16 index15 alt1">16</div><div class="line number17 index16 alt2">17</div><div class="line number18 index17 alt1">18</div><div class="line number19 index18 alt2">19</div><div class="line number20 index19 alt1">20</div><div class="line number21 index20 alt2">21</div><div class="line number22 index21 alt1">22</div><div class="line number23 index22 alt2">23</div><div class="line number24 index23 alt1">24</div><div class="line number25 index24 alt2">25</div><div class="line number26 index25 alt1">26</div><div class="line number27 index26 alt2">27</div><div class="line number28 index27 alt1">28</div><div class="line number29 index28 alt2">29</div><div class="line number30 index29 alt1">30</div><div class="line number31 index30 alt2">31</div><div class="line number32 index31 alt1">32</div><div class="line number33 index32 alt2">33</div><div class="line number34 index33 alt1">34</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="xml comments">&lt;!-- /src/Ens/JobeetBundle/Resources/views/Job/admin.html.twig --&gt;</code></div><div class="line number2 index1 alt1">&nbsp;</div><div class="line number3 index2 alt2"><code class="xml plain">&lt;</code><code class="xml keyword">div</code> <code class="xml color1">id</code><code class="xml plain">=</code><code class="xml string">"job_actions"</code><code class="xml plain">&gt;</code></div><div class="line number4 index3 alt1"><code class="xml spaces">&nbsp;&nbsp;</code><code class="xml plain">&lt;</code><code class="xml keyword">h3</code><code class="xml plain">&gt;Admin&lt;/</code><code class="xml keyword">h3</code><code class="xml plain">&gt;</code></div><div class="line number5 index4 alt2"><code class="xml spaces">&nbsp;&nbsp;</code><code class="xml plain">&lt;</code><code class="xml keyword">ul</code><code class="xml plain">&gt;</code></div><div class="line number6 index5 alt1"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">{% if not job.isActivated %}</code></div><div class="line number7 index6 alt2"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;</code><code class="xml keyword">li</code><code class="xml plain">&gt;&lt;</code><code class="xml keyword">a</code> <code class="xml color1">href</code><code class="xml plain">=</code><code class="xml string">"{{ path('ens_job_edit', { 'token': job.token }) }}"</code><code class="xml plain">&gt;Edit&lt;/</code><code class="xml keyword">a</code><code class="xml plain">&gt;&lt;/</code><code class="xml keyword">li</code><code class="xml plain">&gt;</code></div><div class="line number8 index7 alt1"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;</code><code class="xml keyword">li</code><code class="xml plain">&gt;&lt;</code><code class="xml keyword">a</code> <code class="xml color1">href</code><code class="xml plain">=</code><code class="xml string">"{{ path('ens_job_edit', { 'token': job.token }) }}"</code><code class="xml plain">&gt;Publish&lt;/</code><code class="xml keyword">a</code><code class="xml plain">&gt;&lt;/</code><code class="xml keyword">li</code><code class="xml plain">&gt;</code></div><div class="line number9 index8 alt2"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">{% endif %}</code></div><div class="line number10 index9 alt1"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;</code><code class="xml keyword">li</code><code class="xml plain">&gt;</code></div><div class="line number11 index10 alt2"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;</code><code class="xml keyword">form</code> <code class="xml color1">action</code><code class="xml plain">=</code><code class="xml string">"{{ path('ens_job_delete', { 'token': job.token }) }}"</code> <code class="xml color1">method</code><code class="xml plain">=</code><code class="xml string">"post"</code><code class="xml plain">&gt;</code></div><div class="line number12 index11 alt1"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">{{ form_widget(delete_form) }}</code></div><div class="line number13 index12 alt2"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;</code><code class="xml keyword">button</code> <code class="xml color1">type</code><code class="xml plain">=</code><code class="xml string">"submit"</code> <code class="xml color1">onclick</code><code class="xml plain">=</code><code class="xml string">"if(!confirm('Are you sure?')) { return false; }"</code><code class="xml plain">&gt;Delete&lt;/</code><code class="xml keyword">button</code><code class="xml plain">&gt;</code></div><div class="line number14 index13 alt1"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;/</code><code class="xml keyword">form</code><code class="xml plain">&gt;</code></div><div class="line number15 index14 alt2"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;/</code><code class="xml keyword">li</code><code class="xml plain">&gt;</code></div><div class="line number16 index15 alt1"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">{% if job.isActivated %}</code></div><div class="line number17 index16 alt2"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;</code><code class="xml keyword">li</code> <code class="xml plain">{% if job.expiresSoon %} </code><code class="xml color1">class</code><code class="xml plain">=</code><code class="xml string">"expires_soon"</code> <code class="xml plain">{% endif %}&gt;</code></div><div class="line number18 index17 alt1"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">{% if job.isExpired %}</code></div><div class="line number19 index18 alt2"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">Expired</code></div><div class="line number20 index19 alt1"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">{% else %}</code></div><div class="line number21 index20 alt2"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">Expires in &lt;</code><code class="xml keyword">strong</code><code class="xml plain">&gt;{{ job.getDaysBeforeExpires }}&lt;/</code><code class="xml keyword">strong</code><code class="xml plain">&gt; days</code></div><div class="line number22 index21 alt1"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">{% endif %}</code></div><div class="line number23 index22 alt2">&nbsp;</div><div class="line number24 index23 alt1"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">{% if job.expiresSoon %}</code></div><div class="line number25 index24 alt2"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">- &lt;</code><code class="xml keyword">a</code> <code class="xml color1">href</code><code class="xml plain">=</code><code class="xml string">""</code><code class="xml plain">&gt;Extend&lt;/</code><code class="xml keyword">a</code><code class="xml plain">&gt; for another 30 days</code></div><div class="line number26 index25 alt1"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">{% endif %}</code></div><div class="line number27 index26 alt2"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;/</code><code class="xml keyword">li</code><code class="xml plain">&gt;</code></div><div class="line number28 index27 alt1"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">{% else %}</code></div><div class="line number29 index28 alt2"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;</code><code class="xml keyword">li</code><code class="xml plain">&gt;</code></div><div class="line number30 index29 alt1"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">[Bookmark this &lt;</code><code class="xml keyword">a</code> <code class="xml color1">href</code><code class="xml plain">=</code><code class="xml string">"{{ url('ens_job_preview', { 'token': job.token, 'company': job.companyslug, 'location': job.locationslug, 'position': job.positionslug }) }}"</code><code class="xml plain">&gt;URL&lt;/</code><code class="xml keyword">a</code><code class="xml plain">&gt; to manage this job in the future.]</code></div><div class="line number31 index30 alt2"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;/</code><code class="xml keyword">li</code><code class="xml plain">&gt;</code></div><div class="line number32 index31 alt1"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">{% endif %}</code></div><div class="line number33 index32 alt2"><code class="xml spaces">&nbsp;&nbsp;</code><code class="xml plain">&lt;/</code><code class="xml keyword">ul</code><code class="xml plain">&gt;</code></div><div class="line number34 index33 alt1"><code class="xml plain">&lt;/</code><code class="xml keyword">div</code><code class="xml plain">&gt;</code></div></div></td></tr></tbody></table></div></div>
<p>There is a lot of code, but most of the code is simple to understand.</p>
<p>To make the template more readable, we have added a bunch of shortcut methods in the <code>Job</code> entity class:</p>
<div><div id="highlighter_870204" class="syntaxhighlighter  php"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div><div class="line number7 index6 alt2">7</div><div class="line number8 index7 alt1">8</div><div class="line number9 index8 alt2">9</div><div class="line number10 index9 alt1">10</div><div class="line number11 index10 alt2">11</div><div class="line number12 index11 alt1">12</div><div class="line number13 index12 alt2">13</div><div class="line number14 index13 alt1">14</div><div class="line number15 index14 alt2">15</div><div class="line number16 index15 alt1">16</div><div class="line number17 index16 alt2">17</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="php comments">// src/Ens/JobeetBundle/Entity/Job.php</code></div><div class="line number2 index1 alt1"><code class="php comments">// ...</code></div><div class="line number3 index2 alt2">&nbsp;</div><div class="line number4 index3 alt1"><code class="php keyword">public</code> <code class="php keyword">function</code> <code class="php plain">isExpired()</code></div><div class="line number5 index4 alt2"><code class="php plain">{</code></div><div class="line number6 index5 alt1"><code class="php spaces">&nbsp;&nbsp;</code><code class="php keyword">return</code> <code class="php variable">$this</code><code class="php plain">-&gt;getDaysBeforeExpires() &lt; 0;</code></div><div class="line number7 index6 alt2"><code class="php plain">}</code></div><div class="line number8 index7 alt1">&nbsp;</div><div class="line number9 index8 alt2"><code class="php keyword">public</code> <code class="php keyword">function</code> <code class="php plain">expiresSoon()</code></div><div class="line number10 index9 alt1"><code class="php plain">{</code></div><div class="line number11 index10 alt2"><code class="php spaces">&nbsp;&nbsp;</code><code class="php keyword">return</code> <code class="php variable">$this</code><code class="php plain">-&gt;getDaysBeforeExpires() &lt; 5;</code></div><div class="line number12 index11 alt1"><code class="php plain">}</code></div><div class="line number13 index12 alt2">&nbsp;</div><div class="line number14 index13 alt1"><code class="php keyword">public</code> <code class="php keyword">function</code> <code class="php plain">getDaysBeforeExpires()</code></div><div class="line number15 index14 alt2"><code class="php plain">{</code></div><div class="line number16 index15 alt1"><code class="php spaces">&nbsp;&nbsp;</code><code class="php keyword">return</code> <code class="php functions">ceil</code><code class="php plain">((</code><code class="php variable">$this</code><code class="php plain">-&gt;getExpiresAt()-&gt;format(</code><code class="php string">'U'</code><code class="php plain">) - time()) / 86400);</code></div><div class="line number17 index16 alt2"><code class="php plain">}</code></div></div></td></tr></tbody></table></div></div>
<p>The admin bar displays the different actions depending on the job status:</p>
<p><a href="./Symfony2 Jobeet Day 10  The Forms   ENS_files/admin-bar-1.png"><img class="alignnone size-full wp-image-1471" title="admin-bar-1" src="./Symfony2 Jobeet Day 10  The Forms   ENS_files/admin-bar-1.png" alt="" width="875" height="222"></a></p>
<p><a href="./Symfony2 Jobeet Day 10  The Forms   ENS_files/admin-bar-2.png"><img class="alignnone size-full wp-image-1472" title="admin-bar-2" src="./Symfony2 Jobeet Day 10  The Forms   ENS_files/admin-bar-2.png" alt="" width="875" height="222"></a></p>
<p>We will now redirect the <code>create</code> and <code>update</code> actions of the <code>JobController</code> to the new preview page:</p>
<div><div id="highlighter_952575" class="syntaxhighlighter  php"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div><div class="line number7 index6 alt2">7</div><div class="line number8 index7 alt1">8</div><div class="line number9 index8 alt2">9</div><div class="line number10 index9 alt1">10</div><div class="line number11 index10 alt2">11</div><div class="line number12 index11 alt1">12</div><div class="line number13 index12 alt2">13</div><div class="line number14 index13 alt1">14</div><div class="line number15 index14 alt2">15</div><div class="line number16 index15 alt1">16</div><div class="line number17 index16 alt2">17</div><div class="line number18 index17 alt1">18</div><div class="line number19 index18 alt2">19</div><div class="line number20 index19 alt1">20</div><div class="line number21 index20 alt2">21</div><div class="line number22 index21 alt1">22</div><div class="line number23 index22 alt2">23</div><div class="line number24 index23 alt1">24</div><div class="line number25 index24 alt2">25</div><div class="line number26 index25 alt1">26</div><div class="line number27 index26 alt2">27</div><div class="line number28 index27 alt1">28</div><div class="line number29 index28 alt2">29</div><div class="line number30 index29 alt1">30</div><div class="line number31 index30 alt2">31</div><div class="line number32 index31 alt1">32</div><div class="line number33 index32 alt2">33</div><div class="line number34 index33 alt1">34</div><div class="line number35 index34 alt2">35</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="php keyword">public</code> <code class="php keyword">function</code> <code class="php plain">createAction()</code></div><div class="line number2 index1 alt1"><code class="php plain">{</code></div><div class="line number3 index2 alt2"><code class="php spaces">&nbsp;&nbsp;</code><code class="php comments">// ...</code></div><div class="line number4 index3 alt1">&nbsp;</div><div class="line number5 index4 alt2"><code class="php spaces">&nbsp;&nbsp;</code><code class="php keyword">if</code> <code class="php plain">(</code><code class="php variable">$form</code><code class="php plain">-&gt;isValid()) {</code></div><div class="line number6 index5 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php comments">// ...</code></div><div class="line number7 index6 alt2">&nbsp;</div><div class="line number8 index7 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php keyword">return</code> <code class="php variable">$this</code><code class="php plain">-&gt;redirect(</code><code class="php variable">$this</code><code class="php plain">-&gt;generateUrl(</code><code class="php string">'ens_job_preview'</code><code class="php plain">, </code><code class="php keyword">array</code><code class="php plain">(</code></div><div class="line number9 index8 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php string">'company'</code> <code class="php plain">=&gt; </code><code class="php variable">$entity</code><code class="php plain">-&gt;getCompanySlug(),</code></div><div class="line number10 index9 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php string">'location'</code> <code class="php plain">=&gt; </code><code class="php variable">$entity</code><code class="php plain">-&gt;getLocationSlug(),</code></div><div class="line number11 index10 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php string">'token'</code> <code class="php plain">=&gt; </code><code class="php variable">$entity</code><code class="php plain">-&gt;getToken(),</code></div><div class="line number12 index11 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php string">'position'</code> <code class="php plain">=&gt; </code><code class="php variable">$entity</code><code class="php plain">-&gt;getPositionSlug()</code></div><div class="line number13 index12 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">)));</code></div><div class="line number14 index13 alt1"><code class="php spaces">&nbsp;&nbsp;</code><code class="php plain">}</code></div><div class="line number15 index14 alt2">&nbsp;</div><div class="line number16 index15 alt1"><code class="php spaces">&nbsp;&nbsp;</code><code class="php comments">// ...</code></div><div class="line number17 index16 alt2"><code class="php plain">}</code></div><div class="line number18 index17 alt1">&nbsp;</div><div class="line number19 index18 alt2"><code class="php keyword">public</code> <code class="php keyword">function</code> <code class="php plain">updateAction(</code><code class="php variable">$token</code><code class="php plain">)</code></div><div class="line number20 index19 alt1"><code class="php plain">{</code></div><div class="line number21 index20 alt2"><code class="php spaces">&nbsp;&nbsp;</code><code class="php comments">// ...</code></div><div class="line number22 index21 alt1">&nbsp;</div><div class="line number23 index22 alt2"><code class="php spaces">&nbsp;&nbsp;</code><code class="php keyword">if</code> <code class="php plain">(</code><code class="php variable">$editForm</code><code class="php plain">-&gt;isValid()) {</code></div><div class="line number24 index23 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php comments">// ...</code></div><div class="line number25 index24 alt2">&nbsp;</div><div class="line number26 index25 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php keyword">return</code> <code class="php variable">$this</code><code class="php plain">-&gt;redirect(</code><code class="php variable">$this</code><code class="php plain">-&gt;generateUrl(</code><code class="php string">'ens_job_preview'</code><code class="php plain">, </code><code class="php keyword">array</code><code class="php plain">(</code></div><div class="line number27 index26 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php string">'company'</code> <code class="php plain">=&gt; </code><code class="php variable">$entity</code><code class="php plain">-&gt;getCompanySlug(),</code></div><div class="line number28 index27 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php string">'location'</code> <code class="php plain">=&gt; </code><code class="php variable">$entity</code><code class="php plain">-&gt;getLocationSlug(),</code></div><div class="line number29 index28 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php string">'token'</code> <code class="php plain">=&gt; </code><code class="php variable">$entity</code><code class="php plain">-&gt;getToken(),</code></div><div class="line number30 index29 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php string">'position'</code> <code class="php plain">=&gt; </code><code class="php variable">$entity</code><code class="php plain">-&gt;getPositionSlug()</code></div><div class="line number31 index30 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">)));</code></div><div class="line number32 index31 alt1"><code class="php spaces">&nbsp;&nbsp;</code><code class="php plain">}</code></div><div class="line number33 index32 alt2">&nbsp;</div><div class="line number34 index33 alt1"><code class="php spaces">&nbsp;&nbsp;</code><code class="php comments">// ...</code></div><div class="line number35 index34 alt2"><code class="php plain">}</code></div></div></td></tr></tbody></table></div></div>
<h2>Job Activation and Publication</h2>
<p>In the previous section, there is a link to publish the job. The link needs to be changed to point to a new <code>publish</code> action. For this we will create new route:</p>
<div><div id="highlighter_1929" class="syntaxhighlighter  plain"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div><div class="line number7 index6 alt2">7</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="plain plain"># src/Ens/JobeetBundle/Resources/config/routing/job.yml</code></div><div class="line number2 index1 alt1"><code class="plain plain"># ...</code></div><div class="line number3 index2 alt2">&nbsp;</div><div class="line number4 index3 alt1"><code class="plain plain">ens_job_publish:</code></div><div class="line number5 index4 alt2"><code class="plain spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain plain">pattern:&nbsp; /{token}/publish</code></div><div class="line number6 index5 alt1"><code class="plain spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain plain">defaults: { _controller: "EnsJobeetBundle:Job:publish" }</code></div><div class="line number7 index6 alt2"><code class="plain spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain plain">requirements: { _method: post }</code></div></div></td></tr></tbody></table></div></div>
<p>We can now change the link of the “Publish” link (we will use a form here, like when deleting a job, so we will have a POST request):</p>
<div><div id="highlighter_979179" class="syntaxhighlighter  xml"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div><div class="line number7 index6 alt2">7</div><div class="line number8 index7 alt1">8</div><div class="line number9 index8 alt2">9</div><div class="line number10 index9 alt1">10</div><div class="line number11 index10 alt2">11</div><div class="line number12 index11 alt1">12</div><div class="line number13 index12 alt2">13</div><div class="line number14 index13 alt1">14</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="xml comments">&lt;!-- src/Ens/JobeetBundle/Resources/views/job/admin.html.twig --&gt;</code></div><div class="line number2 index1 alt1"><code class="xml comments">&lt;!-- ... --&gt;</code></div><div class="line number3 index2 alt2">&nbsp;</div><div class="line number4 index3 alt1"><code class="xml plain">{% if not job.isActivated %}</code></div><div class="line number5 index4 alt2"><code class="xml spaces">&nbsp;&nbsp;</code><code class="xml plain">&lt;</code><code class="xml keyword">li</code><code class="xml plain">&gt;&lt;</code><code class="xml keyword">a</code> <code class="xml color1">href</code><code class="xml plain">=</code><code class="xml string">"{{ path('ens_job_edit', { 'token': job.token }) }}"</code><code class="xml plain">&gt;Edit&lt;/</code><code class="xml keyword">a</code><code class="xml plain">&gt;&lt;/</code><code class="xml keyword">li</code><code class="xml plain">&gt;</code></div><div class="line number6 index5 alt1"><code class="xml spaces">&nbsp;&nbsp;</code><code class="xml plain">&lt;</code><code class="xml keyword">li</code><code class="xml plain">&gt;</code></div><div class="line number7 index6 alt2"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;</code><code class="xml keyword">form</code> <code class="xml color1">action</code><code class="xml plain">=</code><code class="xml string">"{{ path('ens_job_publish', { 'token': job.token }) }}"</code> <code class="xml color1">method</code><code class="xml plain">=</code><code class="xml string">"post"</code><code class="xml plain">&gt;</code></div><div class="line number8 index7 alt1"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">{{ form_widget(publish_form) }}</code></div><div class="line number9 index8 alt2"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;</code><code class="xml keyword">button</code> <code class="xml color1">type</code><code class="xml plain">=</code><code class="xml string">"submit"</code><code class="xml plain">&gt;Publish&lt;/</code><code class="xml keyword">button</code><code class="xml plain">&gt;</code></div><div class="line number10 index9 alt1"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;/</code><code class="xml keyword">form</code><code class="xml plain">&gt;</code></div><div class="line number11 index10 alt2"><code class="xml spaces">&nbsp;&nbsp;</code><code class="xml plain">&lt;/</code><code class="xml keyword">li</code><code class="xml plain">&gt;</code></div><div class="line number12 index11 alt1"><code class="xml plain">{% endif %}</code></div><div class="line number13 index12 alt2">&nbsp;</div><div class="line number14 index13 alt1"><code class="xml comments">&lt;!-- ... --&gt;</code></div></div></td></tr></tbody></table></div></div>
<p>The last step is to create the <code>publish</code> action, the <code>publish</code> form and to edit the <code>preview</code> action to send the <code>publish</code> form to the template:</p>
<div><div id="highlighter_446871" class="syntaxhighlighter  php"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div><div class="line number7 index6 alt2">7</div><div class="line number8 index7 alt1">8</div><div class="line number9 index8 alt2">9</div><div class="line number10 index9 alt1">10</div><div class="line number11 index10 alt2">11</div><div class="line number12 index11 alt1">12</div><div class="line number13 index12 alt2">13</div><div class="line number14 index13 alt1">14</div><div class="line number15 index14 alt2">15</div><div class="line number16 index15 alt1">16</div><div class="line number17 index16 alt2">17</div><div class="line number18 index17 alt1">18</div><div class="line number19 index18 alt2">19</div><div class="line number20 index19 alt1">20</div><div class="line number21 index20 alt2">21</div><div class="line number22 index21 alt1">22</div><div class="line number23 index22 alt2">23</div><div class="line number24 index23 alt1">24</div><div class="line number25 index24 alt2">25</div><div class="line number26 index25 alt1">26</div><div class="line number27 index26 alt2">27</div><div class="line number28 index27 alt1">28</div><div class="line number29 index28 alt2">29</div><div class="line number30 index29 alt1">30</div><div class="line number31 index30 alt2">31</div><div class="line number32 index31 alt1">32</div><div class="line number33 index32 alt2">33</div><div class="line number34 index33 alt1">34</div><div class="line number35 index34 alt2">35</div><div class="line number36 index35 alt1">36</div><div class="line number37 index36 alt2">37</div><div class="line number38 index37 alt1">38</div><div class="line number39 index38 alt2">39</div><div class="line number40 index39 alt1">40</div><div class="line number41 index40 alt2">41</div><div class="line number42 index41 alt1">42</div><div class="line number43 index42 alt2">43</div><div class="line number44 index43 alt1">44</div><div class="line number45 index44 alt2">45</div><div class="line number46 index45 alt1">46</div><div class="line number47 index46 alt2">47</div><div class="line number48 index47 alt1">48</div><div class="line number49 index48 alt2">49</div><div class="line number50 index49 alt1">50</div><div class="line number51 index50 alt2">51</div><div class="line number52 index51 alt1">52</div><div class="line number53 index52 alt2">53</div><div class="line number54 index53 alt1">54</div><div class="line number55 index54 alt2">55</div><div class="line number56 index55 alt1">56</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="php comments">// src/Ens/JobeetBundle/Controller/JobController.php</code></div><div class="line number2 index1 alt1"><code class="php comments">// ...</code></div><div class="line number3 index2 alt2">&nbsp;</div><div class="line number4 index3 alt1"><code class="php keyword">public</code> <code class="php keyword">function</code> <code class="php plain">previewAction(</code><code class="php variable">$token</code><code class="php plain">)</code></div><div class="line number5 index4 alt2"><code class="php plain">{</code></div><div class="line number6 index5 alt1"><code class="php spaces">&nbsp;&nbsp;</code><code class="php comments">// ...</code></div><div class="line number7 index6 alt2">&nbsp;</div><div class="line number8 index7 alt1"><code class="php spaces">&nbsp;&nbsp;</code><code class="php variable">$deleteForm</code> <code class="php plain">= </code><code class="php variable">$this</code><code class="php plain">-&gt;createDeleteForm(</code><code class="php variable">$entity</code><code class="php plain">-&gt;getId());</code></div><div class="line number9 index8 alt2"><code class="php spaces">&nbsp;&nbsp;</code><code class="php variable">$publishForm</code> <code class="php plain">= </code><code class="php variable">$this</code><code class="php plain">-&gt;createPublishForm(</code><code class="php variable">$entity</code><code class="php plain">-&gt;getToken());</code></div><div class="line number10 index9 alt1">&nbsp;</div><div class="line number11 index10 alt2"><code class="php spaces">&nbsp;&nbsp;</code><code class="php keyword">return</code> <code class="php variable">$this</code><code class="php plain">-&gt;render(</code><code class="php string">'EnsJobeetBundle:Job:show.html.twig'</code><code class="php plain">, </code><code class="php keyword">array</code><code class="php plain">(</code></div><div class="line number12 index11 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php string">'entity'</code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <code class="php plain">=&gt; </code><code class="php variable">$entity</code><code class="php plain">,</code></div><div class="line number13 index12 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php string">'delete_form'</code> <code class="php plain">=&gt; </code><code class="php variable">$deleteForm</code><code class="php plain">-&gt;createView(),</code></div><div class="line number14 index13 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php string">'publish_form'</code> <code class="php plain">=&gt; </code><code class="php variable">$publishForm</code><code class="php plain">-&gt;createView(),</code></div><div class="line number15 index14 alt2"><code class="php spaces">&nbsp;&nbsp;</code><code class="php plain">));</code></div><div class="line number16 index15 alt1"><code class="php plain">}</code></div><div class="line number17 index16 alt2">&nbsp;</div><div class="line number18 index17 alt1"><code class="php keyword">public</code> <code class="php keyword">function</code> <code class="php plain">publishAction(</code><code class="php variable">$token</code><code class="php plain">)</code></div><div class="line number19 index18 alt2"><code class="php plain">{</code></div><div class="line number20 index19 alt1"><code class="php spaces">&nbsp;&nbsp;</code><code class="php variable">$form</code> <code class="php plain">= </code><code class="php variable">$this</code><code class="php plain">-&gt;createPublishForm(</code><code class="php variable">$token</code><code class="php plain">);</code></div><div class="line number21 index20 alt2"><code class="php spaces">&nbsp;&nbsp;</code><code class="php variable">$request</code> <code class="php plain">= </code><code class="php variable">$this</code><code class="php plain">-&gt;getRequest();</code></div><div class="line number22 index21 alt1">&nbsp;</div><div class="line number23 index22 alt2"><code class="php spaces">&nbsp;&nbsp;</code><code class="php variable">$form</code><code class="php plain">-&gt;bindRequest(</code><code class="php variable">$request</code><code class="php plain">);</code></div><div class="line number24 index23 alt1">&nbsp;</div><div class="line number25 index24 alt2"><code class="php spaces">&nbsp;&nbsp;</code><code class="php keyword">if</code> <code class="php plain">(</code><code class="php variable">$form</code><code class="php plain">-&gt;isValid()) {</code></div><div class="line number26 index25 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php variable">$em</code> <code class="php plain">= </code><code class="php variable">$this</code><code class="php plain">-&gt;getDoctrine()-&gt;getEntityManager();</code></div><div class="line number27 index26 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php variable">$entity</code> <code class="php plain">= </code><code class="php variable">$em</code><code class="php plain">-&gt;getRepository(</code><code class="php string">'EnsJobeetBundle:Job'</code><code class="php plain">)-&gt;findOneByToken(</code><code class="php variable">$token</code><code class="php plain">);</code></div><div class="line number28 index27 alt1">&nbsp;</div><div class="line number29 index28 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php keyword">if</code> <code class="php plain">(!</code><code class="php variable">$entity</code><code class="php plain">) {</code></div><div class="line number30 index29 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php keyword">throw</code> <code class="php variable">$this</code><code class="php plain">-&gt;createNotFoundException(</code><code class="php string">'Unable to find Job entity.'</code><code class="php plain">);</code></div><div class="line number31 index30 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">}</code></div><div class="line number32 index31 alt1">&nbsp;</div><div class="line number33 index32 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php variable">$entity</code><code class="php plain">-&gt;publish();</code></div><div class="line number34 index33 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php variable">$em</code><code class="php plain">-&gt;persist(</code><code class="php variable">$entity</code><code class="php plain">);</code></div><div class="line number35 index34 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php variable">$em</code><code class="php plain">-&gt;</code><code class="php functions">flush</code><code class="php plain">();</code></div><div class="line number36 index35 alt1">&nbsp;</div><div class="line number37 index36 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php variable">$this</code><code class="php plain">-&gt;get(</code><code class="php string">'session'</code><code class="php plain">)-&gt;setFlash(</code><code class="php string">'notice'</code><code class="php plain">, </code><code class="php string">'Your job is now online for 30 days.'</code><code class="php plain">);</code></div><div class="line number38 index37 alt1"><code class="php spaces">&nbsp;&nbsp;</code><code class="php plain">}</code></div><div class="line number39 index38 alt2">&nbsp;</div><div class="line number40 index39 alt1"><code class="php spaces">&nbsp;&nbsp;</code><code class="php keyword">return</code> <code class="php variable">$this</code><code class="php plain">-&gt;redirect(</code><code class="php variable">$this</code><code class="php plain">-&gt;generateUrl(</code><code class="php string">'ens_job_preview'</code><code class="php plain">, </code><code class="php keyword">array</code><code class="php plain">(</code></div><div class="line number41 index40 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php string">'company'</code> <code class="php plain">=&gt; </code><code class="php variable">$entity</code><code class="php plain">-&gt;getCompanySlug(),</code></div><div class="line number42 index41 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php string">'location'</code> <code class="php plain">=&gt; </code><code class="php variable">$entity</code><code class="php plain">-&gt;getLocationSlug(),</code></div><div class="line number43 index42 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php string">'token'</code> <code class="php plain">=&gt; </code><code class="php variable">$entity</code><code class="php plain">-&gt;getToken(),</code></div><div class="line number44 index43 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php string">'position'</code> <code class="php plain">=&gt; </code><code class="php variable">$entity</code><code class="php plain">-&gt;getPositionSlug()</code></div><div class="line number45 index44 alt2"><code class="php spaces">&nbsp;&nbsp;</code><code class="php plain">)));</code></div><div class="line number46 index45 alt1"><code class="php plain">}</code></div><div class="line number47 index46 alt2">&nbsp;</div><div class="line number48 index47 alt1"><code class="php keyword">private</code> <code class="php keyword">function</code> <code class="php plain">createPublishForm(</code><code class="php variable">$token</code><code class="php plain">)</code></div><div class="line number49 index48 alt2"><code class="php plain">{</code></div><div class="line number50 index49 alt1"><code class="php spaces">&nbsp;&nbsp;</code><code class="php keyword">return</code> <code class="php variable">$this</code><code class="php plain">-&gt;createFormBuilder(</code><code class="php keyword">array</code><code class="php plain">(</code><code class="php string">'token'</code> <code class="php plain">=&gt; </code><code class="php variable">$token</code><code class="php plain">))</code></div><div class="line number51 index50 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">-&gt;add(</code><code class="php string">'token'</code><code class="php plain">, </code><code class="php string">'hidden'</code><code class="php plain">)</code></div><div class="line number52 index51 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">-&gt;getForm()</code></div><div class="line number53 index52 alt2"><code class="php spaces">&nbsp;&nbsp;</code><code class="php plain">;</code></div><div class="line number54 index53 alt1"><code class="php plain">}</code></div><div class="line number55 index54 alt2">&nbsp;</div><div class="line number56 index55 alt1"><code class="php comments">// ...</code></div></div></td></tr></tbody></table></div></div>
<p>The <code>publishAction()</code> method uses a new <code>publish()</code> method that can be defined as follows:</p>
<div><div id="highlighter_170470" class="syntaxhighlighter  php"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div><div class="line number7 index6 alt2">7</div><div class="line number8 index7 alt1">8</div><div class="line number9 index8 alt2">9</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="php comments">// src/Ens/JobeetBundle/Entity/Job.php</code></div><div class="line number2 index1 alt1"><code class="php comments">// ...</code></div><div class="line number3 index2 alt2">&nbsp;</div><div class="line number4 index3 alt1"><code class="php keyword">public</code> <code class="php keyword">function</code> <code class="php plain">publish()</code></div><div class="line number5 index4 alt2"><code class="php plain">{</code></div><div class="line number6 index5 alt1"><code class="php spaces">&nbsp;&nbsp;</code><code class="php variable">$this</code><code class="php plain">-&gt;setIsActivated(true);</code></div><div class="line number7 index6 alt2"><code class="php plain">}</code></div><div class="line number8 index7 alt1">&nbsp;</div><div class="line number9 index8 alt2"><code class="php comments">// ...</code></div></div></td></tr></tbody></table></div></div>
<p>You can now test the new publish feature in your browser.</p>
<p>But we still have something to fix. The non-activated jobs must not be accessible, which means that they must not show up on the Jobeet homepage, and must not be accessible by their URL. We need to edit the <code>JobRepository</code> methods to add this requirement:</p>
<div><div id="highlighter_29419" class="syntaxhighlighter  php"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div><div class="line number7 index6 alt2">7</div><div class="line number8 index7 alt1">8</div><div class="line number9 index8 alt2">9</div><div class="line number10 index9 alt1">10</div><div class="line number11 index10 alt2">11</div><div class="line number12 index11 alt1">12</div><div class="line number13 index12 alt2">13</div><div class="line number14 index13 alt1">14</div><div class="line number15 index14 alt2">15</div><div class="line number16 index15 alt1">16</div><div class="line number17 index16 alt2">17</div><div class="line number18 index17 alt1">18</div><div class="line number19 index18 alt2">19</div><div class="line number20 index19 alt1">20</div><div class="line number21 index20 alt2">21</div><div class="line number22 index21 alt1">22</div><div class="line number23 index22 alt2">23</div><div class="line number24 index23 alt1">24</div><div class="line number25 index24 alt2">25</div><div class="line number26 index25 alt1">26</div><div class="line number27 index26 alt2">27</div><div class="line number28 index27 alt1">28</div><div class="line number29 index28 alt2">29</div><div class="line number30 index29 alt1">30</div><div class="line number31 index30 alt2">31</div><div class="line number32 index31 alt1">32</div><div class="line number33 index32 alt2">33</div><div class="line number34 index33 alt1">34</div><div class="line number35 index34 alt2">35</div><div class="line number36 index35 alt1">36</div><div class="line number37 index36 alt2">37</div><div class="line number38 index37 alt1">38</div><div class="line number39 index38 alt2">39</div><div class="line number40 index39 alt1">40</div><div class="line number41 index40 alt2">41</div><div class="line number42 index41 alt1">42</div><div class="line number43 index42 alt2">43</div><div class="line number44 index43 alt1">44</div><div class="line number45 index44 alt2">45</div><div class="line number46 index45 alt1">46</div><div class="line number47 index46 alt2">47</div><div class="line number48 index47 alt1">48</div><div class="line number49 index48 alt2">49</div><div class="line number50 index49 alt1">50</div><div class="line number51 index50 alt2">51</div><div class="line number52 index51 alt1">52</div><div class="line number53 index52 alt2">53</div><div class="line number54 index53 alt1">54</div><div class="line number55 index54 alt2">55</div><div class="line number56 index55 alt1">56</div><div class="line number57 index56 alt2">57</div><div class="line number58 index57 alt1">58</div><div class="line number59 index58 alt2">59</div><div class="line number60 index59 alt1">60</div><div class="line number61 index60 alt2">61</div><div class="line number62 index61 alt1">62</div><div class="line number63 index62 alt2">63</div><div class="line number64 index63 alt1">64</div><div class="line number65 index64 alt2">65</div><div class="line number66 index65 alt1">66</div><div class="line number67 index66 alt2">67</div><div class="line number68 index67 alt1">68</div><div class="line number69 index68 alt2">69</div><div class="line number70 index69 alt1">70</div><div class="line number71 index70 alt2">71</div><div class="line number72 index71 alt1">72</div><div class="line number73 index72 alt2">73</div><div class="line number74 index73 alt1">74</div><div class="line number75 index74 alt2">75</div><div class="line number76 index75 alt1">76</div><div class="line number77 index76 alt2">77</div><div class="line number78 index77 alt1">78</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="php comments">// src Ens/JobeetBundle/Repository/JobRepository.php</code></div><div class="line number2 index1 alt1">&nbsp;</div><div class="line number3 index2 alt2"><code class="php keyword">namespace</code> <code class="php plain">Ens\JobeetBundle\Repository;</code></div><div class="line number4 index3 alt1"><code class="php keyword">use</code> <code class="php plain">Doctrine\ORM\EntityRepository;</code></div><div class="line number5 index4 alt2">&nbsp;</div><div class="line number6 index5 alt1"><code class="php keyword">class</code> <code class="php plain">JobRepository </code><code class="php keyword">extends</code> <code class="php plain">EntityRepository</code></div><div class="line number7 index6 alt2"><code class="php plain">{</code></div><div class="line number8 index7 alt1"><code class="php spaces">&nbsp;&nbsp;</code><code class="php keyword">public</code> <code class="php keyword">function</code> <code class="php plain">getActiveJobs(</code><code class="php variable">$category_id</code> <code class="php plain">= null, </code><code class="php variable">$max</code> <code class="php plain">= null, </code><code class="php variable">$offset</code> <code class="php plain">= null)</code></div><div class="line number9 index8 alt2"><code class="php spaces">&nbsp;&nbsp;</code><code class="php plain">{</code></div><div class="line number10 index9 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php variable">$qb</code> <code class="php plain">= </code><code class="php variable">$this</code><code class="php plain">-&gt;createQueryBuilder(</code><code class="php string">'j'</code><code class="php plain">)</code></div><div class="line number11 index10 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">-&gt;where(</code><code class="php string">'j.expires_at &gt; :date'</code><code class="php plain">)</code></div><div class="line number12 index11 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">-&gt;setParameter(</code><code class="php string">'date'</code><code class="php plain">, </code><code class="php functions">date</code><code class="php plain">(</code><code class="php string">'Y-m-d H:i:s'</code><code class="php plain">, time()))</code></div><div class="line number13 index12 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">-&gt;andWhere(</code><code class="php string">'j.is_activated = :activated'</code><code class="php plain">)</code></div><div class="line number14 index13 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">-&gt;setParameter(</code><code class="php string">'activated'</code><code class="php plain">, 1)</code></div><div class="line number15 index14 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">-&gt;orderBy(</code><code class="php string">'j.expires_at'</code><code class="php plain">, </code><code class="php string">'DESC'</code><code class="php plain">);</code></div><div class="line number16 index15 alt1">&nbsp;</div><div class="line number17 index16 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php keyword">if</code><code class="php plain">(</code><code class="php variable">$max</code><code class="php plain">)</code></div><div class="line number18 index17 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">{</code></div><div class="line number19 index18 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php variable">$qb</code><code class="php plain">-&gt;setMaxResults(</code><code class="php variable">$max</code><code class="php plain">);</code></div><div class="line number20 index19 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">}</code></div><div class="line number21 index20 alt2">&nbsp;</div><div class="line number22 index21 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php keyword">if</code><code class="php plain">(</code><code class="php variable">$offset</code><code class="php plain">)</code></div><div class="line number23 index22 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">{</code></div><div class="line number24 index23 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php variable">$qb</code><code class="php plain">-&gt;setFirstResult(</code><code class="php variable">$offset</code><code class="php plain">);</code></div><div class="line number25 index24 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">}</code></div><div class="line number26 index25 alt1">&nbsp;</div><div class="line number27 index26 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php keyword">if</code><code class="php plain">(</code><code class="php variable">$category_id</code><code class="php plain">)</code></div><div class="line number28 index27 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">{</code></div><div class="line number29 index28 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php variable">$qb</code><code class="php plain">-&gt;andWhere(</code><code class="php string">'j.category = :category_id'</code><code class="php plain">)</code></div><div class="line number30 index29 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">-&gt;setParameter(</code><code class="php string">'category_id'</code><code class="php plain">, </code><code class="php variable">$category_id</code><code class="php plain">);</code></div><div class="line number31 index30 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">}</code></div><div class="line number32 index31 alt1">&nbsp;</div><div class="line number33 index32 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php variable">$query</code> <code class="php plain">= </code><code class="php variable">$qb</code><code class="php plain">-&gt;getQuery();</code></div><div class="line number34 index33 alt1">&nbsp;</div><div class="line number35 index34 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php keyword">return</code> <code class="php variable">$query</code><code class="php plain">-&gt;getResult();</code></div><div class="line number36 index35 alt1"><code class="php spaces">&nbsp;&nbsp;</code><code class="php plain">}</code></div><div class="line number37 index36 alt2">&nbsp;</div><div class="line number38 index37 alt1"><code class="php spaces">&nbsp;&nbsp;</code><code class="php keyword">public</code> <code class="php keyword">function</code> <code class="php plain">countActiveJobs(</code><code class="php variable">$category_id</code> <code class="php plain">= null)</code></div><div class="line number39 index38 alt2"><code class="php spaces">&nbsp;&nbsp;</code><code class="php plain">{</code></div><div class="line number40 index39 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php variable">$qb</code> <code class="php plain">= </code><code class="php variable">$this</code><code class="php plain">-&gt;createQueryBuilder(</code><code class="php string">'j'</code><code class="php plain">)</code></div><div class="line number41 index40 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">-&gt;select(</code><code class="php string">'count(j.id)'</code><code class="php plain">)</code></div><div class="line number42 index41 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">-&gt;where(</code><code class="php string">'j.expires_at &gt; :date'</code><code class="php plain">)</code></div><div class="line number43 index42 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">-&gt;setParameter(</code><code class="php string">'date'</code><code class="php plain">, </code><code class="php functions">date</code><code class="php plain">(</code><code class="php string">'Y-m-d H:i:s'</code><code class="php plain">, time()))</code></div><div class="line number44 index43 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">-&gt;andWhere(</code><code class="php string">'j.is_activated = :activated'</code><code class="php plain">)</code></div><div class="line number45 index44 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">-&gt;setParameter(</code><code class="php string">'activated'</code><code class="php plain">, 1);</code></div><div class="line number46 index45 alt1">&nbsp;</div><div class="line number47 index46 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php keyword">if</code><code class="php plain">(</code><code class="php variable">$category_id</code><code class="php plain">)</code></div><div class="line number48 index47 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">{</code></div><div class="line number49 index48 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php variable">$qb</code><code class="php plain">-&gt;andWhere(</code><code class="php string">'j.category = :category_id'</code><code class="php plain">)</code></div><div class="line number50 index49 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">-&gt;setParameter(</code><code class="php string">'category_id'</code><code class="php plain">, </code><code class="php variable">$category_id</code><code class="php plain">);</code></div><div class="line number51 index50 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">}</code></div><div class="line number52 index51 alt1">&nbsp;</div><div class="line number53 index52 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php variable">$query</code> <code class="php plain">= </code><code class="php variable">$qb</code><code class="php plain">-&gt;getQuery();</code></div><div class="line number54 index53 alt1">&nbsp;</div><div class="line number55 index54 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php keyword">return</code> <code class="php variable">$query</code><code class="php plain">-&gt;getSingleScalarResult();</code></div><div class="line number56 index55 alt1"><code class="php spaces">&nbsp;&nbsp;</code><code class="php plain">}</code></div><div class="line number57 index56 alt2">&nbsp;</div><div class="line number58 index57 alt1"><code class="php spaces">&nbsp;&nbsp;</code><code class="php keyword">public</code> <code class="php keyword">function</code> <code class="php plain">getActiveJob(</code><code class="php variable">$id</code><code class="php plain">)</code></div><div class="line number59 index58 alt2"><code class="php spaces">&nbsp;&nbsp;</code><code class="php plain">{</code></div><div class="line number60 index59 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php variable">$query</code> <code class="php plain">= </code><code class="php variable">$this</code><code class="php plain">-&gt;createQueryBuilder(</code><code class="php string">'j'</code><code class="php plain">)</code></div><div class="line number61 index60 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">-&gt;where(</code><code class="php string">'j.id = :id'</code><code class="php plain">)</code></div><div class="line number62 index61 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">-&gt;setParameter(</code><code class="php string">'id'</code><code class="php plain">, </code><code class="php variable">$id</code><code class="php plain">)</code></div><div class="line number63 index62 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">-&gt;andWhere(</code><code class="php string">'j.expires_at &gt; :date'</code><code class="php plain">)</code></div><div class="line number64 index63 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">-&gt;setParameter(</code><code class="php string">'date'</code><code class="php plain">, </code><code class="php functions">date</code><code class="php plain">(</code><code class="php string">'Y-m-d H:i:s'</code><code class="php plain">, time()))</code></div><div class="line number65 index64 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">-&gt;andWhere(</code><code class="php string">'j.is_activated = :activated'</code><code class="php plain">)</code></div><div class="line number66 index65 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">-&gt;setParameter(</code><code class="php string">'activated'</code><code class="php plain">, 1)</code></div><div class="line number67 index66 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">-&gt;setMaxResults(1)</code></div><div class="line number68 index67 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">-&gt;getQuery();</code></div><div class="line number69 index68 alt2">&nbsp;</div><div class="line number70 index69 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php keyword">try</code> <code class="php plain">{</code></div><div class="line number71 index70 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php variable">$job</code> <code class="php plain">= </code><code class="php variable">$query</code><code class="php plain">-&gt;getSingleResult();</code></div><div class="line number72 index71 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">} </code><code class="php keyword">catch</code> <code class="php plain">(\Doctrine\Orm\NoResultException </code><code class="php variable">$e</code><code class="php plain">) {</code></div><div class="line number73 index72 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php variable">$job</code> <code class="php plain">= null;</code></div><div class="line number74 index73 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">}</code></div><div class="line number75 index74 alt2">&nbsp;</div><div class="line number76 index75 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php keyword">return</code> <code class="php variable">$job</code><code class="php plain">;</code></div><div class="line number77 index76 alt2"><code class="php spaces">&nbsp;&nbsp;</code><code class="php plain">}</code></div><div class="line number78 index77 alt1"><code class="php plain">}</code></div></div></td></tr></tbody></table></div></div>
<p>The same for <code>CategoryRepository</code> <code>getWithJobs()</code> method:</p>
<div><div id="highlighter_853169" class="syntaxhighlighter  php"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div><div class="line number7 index6 alt2">7</div><div class="line number8 index7 alt1">8</div><div class="line number9 index8 alt2">9</div><div class="line number10 index9 alt1">10</div><div class="line number11 index10 alt2">11</div><div class="line number12 index11 alt1">12</div><div class="line number13 index12 alt2">13</div><div class="line number14 index13 alt1">14</div><div class="line number15 index14 alt2">15</div><div class="line number16 index15 alt1">16</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="php comments">// src/Ens/JobeetBundle/Repository/CategoryRepository.php</code></div><div class="line number2 index1 alt1">&nbsp;</div><div class="line number3 index2 alt2"><code class="php keyword">namespace</code> <code class="php plain">Ens\JobeetBundle\Repository;</code></div><div class="line number4 index3 alt1"><code class="php keyword">use</code> <code class="php plain">Doctrine\ORM\EntityRepository;</code></div><div class="line number5 index4 alt2">&nbsp;</div><div class="line number6 index5 alt1"><code class="php keyword">class</code> <code class="php plain">CategoryRepository </code><code class="php keyword">extends</code> <code class="php plain">EntityRepository</code></div><div class="line number7 index6 alt2"><code class="php plain">{</code></div><div class="line number8 index7 alt1"><code class="php spaces">&nbsp;&nbsp;</code><code class="php keyword">public</code> <code class="php keyword">function</code> <code class="php plain">getWithJobs()</code></div><div class="line number9 index8 alt2"><code class="php spaces">&nbsp;&nbsp;</code><code class="php plain">{</code></div><div class="line number10 index9 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php variable">$query</code> <code class="php plain">= </code><code class="php variable">$this</code><code class="php plain">-&gt;getEntityManager()-&gt;createQuery(</code></div><div class="line number11 index10 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php string">'SELECT c FROM EnsJobeetBundle:Category c LEFT JOIN c.jobs j WHERE j.expires_at &gt; :date AND j.is_activated = :activated'</code></div><div class="line number12 index11 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">)-&gt;setParameter(</code><code class="php string">'date'</code><code class="php plain">, </code><code class="php functions">date</code><code class="php plain">(</code><code class="php string">'Y-m-d H:i:s'</code><code class="php plain">, time()))-&gt;setParameter(</code><code class="php string">'activated'</code><code class="php plain">, 1);</code></div><div class="line number13 index12 alt2">&nbsp;</div><div class="line number14 index13 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php keyword">return</code> <code class="php variable">$query</code><code class="php plain">-&gt;getResult();</code></div><div class="line number15 index14 alt2"><code class="php spaces">&nbsp;&nbsp;</code><code class="php plain">}</code></div><div class="line number16 index15 alt1"><code class="php plain">}</code></div></div></td></tr></tbody></table></div></div>
<p>That’s all. You can test it now in your browser. All non-activated jobs have disappeared from the homepage; even if you know their URLs, they are not accessible anymore. They are, however, accessible if one knows the job’s token URL. In that case, the job preview will show up with the admin bar.</p>
<p style="float: right;"><a title="Symfony2 Jobeet Day 11: Testing your Forms" href="http://www.ens.ro/2012/06/22/symfony2-jobeet-day-11-testing-your-forms/">Symfony2 Jobeet Day 11: Testing your Forms</a></p>
<p style="float: left;"><a title="Symfony2 Jobeet Day 9: The Functional Tests" href="http://www.ens.ro/2012/04/25/symfony2-jobeet-day-9-the-functional-tests/">Symfony2 Jobeet Day 9: The Functional Tests</a></p>
			</div><!-- .entry-content -->

	<footer class="entry-meta">
		This entry was posted in <a href="http://www.ens.ro/category/english/" title="View all posts in English" rel="category tag">English</a>, <a href="http://www.ens.ro/category/web-development/php/" title="View all posts in PHP" rel="category tag">PHP</a>, <a href="http://www.ens.ro/category/web-development/" title="View all posts in Web Development" rel="category tag">Web Development</a> and tagged <a href="http://www.ens.ro/tag/symfony2-jobeet/" rel="tag">symfony2 jobeet</a> by <a href="http://www.ens.ro/author/dragos/">Dragos Holban</a>. Bookmark the <a href="./Symfony2 Jobeet Day 10  The Forms   ENS_files/Symfony2 Jobeet Day 10  The Forms   ENS.htm" title="Permalink to Symfony2 Jobeet Day 10: The Forms" rel="bookmark">permalink</a>.		
			</footer><!-- .entry-meta -->
</article><!-- #post-1271 -->

						<div id="comments">
	
	
			<h2 id="comments-title">
			36 thoughts on “<span>Symfony2 Jobeet Day 10: The Forms</span>”		</h2>

		
		<ol class="commentlist">
				<li class="comment even thread-even depth-1" id="li-comment-358">
		<article id="comment-358" class="comment">
			<footer class="comment-meta">
				<div class="comment-author vcard">
					<img alt="" src="./Symfony2 Jobeet Day 10  The Forms   ENS_files/61f1acb02718f4300f1171f9a92d39f1" class="avatar avatar-68 photo" height="68" width="68"><span class="fn">Thorsten</span> on <a href="http://www.ens.ro/2012/05/17/symfony2-jobeet-day-10-the-forms/#comment-358"><time datetime="2012-05-17T12:44:49+00:00">May 17, 2012 at 12:44 pm</time></a> <span class="says">said:</span>
									</div><!-- .comment-author .vcard -->

				
			</footer>

			<div class="comment-content"><p>Great Tutorial! Also if i know the Symfony2 Basics i like reading this because you always find out some new points that you didn’t know so far. Thank you</p>
</div>

			<div class="reply">
				<a class="comment-reply-link" href="http://www.ens.ro/2012/05/17/symfony2-jobeet-day-10-the-forms/?replytocom=358#respond" onclick="return addComment.moveForm(&quot;comment-358&quot;, &quot;358&quot;, &quot;respond&quot;, &quot;1271&quot;)">Reply <span>↓</span></a>			</div><!-- .reply -->
		</article><!-- #comment-## -->

	</li>
	<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-371">
		<article id="comment-371" class="comment">
			<footer class="comment-meta">
				<div class="comment-author vcard">
					<img alt="" src="./Symfony2 Jobeet Day 10  The Forms   ENS_files/4c8a9bec5a27b66b28d3c5cddeb70e93" class="avatar avatar-68 photo" height="68" width="68"><span class="fn">ok!</span> on <a href="http://www.ens.ro/2012/05/17/symfony2-jobeet-day-10-the-forms/#comment-371"><time datetime="2012-05-19T13:51:27+00:00">May 19, 2012 at 1:51 pm</time></a> <span class="says">said:</span>
									</div><!-- .comment-author .vcard -->

				
			</footer>

			<div class="comment-content"><p>very, very thanks for this tutorial! im waiting for next days!</p>
</div>

			<div class="reply">
				<a class="comment-reply-link" href="http://www.ens.ro/2012/05/17/symfony2-jobeet-day-10-the-forms/?replytocom=371#respond" onclick="return addComment.moveForm(&quot;comment-371&quot;, &quot;371&quot;, &quot;respond&quot;, &quot;1271&quot;)">Reply <span>↓</span></a>			</div><!-- .reply -->
		</article><!-- #comment-## -->

	</li>
	<li class="comment even thread-even depth-1" id="li-comment-433">
		<article id="comment-433" class="comment">
			<footer class="comment-meta">
				<div class="comment-author vcard">
					<img alt="" src="./Symfony2 Jobeet Day 10  The Forms   ENS_files/2c9190fd4108af30a2f539d8910646ee" class="avatar avatar-68 photo" height="68" width="68"><span class="fn">Keith</span> on <a href="http://www.ens.ro/2012/05/17/symfony2-jobeet-day-10-the-forms/#comment-433"><time datetime="2012-05-24T17:49:09+00:00">May 24, 2012 at 5:49 pm</time></a> <span class="says">said:</span>
									</div><!-- .comment-author .vcard -->

				
			</footer>

			<div class="comment-content"><p>This is a great tutorial, what I am looking for in interest is how you will handle the different user types</p>
</div>

			<div class="reply">
				<a class="comment-reply-link" href="http://www.ens.ro/2012/05/17/symfony2-jobeet-day-10-the-forms/?replytocom=433#respond" onclick="return addComment.moveForm(&quot;comment-433&quot;, &quot;433&quot;, &quot;respond&quot;, &quot;1271&quot;)">Reply <span>↓</span></a>			</div><!-- .reply -->
		</article><!-- #comment-## -->

	<ul class="children">
	<li class="comment byuser comment-author-dragos bypostauthor odd alt depth-2" id="li-comment-437">
		<article id="comment-437" class="comment">
			<footer class="comment-meta">
				<div class="comment-author vcard">
					<img alt="" src="./Symfony2 Jobeet Day 10  The Forms   ENS_files/5aad75a3a109bfbbb1f7eeac6959918b" class="avatar avatar-39 photo" height="39" width="39"><span class="fn">Dragos Holban</span> on <a href="http://www.ens.ro/2012/05/17/symfony2-jobeet-day-10-the-forms/#comment-437"><time datetime="2012-05-24T21:45:18+00:00">May 24, 2012 at 9:45 pm</time></a> <span class="says">said:</span>
									</div><!-- .comment-author .vcard -->

				
			</footer>

			<div class="comment-content"><p>I will follow the original Jobeet tutorial for Symfony so in Day 13 we will take a look at the authentication and authorization process for Symfony2.</p>
</div>

			<div class="reply">
				<a class="comment-reply-link" href="http://www.ens.ro/2012/05/17/symfony2-jobeet-day-10-the-forms/?replytocom=437#respond" onclick="return addComment.moveForm(&quot;comment-437&quot;, &quot;437&quot;, &quot;respond&quot;, &quot;1271&quot;)">Reply <span>↓</span></a>			</div><!-- .reply -->
		</article><!-- #comment-## -->

	<ul class="children">
	<li class="comment even depth-3" id="li-comment-439">
		<article id="comment-439" class="comment">
			<footer class="comment-meta">
				<div class="comment-author vcard">
					<img alt="" src="./Symfony2 Jobeet Day 10  The Forms   ENS_files/0eac0536e9edb4564560b0cd5531cc03" class="avatar avatar-39 photo" height="39" width="39"><span class="fn">Kevin</span> on <a href="http://www.ens.ro/2012/05/17/symfony2-jobeet-day-10-the-forms/#comment-439"><time datetime="2012-05-25T00:42:21+00:00">May 25, 2012 at 12:42 am</time></a> <span class="says">said:</span>
									</div><!-- .comment-author .vcard -->

				
			</footer>

			<div class="comment-content"><p>now 13 lesson? why don’t you do the lessons of Admin Generator?</p>
</div>

			<div class="reply">
				<a class="comment-reply-link" href="http://www.ens.ro/2012/05/17/symfony2-jobeet-day-10-the-forms/?replytocom=439#respond" onclick="return addComment.moveForm(&quot;comment-439&quot;, &quot;439&quot;, &quot;respond&quot;, &quot;1271&quot;)">Reply <span>↓</span></a>			</div><!-- .reply -->
		</article><!-- #comment-## -->

	</li>
	<li class="comment odd alt depth-3" id="li-comment-621">
		<article id="comment-621" class="comment">
			<footer class="comment-meta">
				<div class="comment-author vcard">
					<img alt="" src="./Symfony2 Jobeet Day 10  The Forms   ENS_files/ff1ad4ca2648ab808fcccbc6c419011d" class="avatar avatar-39 photo" height="39" width="39"><span class="fn">Nate</span> on <a href="http://www.ens.ro/2012/05/17/symfony2-jobeet-day-10-the-forms/#comment-621"><time datetime="2012-06-10T17:48:38+00:00">June 10, 2012 at 5:48 pm</time></a> <span class="says">said:</span>
									</div><!-- .comment-author .vcard -->

				
			</footer>

			<div class="comment-content"><p>Definitely looking forward to this tutorial. Please release it soon <img src="./Symfony2 Jobeet Day 10  The Forms   ENS_files/icon_smile.gif" alt=":)" class="wp-smiley"> </p>
</div>

			<div class="reply">
				<a class="comment-reply-link" href="http://www.ens.ro/2012/05/17/symfony2-jobeet-day-10-the-forms/?replytocom=621#respond" onclick="return addComment.moveForm(&quot;comment-621&quot;, &quot;621&quot;, &quot;respond&quot;, &quot;1271&quot;)">Reply <span>↓</span></a>			</div><!-- .reply -->
		</article><!-- #comment-## -->

	</li>
</ul>
</li>
</ul>
</li>
	<li class="comment even thread-odd thread-alt depth-1" id="li-comment-561">
		<article id="comment-561" class="comment">
			<footer class="comment-meta">
				<div class="comment-author vcard">
					<img alt="" src="./Symfony2 Jobeet Day 10  The Forms   ENS_files/421539ef3acb95521f51a5c612ae4938" class="avatar avatar-68 photo" height="68" width="68"><span class="fn">PS91</span> on <a href="http://www.ens.ro/2012/05/17/symfony2-jobeet-day-10-the-forms/#comment-561"><time datetime="2012-06-06T12:07:36+00:00">June 6, 2012 at 12:07 pm</time></a> <span class="says">said:</span>
									</div><!-- .comment-author .vcard -->

				
			</footer>

			<div class="comment-content"><p>Hi, I’m get to the part where I change in edit.hmtl.twig the following lines:</p>
<p><!-- ... --></p>
<p>The first one I find and replace but the other (delete) I can’t find in that page, did I forget to add some code?</p>
</div>

			<div class="reply">
				<a class="comment-reply-link" href="http://www.ens.ro/2012/05/17/symfony2-jobeet-day-10-the-forms/?replytocom=561#respond" onclick="return addComment.moveForm(&quot;comment-561&quot;, &quot;561&quot;, &quot;respond&quot;, &quot;1271&quot;)">Reply <span>↓</span></a>			</div><!-- .reply -->
		</article><!-- #comment-## -->

	</li>
	<li class="comment odd alt thread-even depth-1" id="li-comment-562">
		<article id="comment-562" class="comment">
			<footer class="comment-meta">
				<div class="comment-author vcard">
					<img alt="" src="./Symfony2 Jobeet Day 10  The Forms   ENS_files/421539ef3acb95521f51a5c612ae4938" class="avatar avatar-68 photo" height="68" width="68"><span class="fn">PS91</span> on <a href="http://www.ens.ro/2012/05/17/symfony2-jobeet-day-10-the-forms/#comment-562"><time datetime="2012-06-06T12:08:22+00:00">June 6, 2012 at 12:08 pm</time></a> <span class="says">said:</span>
									</div><!-- .comment-author .vcard -->

				
			</footer>

			<div class="comment-content"><p>form action=”{{ path(‘ens_job_update’, { ‘token’: entity.token }) }}” method=”post” {{ form_enctype(edit_form) }}</p>
<p>form action=”{{ path(‘ens_job_delete’, { ‘token’: entity.token }) }}” method=”post”</p>
<p>This are the lines.</p>
</div>

			<div class="reply">
				<a class="comment-reply-link" href="http://www.ens.ro/2012/05/17/symfony2-jobeet-day-10-the-forms/?replytocom=562#respond" onclick="return addComment.moveForm(&quot;comment-562&quot;, &quot;562&quot;, &quot;respond&quot;, &quot;1271&quot;)">Reply <span>↓</span></a>			</div><!-- .reply -->
		</article><!-- #comment-## -->

	<ul class="children">
	<li class="comment byuser comment-author-dragos bypostauthor even depth-2" id="li-comment-570">
		<article id="comment-570" class="comment">
			<footer class="comment-meta">
				<div class="comment-author vcard">
					<img alt="" src="./Symfony2 Jobeet Day 10  The Forms   ENS_files/5aad75a3a109bfbbb1f7eeac6959918b" class="avatar avatar-39 photo" height="39" width="39"><span class="fn">Dragos Holban</span> on <a href="http://www.ens.ro/2012/05/17/symfony2-jobeet-day-10-the-forms/#comment-570"><time datetime="2012-06-06T16:14:29+00:00">June 6, 2012 at 4:14 pm</time></a> <span class="says">said:</span>
									</div><!-- .comment-author .vcard -->

				
			</footer>

			<div class="comment-content"><p>There is no ens_job_delete route in the edit.html.twig template. I updated the code. Thanks!</p>
</div>

			<div class="reply">
				<a class="comment-reply-link" href="http://www.ens.ro/2012/05/17/symfony2-jobeet-day-10-the-forms/?replytocom=570#respond" onclick="return addComment.moveForm(&quot;comment-570&quot;, &quot;570&quot;, &quot;respond&quot;, &quot;1271&quot;)">Reply <span>↓</span></a>			</div><!-- .reply -->
		</article><!-- #comment-## -->

	</li>
</ul>
</li>
	<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-563">
		<article id="comment-563" class="comment">
			<footer class="comment-meta">
				<div class="comment-author vcard">
					<img alt="" src="./Symfony2 Jobeet Day 10  The Forms   ENS_files/421539ef3acb95521f51a5c612ae4938" class="avatar avatar-68 photo" height="68" width="68"><span class="fn">PS91</span> on <a href="http://www.ens.ro/2012/05/17/symfony2-jobeet-day-10-the-forms/#comment-563"><time datetime="2012-06-06T13:10:51+00:00">June 6, 2012 at 1:10 pm</time></a> <span class="says">said:</span>
									</div><!-- .comment-author .vcard -->

				
			</footer>

			<div class="comment-content"><p>Also I put the form on the admin.html.twig for the publish but I have the errro that publish_form doesn’t exist. :s What could it be?</p>
</div>

			<div class="reply">
				<a class="comment-reply-link" href="http://www.ens.ro/2012/05/17/symfony2-jobeet-day-10-the-forms/?replytocom=563#respond" onclick="return addComment.moveForm(&quot;comment-563&quot;, &quot;563&quot;, &quot;respond&quot;, &quot;1271&quot;)">Reply <span>↓</span></a>			</div><!-- .reply -->
		</article><!-- #comment-## -->

	<ul class="children">
	<li class="comment even depth-2" id="li-comment-565">
		<article id="comment-565" class="comment">
			<footer class="comment-meta">
				<div class="comment-author vcard">
					<img alt="" src="./Symfony2 Jobeet Day 10  The Forms   ENS_files/421539ef3acb95521f51a5c612ae4938(1)" class="avatar avatar-39 photo" height="39" width="39"><span class="fn">PS91</span> on <a href="http://www.ens.ro/2012/05/17/symfony2-jobeet-day-10-the-forms/#comment-565"><time datetime="2012-06-06T14:11:22+00:00">June 6, 2012 at 2:11 pm</time></a> <span class="says">said:</span>
									</div><!-- .comment-author .vcard -->

				
			</footer>

			<div class="comment-content"><p>I found the problem, in your tutorial you say do add the following lines in the preview action:<br>
$deleteForm = $this-&gt;createDeleteForm($entity-&gt;getId());<br>
 $publishForm = $this-&gt;createDeleteForm($entity-&gt;getToken());</p>
<p>but you forget to say to add also in the return this:</p>
<p>‘publish_form’ =&gt; $publishForm-&gt;createView(),</p>
<p>I already add and now its working.</p>
</div>

			<div class="reply">
				<a class="comment-reply-link" href="http://www.ens.ro/2012/05/17/symfony2-jobeet-day-10-the-forms/?replytocom=565#respond" onclick="return addComment.moveForm(&quot;comment-565&quot;, &quot;565&quot;, &quot;respond&quot;, &quot;1271&quot;)">Reply <span>↓</span></a>			</div><!-- .reply -->
		</article><!-- #comment-## -->

	<ul class="children">
	<li class="comment odd alt depth-3" id="li-comment-567">
		<article id="comment-567" class="comment">
			<footer class="comment-meta">
				<div class="comment-author vcard">
					<img alt="" src="./Symfony2 Jobeet Day 10  The Forms   ENS_files/421539ef3acb95521f51a5c612ae4938(1)" class="avatar avatar-39 photo" height="39" width="39"><span class="fn">PS91</span> on <a href="http://www.ens.ro/2012/05/17/symfony2-jobeet-day-10-the-forms/#comment-567"><time datetime="2012-06-06T14:19:59+00:00">June 6, 2012 at 2:19 pm</time></a> <span class="says">said:</span>
									</div><!-- .comment-author .vcard -->

				
			</footer>

			<div class="comment-content"><p>And here<br>
$publishForm=$this-&gt;createDeleteForm($entity-&gt;getToken());<br>
should be </p>
<p>$publishForm=$this-&gt;createPublishForm($entity-&gt;getToken());</p>
<p>right?</p>
</div>

			<div class="reply">
				<a class="comment-reply-link" href="http://www.ens.ro/2012/05/17/symfony2-jobeet-day-10-the-forms/?replytocom=567#respond" onclick="return addComment.moveForm(&quot;comment-567&quot;, &quot;567&quot;, &quot;respond&quot;, &quot;1271&quot;)">Reply <span>↓</span></a>			</div><!-- .reply -->
		</article><!-- #comment-## -->

	<ul class="children">
	<li class="comment byuser comment-author-dragos bypostauthor even depth-4" id="li-comment-569">
		<article id="comment-569" class="comment">
			<footer class="comment-meta">
				<div class="comment-author vcard">
					<img alt="" src="./Symfony2 Jobeet Day 10  The Forms   ENS_files/5aad75a3a109bfbbb1f7eeac6959918b" class="avatar avatar-39 photo" height="39" width="39"><span class="fn">Dragos Holban</span> on <a href="http://www.ens.ro/2012/05/17/symfony2-jobeet-day-10-the-forms/#comment-569"><time datetime="2012-06-06T15:30:42+00:00">June 6, 2012 at 3:30 pm</time></a> <span class="says">said:</span>
									</div><!-- .comment-author .vcard -->

				
			</footer>

			<div class="comment-content"><p>Yes, you are right! Thanks for pointing this out, I updated the code.</p>
</div>

			<div class="reply">
				<a class="comment-reply-link" href="http://www.ens.ro/2012/05/17/symfony2-jobeet-day-10-the-forms/?replytocom=569#respond" onclick="return addComment.moveForm(&quot;comment-569&quot;, &quot;569&quot;, &quot;respond&quot;, &quot;1271&quot;)">Reply <span>↓</span></a>			</div><!-- .reply -->
		</article><!-- #comment-## -->

	</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
	<li class="comment odd alt thread-even depth-1" id="li-comment-1632">
		<article id="comment-1632" class="comment">
			<footer class="comment-meta">
				<div class="comment-author vcard">
					<img alt="" src="./Symfony2 Jobeet Day 10  The Forms   ENS_files/ba75f753efe49164efbe717814d25d2e" class="avatar avatar-68 photo" height="68" width="68"><span class="fn">nobody</span> on <a href="http://www.ens.ro/2012/05/17/symfony2-jobeet-day-10-the-forms/#comment-1632"><time datetime="2012-08-06T17:58:37+00:00">August 6, 2012 at 5:58 pm</time></a> <span class="says">said:</span>
									</div><!-- .comment-author .vcard -->

				
			</footer>

			<div class="comment-content"><p>Well, typo are limited to “/src/” -&gt; “src/” (not big).</p>
<p>I know the probability is low, but I think check if the token generated is unique and remove the edit possibility (when show) are required for real use.</p>
<p>good job.</p>
</div>

			<div class="reply">
				<a class="comment-reply-link" href="http://www.ens.ro/2012/05/17/symfony2-jobeet-day-10-the-forms/?replytocom=1632#respond" onclick="return addComment.moveForm(&quot;comment-1632&quot;, &quot;1632&quot;, &quot;respond&quot;, &quot;1271&quot;)">Reply <span>↓</span></a>			</div><!-- .reply -->
		</article><!-- #comment-## -->

	</li>
	<li class="comment even thread-odd thread-alt depth-1" id="li-comment-2010">
		<article id="comment-2010" class="comment">
			<footer class="comment-meta">
				<div class="comment-author vcard">
					<img alt="" src="./Symfony2 Jobeet Day 10  The Forms   ENS_files/1c48c9db0d330cdf1ecb7cf4fbbe2400" class="avatar avatar-68 photo" height="68" width="68"><span class="fn">creati5</span> on <a href="http://www.ens.ro/2012/05/17/symfony2-jobeet-day-10-the-forms/#comment-2010"><time datetime="2012-08-21T09:41:41+00:00">August 21, 2012 at 9:41 am</time></a> <span class="says">said:</span>
									</div><!-- .comment-author .vcard -->

				
			</footer>

			<div class="comment-content"><p>great works. really loving it.</p>
</div>

			<div class="reply">
				<a class="comment-reply-link" href="http://www.ens.ro/2012/05/17/symfony2-jobeet-day-10-the-forms/?replytocom=2010#respond" onclick="return addComment.moveForm(&quot;comment-2010&quot;, &quot;2010&quot;, &quot;respond&quot;, &quot;1271&quot;)">Reply <span>↓</span></a>			</div><!-- .reply -->
		</article><!-- #comment-## -->

	</li>
	<li class="comment odd alt thread-even depth-1" id="li-comment-2462">
		<article id="comment-2462" class="comment">
			<footer class="comment-meta">
				<div class="comment-author vcard">
					<img alt="" src="./Symfony2 Jobeet Day 10  The Forms   ENS_files/965b2433b9a49ea56ba0359a1cc8ca92" class="avatar avatar-68 photo" height="68" width="68"><span class="fn">Scott</span> on <a href="http://www.ens.ro/2012/05/17/symfony2-jobeet-day-10-the-forms/#comment-2462"><time datetime="2012-09-17T19:43:21+00:00">September 17, 2012 at 7:43 pm</time></a> <span class="says">said:</span>
									</div><!-- .comment-author .vcard -->

				
			</footer>

			<div class="comment-content"><p>This is freaking awesome. I think part of it is actually better than the original.</p>
<p>I have one minor issue that I think is a caching thing. </p>
<p>If I try to upload a new image on a Job that has already been created it does not show up in the preview if I only change the image.</p>
<p>If I change ANY other field as well as the image then the preview image shows up correctly. </p>
<p>I will try to troubleshoot it and if i find a fix add it to the comments but has anyone else had and fixed this issue?</p>
<p>AWESOME Tutorial Series thanks a bazzillion for doing it.</p>
</div>

			<div class="reply">
				<a class="comment-reply-link" href="http://www.ens.ro/2012/05/17/symfony2-jobeet-day-10-the-forms/?replytocom=2462#respond" onclick="return addComment.moveForm(&quot;comment-2462&quot;, &quot;2462&quot;, &quot;respond&quot;, &quot;1271&quot;)">Reply <span>↓</span></a>			</div><!-- .reply -->
		</article><!-- #comment-## -->

	<ul class="children">
	<li class="comment byuser comment-author-dragos bypostauthor even depth-2" id="li-comment-2474">
		<article id="comment-2474" class="comment">
			<footer class="comment-meta">
				<div class="comment-author vcard">
					<img alt="" src="./Symfony2 Jobeet Day 10  The Forms   ENS_files/5aad75a3a109bfbbb1f7eeac6959918b" class="avatar avatar-39 photo" height="39" width="39"><span class="fn">Dragos Holban</span> on <a href="http://www.ens.ro/2012/05/17/symfony2-jobeet-day-10-the-forms/#comment-2474"><time datetime="2012-09-18T09:46:25+00:00">September 18, 2012 at 9:46 am</time></a> <span class="says">said:</span>
									</div><!-- .comment-author .vcard -->

				
			</footer>

			<div class="comment-content"><p>Yes, that’s a problem I encountered later. It’s a Doctrine issue, one solution is to change the tracking policy. You can read about this here: <a href="http://docs.doctrine-project.org/projects/doctrine-orm/en/2.0.x/reference/change-tracking-policies.html" onclick="javascript:_gaq.push([&#39;_trackEvent&#39;,&#39;outbound-comment&#39;,&#39;http://docs.doctrine-project.org&#39;]);" rel="nofollow">http://docs.doctrine-project.org/projects/doctrine-orm/en/2.0.x/reference/change-tracking-policies.html</a></p>
<p>Maybe you can try to change the policy to “deferred implicit” and let us know how this goes. I’m sorry but I don’t have time to test this myself.</p>
</div>

			<div class="reply">
				<a class="comment-reply-link" href="http://www.ens.ro/2012/05/17/symfony2-jobeet-day-10-the-forms/?replytocom=2474#respond" onclick="return addComment.moveForm(&quot;comment-2474&quot;, &quot;2474&quot;, &quot;respond&quot;, &quot;1271&quot;)">Reply <span>↓</span></a>			</div><!-- .reply -->
		</article><!-- #comment-## -->

	<ul class="children">
	<li class="comment odd alt depth-3" id="li-comment-2485">
		<article id="comment-2485" class="comment">
			<footer class="comment-meta">
				<div class="comment-author vcard">
					<img alt="" src="./Symfony2 Jobeet Day 10  The Forms   ENS_files/965b2433b9a49ea56ba0359a1cc8ca92(1)" class="avatar avatar-39 photo" height="39" width="39"><span class="fn">Scott</span> on <a href="http://www.ens.ro/2012/05/17/symfony2-jobeet-day-10-the-forms/#comment-2485"><time datetime="2012-09-19T07:57:24+00:00">September 19, 2012 at 7:57 am</time></a> <span class="says">said:</span>
									</div><!-- .comment-author .vcard -->

				
			</footer>

			<div class="comment-content"><p>the change tracking thing did not work. I did however find a solution.</p>
<p>“file” is not handled by doctrine so if you only change the file and nothing else none of the life cycle callbacks work.</p>
<p>The solution is to trigger $entity-preUpload() manually before the $em-persist($entity);</p>
<p>In jobController.php </p>
<p> public function updateAction($token) {…<br>
…<br>
…<br>
   if ($editForm-&gt;isValid()) {<br>
            // manually call preUpload()<br>
            $entity-&gt;preUpload();<br>
            $em-&gt;persist($entity);<br>
            $em-&gt;flush();<br>
…<br>
}</p>
<p>and in Job.php</p>
<p>  /**<br>
    * @ORM\PrePersist<br>
    */<br>
    public function preUpload()<br>
    {<br>
        // added updated at field to trigger doctrine callbacks<br>
        $this-&gt;setUpdatedAt(new \DateTime(‘now’));</p>
<p>        if (null !== $this-&gt;file) {<br>
            // do whatever you want to generate a unique name<br>
            $this-&gt;logo = uniqid().’.’.$this-&gt;file-&gt;guessExtension();<br>
        }<br>
    }</p>
<p>That’s a combination of what I found. I’ve tested it and it works great.  I hope it helps someone.</p>
</div>

			<div class="reply">
				<a class="comment-reply-link" href="http://www.ens.ro/2012/05/17/symfony2-jobeet-day-10-the-forms/?replytocom=2485#respond" onclick="return addComment.moveForm(&quot;comment-2485&quot;, &quot;2485&quot;, &quot;respond&quot;, &quot;1271&quot;)">Reply <span>↓</span></a>			</div><!-- .reply -->
		</article><!-- #comment-## -->

	<ul class="children">
	<li class="comment even depth-4" id="li-comment-47479">
		<article id="comment-47479" class="comment">
			<footer class="comment-meta">
				<div class="comment-author vcard">
					<img alt="" src="./Symfony2 Jobeet Day 10  The Forms   ENS_files/7868cee3479e35be6ef88584f6c88207" class="avatar avatar-39 photo" height="39" width="39"><span class="fn">ketan</span> on <a href="http://www.ens.ro/2012/05/17/symfony2-jobeet-day-10-the-forms/#comment-47479"><time datetime="2013-05-04T12:31:51+00:00">May 4, 2013 at 12:31 pm</time></a> <span class="says">said:</span>
									</div><!-- .comment-author .vcard -->

				
			</footer>

			<div class="comment-content"><p>$entity-&gt;preUpload(); i am use but don’t remove old image.some change $entity-&gt;Upload(); use and full working this.</p>
</div>

			<div class="reply">
				<a class="comment-reply-link" href="http://www.ens.ro/2012/05/17/symfony2-jobeet-day-10-the-forms/?replytocom=47479#respond" onclick="return addComment.moveForm(&quot;comment-47479&quot;, &quot;47479&quot;, &quot;respond&quot;, &quot;1271&quot;)">Reply <span>↓</span></a>			</div><!-- .reply -->
		</article><!-- #comment-## -->

	</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
	<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-2473">
		<article id="comment-2473" class="comment">
			<footer class="comment-meta">
				<div class="comment-author vcard">
					<img alt="" src="./Symfony2 Jobeet Day 10  The Forms   ENS_files/1ad9f38f56870195cd664864ae60bcb0" class="avatar avatar-68 photo" height="68" width="68"><span class="fn"><a href="http://codemassacre.com/" onclick="javascript:_gaq.push([&#39;_trackEvent&#39;,&#39;outbound-commentauthor&#39;,&#39;http://codemassacre.com&#39;]);" rel="external nofollow" class="url">Daniel Richter</a></span> on <a href="http://www.ens.ro/2012/05/17/symfony2-jobeet-day-10-the-forms/#comment-2473"><time datetime="2012-09-18T07:28:53+00:00">September 18, 2012 at 7:28 am</time></a> <span class="says">said:</span>
									</div><!-- .comment-author .vcard -->

				
			</footer>

			<div class="comment-content"><p>Hi there, </p>
<p>great tutorial overall, thanks for doing this. One thing I’m wondering, looking at the Doctrine Repository, we already define the business logic around active non-expired jobs 3x. Elsewhere we are always striving to avoid duplication, yet here we have to update 3 methods to introduce the filter on the active field.. is there no way to encapsulate query modifications to make this business logic more re-usable as well?</p>
</div>

			<div class="reply">
				<a class="comment-reply-link" href="http://www.ens.ro/2012/05/17/symfony2-jobeet-day-10-the-forms/?replytocom=2473#respond" onclick="return addComment.moveForm(&quot;comment-2473&quot;, &quot;2473&quot;, &quot;respond&quot;, &quot;1271&quot;)">Reply <span>↓</span></a>			</div><!-- .reply -->
		</article><!-- #comment-## -->

	</li>
	<li class="comment even thread-even depth-1" id="li-comment-2912">
		<article id="comment-2912" class="comment">
			<footer class="comment-meta">
				<div class="comment-author vcard">
					<img alt="" src="./Symfony2 Jobeet Day 10  The Forms   ENS_files/808cd4aab6f223059315600c7b31edc5" class="avatar avatar-68 photo" height="68" width="68"><span class="fn">Roberto Cuppone</span> on <a href="http://www.ens.ro/2012/05/17/symfony2-jobeet-day-10-the-forms/#comment-2912"><time datetime="2012-10-09T20:41:01+00:00">October 9, 2012 at 8:41 pm</time></a> <span class="says">said:</span>
									</div><!-- .comment-author .vcard -->

				
			</footer>

			<div class="comment-content"><p>In the updateAction method under the true valid form condition I see:<br>
return $this-&gt;redirect($this-&gt;generateUrl(‘ens_job_edit’, array(‘token’ =&gt; $token)));</p>
<p>shouldn’t it be in this way?</p>
<p>return $this-&gt;redirect($this-&gt;generateUrl(‘ens_job_preview’, array(‘token’ =&gt; $token)));</p>
<p>Infact in this way I remain jailed in the edit form.<br>
Thank you</p>
</div>

			<div class="reply">
				<a class="comment-reply-link" href="http://www.ens.ro/2012/05/17/symfony2-jobeet-day-10-the-forms/?replytocom=2912#respond" onclick="return addComment.moveForm(&quot;comment-2912&quot;, &quot;2912&quot;, &quot;respond&quot;, &quot;1271&quot;)">Reply <span>↓</span></a>			</div><!-- .reply -->
		</article><!-- #comment-## -->

	</li>
	<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-6034">
		<article id="comment-6034" class="comment">
			<footer class="comment-meta">
				<div class="comment-author vcard">
					<img alt="" src="./Symfony2 Jobeet Day 10  The Forms   ENS_files/f622d62affb02e0607819940cc5c0fc3" class="avatar avatar-68 photo" height="68" width="68"><span class="fn">Ovidiu</span> on <a href="http://www.ens.ro/2012/05/17/symfony2-jobeet-day-10-the-forms/#comment-6034"><time datetime="2012-11-17T22:45:39+00:00">November 17, 2012 at 10:45 pm</time></a> <span class="says">said:</span>
									</div><!-- .comment-author .vcard -->

				
			</footer>

			<div class="comment-content"><p>Salut,</p>
<p>I followed the tutorial until the token part, but when i try to access the new\job page i get this error:<br>
Fatal error: Class ‘Ens\JobeetBundle\Form\Job’ not found in C:\jobeet\src\Ens\JobeetBundle\Form\JobType.php on line 13</p>
<p>I am using symfony 2.1 and i don’t know what to do, i could not find a solution on google.</p>
<p>Thanks</p>
</div>

			<div class="reply">
				<a class="comment-reply-link" href="http://www.ens.ro/2012/05/17/symfony2-jobeet-day-10-the-forms/?replytocom=6034#respond" onclick="return addComment.moveForm(&quot;comment-6034&quot;, &quot;6034&quot;, &quot;respond&quot;, &quot;1271&quot;)">Reply <span>↓</span></a>			</div><!-- .reply -->
		</article><!-- #comment-## -->

	<ul class="children">
	<li class="comment even depth-2" id="li-comment-6035">
		<article id="comment-6035" class="comment">
			<footer class="comment-meta">
				<div class="comment-author vcard">
					<img alt="" src="./Symfony2 Jobeet Day 10  The Forms   ENS_files/f622d62affb02e0607819940cc5c0fc3(1)" class="avatar avatar-39 photo" height="39" width="39"><span class="fn">Ovidiu</span> on <a href="http://www.ens.ro/2012/05/17/symfony2-jobeet-day-10-the-forms/#comment-6035"><time datetime="2012-11-17T22:47:11+00:00">November 17, 2012 at 10:47 pm</time></a> <span class="says">said:</span>
									</div><!-- .comment-author .vcard -->

				
			</footer>

			<div class="comment-content"><p>The line is this:</p>
<p> $builder-&gt;add(‘type’, ‘choice’, array(‘choices’ =&gt; Job::getTypes(), ‘expanded’ =&gt; true));</p>
<p>and I think that it try to run the Job::getTypes from the same location, and dosen’t know how to find it..</p>
</div>

			<div class="reply">
				<a class="comment-reply-link" href="http://www.ens.ro/2012/05/17/symfony2-jobeet-day-10-the-forms/?replytocom=6035#respond" onclick="return addComment.moveForm(&quot;comment-6035&quot;, &quot;6035&quot;, &quot;respond&quot;, &quot;1271&quot;)">Reply <span>↓</span></a>			</div><!-- .reply -->
		</article><!-- #comment-## -->

	<ul class="children">
	<li class="comment odd alt depth-3" id="li-comment-6036">
		<article id="comment-6036" class="comment">
			<footer class="comment-meta">
				<div class="comment-author vcard">
					<img alt="" src="./Symfony2 Jobeet Day 10  The Forms   ENS_files/f622d62affb02e0607819940cc5c0fc3(1)" class="avatar avatar-39 photo" height="39" width="39"><span class="fn">Ovidiu</span> on <a href="http://www.ens.ro/2012/05/17/symfony2-jobeet-day-10-the-forms/#comment-6036"><time datetime="2012-11-17T23:13:28+00:00">November 17, 2012 at 11:13 pm</time></a> <span class="says">said:</span>
									</div><!-- .comment-author .vcard -->

				
			</footer>

			<div class="comment-content"><p>I fixed with<br>
use Ens\JobeetBundle\Entity\Job;</p>
</div>

			<div class="reply">
				<a class="comment-reply-link" href="http://www.ens.ro/2012/05/17/symfony2-jobeet-day-10-the-forms/?replytocom=6036#respond" onclick="return addComment.moveForm(&quot;comment-6036&quot;, &quot;6036&quot;, &quot;respond&quot;, &quot;1271&quot;)">Reply <span>↓</span></a>			</div><!-- .reply -->
		</article><!-- #comment-## -->

	</li>
</ul>
</li>
</ul>
</li>
	<li class="comment even thread-even depth-1" id="li-comment-6531">
		<article id="comment-6531" class="comment">
			<footer class="comment-meta">
				<div class="comment-author vcard">
					<img alt="" src="./Symfony2 Jobeet Day 10  The Forms   ENS_files/f622d62affb02e0607819940cc5c0fc3" class="avatar avatar-68 photo" height="68" width="68"><span class="fn">Ovidiu</span> on <a href="http://www.ens.ro/2012/05/17/symfony2-jobeet-day-10-the-forms/#comment-6531"><time datetime="2012-11-21T20:26:02+00:00">November 21, 2012 at 8:26 pm</time></a> <span class="says">said:</span>
									</div><!-- .comment-author .vcard -->

				
			</footer>

			<div class="comment-content"><p>Hey, my admin bar is not displayed, have any idea if on symfony 2.1 the app.request.get() was modified?</p>
<p>or why it is not displayed?</p>
</div>

			<div class="reply">
				<a class="comment-reply-link" href="http://www.ens.ro/2012/05/17/symfony2-jobeet-day-10-the-forms/?replytocom=6531#respond" onclick="return addComment.moveForm(&quot;comment-6531&quot;, &quot;6531&quot;, &quot;respond&quot;, &quot;1271&quot;)">Reply <span>↓</span></a>			</div><!-- .reply -->
		</article><!-- #comment-## -->

	<ul class="children">
	<li class="comment odd alt depth-2" id="li-comment-8486">
		<article id="comment-8486" class="comment">
			<footer class="comment-meta">
				<div class="comment-author vcard">
					<img alt="" src="./Symfony2 Jobeet Day 10  The Forms   ENS_files/4158fc7eaae01eeee2cb2c04ecbc0765" class="avatar avatar-39 photo" height="39" width="39"><span class="fn"><a href="http://alexjj.tk/" onclick="javascript:_gaq.push([&#39;_trackEvent&#39;,&#39;outbound-commentauthor&#39;,&#39;http://alexjj.tk&#39;]);" rel="external nofollow" class="url">Alex</a></span> on <a href="http://www.ens.ro/2012/05/17/symfony2-jobeet-day-10-the-forms/#comment-8486"><time datetime="2012-12-04T13:31:05+00:00">December 4, 2012 at 1:31 pm</time></a> <span class="says">said:</span>
									</div><!-- .comment-author .vcard -->

				
			</footer>

			<div class="comment-content"><p>Link wrong. To show the panel to dial url:<br>
/app_dev.php/job/company-100/paris-france/job_100/web-developer</p>
<p>Instead of ID must be entered TOKEN<br>
 <img src="./Symfony2 Jobeet Day 10  The Forms   ENS_files/icon_smile.gif" alt=":)" class="wp-smiley"> </p>
</div>

			<div class="reply">
				<a class="comment-reply-link" href="http://www.ens.ro/2012/05/17/symfony2-jobeet-day-10-the-forms/?replytocom=8486#respond" onclick="return addComment.moveForm(&quot;comment-8486&quot;, &quot;8486&quot;, &quot;respond&quot;, &quot;1271&quot;)">Reply <span>↓</span></a>			</div><!-- .reply -->
		</article><!-- #comment-## -->

	</li>
</ul>
</li>
	<li class="comment even thread-odd thread-alt depth-1" id="li-comment-7365">
		<article id="comment-7365" class="comment">
			<footer class="comment-meta">
				<div class="comment-author vcard">
					<img alt="" src="./Symfony2 Jobeet Day 10  The Forms   ENS_files/4de6a65f5dcd2a13695058b5c6b636d9" class="avatar avatar-68 photo" height="68" width="68"><span class="fn">Yuri</span> on <a href="http://www.ens.ro/2012/05/17/symfony2-jobeet-day-10-the-forms/#comment-7365"><time datetime="2012-11-26T15:40:31+00:00">November 26, 2012 at 3:40 pm</time></a> <span class="says">said:</span>
									</div><!-- .comment-author .vcard -->

				
			</footer>

			<div class="comment-content"><p>Hello,<br>
Thank you for a nice guide.</p>
<p>I’am traying to edit a Job … web/app_dev.php/job/job_100/edit<br>
but I have this error:</p>
<p>[Semantical Error] The annotation “@Doctrine\ORM\Mapping\postPersist” in method Ens\JobeetBundle\Entity\Job::upload() does not exist, or could not be auto-loaded.<br>
500 Internal Server Error – AnnotationException</p>
<p>this is my Job.php file:<br>
file) {<br>
        return;<br>
      }<br>
…</p>
<p>I use “symfony/symfony”: “2.1.*”,<br>
        “doctrine/orm”: “&gt;=2.3.0″,<br>
        “doctrine/doctrine-bundle”: “1.0.*”,</p>
<p>Probably I need to register ORM Annotations, but how can I do this?</p>
<p>Can you help me?</p>
<p>Thanks.</p>
</div>

			<div class="reply">
				<a class="comment-reply-link" href="http://www.ens.ro/2012/05/17/symfony2-jobeet-day-10-the-forms/?replytocom=7365#respond" onclick="return addComment.moveForm(&quot;comment-7365&quot;, &quot;7365&quot;, &quot;respond&quot;, &quot;1271&quot;)">Reply <span>↓</span></a>			</div><!-- .reply -->
		</article><!-- #comment-## -->

	<ul class="children">
	<li class="comment odd alt depth-2" id="li-comment-13495">
		<article id="comment-13495" class="comment">
			<footer class="comment-meta">
				<div class="comment-author vcard">
					<img alt="" src="./Symfony2 Jobeet Day 10  The Forms   ENS_files/44cfb0209c7fc8ab4db55bf9be40b95c" class="avatar avatar-39 photo" height="39" width="39"><span class="fn"><a href="http://toporov.org/" onclick="javascript:_gaq.push([&#39;_trackEvent&#39;,&#39;outbound-commentauthor&#39;,&#39;http://toporov.org&#39;]);" rel="external nofollow" class="url">Vasiliy Toporov</a></span> on <a href="http://www.ens.ro/2012/05/17/symfony2-jobeet-day-10-the-forms/#comment-13495"><time datetime="2013-01-02T12:24:08+00:00">January 2, 2013 at 12:24 pm</time></a> <span class="says">said:</span>
									</div><!-- .comment-author .vcard -->

				
			</footer>

			<div class="comment-content"><p>Your platform is not Windows? If you make this tutorial on LAMP stack, you should change:</p>
<p>/**<br>
  * @ORM\postPersist<br>
  */</p>
<p>to</p>
<p>/**<br>
  * @ORM\PostPersist<br>
  */</p>
<p><a href="http://stackoverflow.com/questions/12735010/doctrine2-haslifecyclecallbacks-semantical-error" onclick="javascript:_gaq.push([&#39;_trackEvent&#39;,&#39;outbound-comment&#39;,&#39;http://stackoverflow.com&#39;]);" rel="nofollow">http://stackoverflow.com/questions/12735010/doctrine2-haslifecyclecallbacks-semantical-error</a></p>
</div>

			<div class="reply">
				<a class="comment-reply-link" href="http://www.ens.ro/2012/05/17/symfony2-jobeet-day-10-the-forms/?replytocom=13495#respond" onclick="return addComment.moveForm(&quot;comment-13495&quot;, &quot;13495&quot;, &quot;respond&quot;, &quot;1271&quot;)">Reply <span>↓</span></a>			</div><!-- .reply -->
		</article><!-- #comment-## -->

	</li>
</ul>
</li>
	<li class="comment even thread-even depth-1" id="li-comment-19800">
		<article id="comment-19800" class="comment">
			<footer class="comment-meta">
				<div class="comment-author vcard">
					<img alt="" src="./Symfony2 Jobeet Day 10  The Forms   ENS_files/e14d1a8979ba9740af434f94e8a348bf" class="avatar avatar-68 photo" height="68" width="68"><span class="fn">aziz</span> on <a href="http://www.ens.ro/2012/05/17/symfony2-jobeet-day-10-the-forms/#comment-19800"><time datetime="2013-01-29T15:47:18+00:00">January 29, 2013 at 3:47 pm</time></a> <span class="says">said:</span>
									</div><!-- .comment-author .vcard -->

				
			</footer>

			<div class="comment-content"><p>When I try to add a field job with the company logo<br>
I get this error<br>
Unable to guess the mime type as no guessers are available (Did you enable the php_fileinfo extension?)<br>
thinks</p>
</div>

			<div class="reply">
				<a class="comment-reply-link" href="http://www.ens.ro/2012/05/17/symfony2-jobeet-day-10-the-forms/?replytocom=19800#respond" onclick="return addComment.moveForm(&quot;comment-19800&quot;, &quot;19800&quot;, &quot;respond&quot;, &quot;1271&quot;)">Reply <span>↓</span></a>			</div><!-- .reply -->
		</article><!-- #comment-## -->

	<ul class="children">
	<li class="comment odd alt depth-2" id="li-comment-20035">
		<article id="comment-20035" class="comment">
			<footer class="comment-meta">
				<div class="comment-author vcard">
					<img alt="" src="./Symfony2 Jobeet Day 10  The Forms   ENS_files/e14d1a8979ba9740af434f94e8a348bf(1)" class="avatar avatar-39 photo" height="39" width="39"><span class="fn">aziz</span> on <a href="http://www.ens.ro/2012/05/17/symfony2-jobeet-day-10-the-forms/#comment-20035"><time datetime="2013-01-30T17:41:11+00:00">January 30, 2013 at 5:41 pm</time></a> <span class="says">said:</span>
									</div><!-- .comment-author .vcard -->

				
			</footer>

			<div class="comment-content"><p>Aie Aie<br>
yes I forget to enable the  php_fileinfo extension</p>
</div>

			<div class="reply">
				<a class="comment-reply-link" href="http://www.ens.ro/2012/05/17/symfony2-jobeet-day-10-the-forms/?replytocom=20035#respond" onclick="return addComment.moveForm(&quot;comment-20035&quot;, &quot;20035&quot;, &quot;respond&quot;, &quot;1271&quot;)">Reply <span>↓</span></a>			</div><!-- .reply -->
		</article><!-- #comment-## -->

	</li>
</ul>
</li>
	<li class="comment even thread-odd thread-alt depth-1" id="li-comment-19803">
		<article id="comment-19803" class="comment">
			<footer class="comment-meta">
				<div class="comment-author vcard">
					<img alt="" src="./Symfony2 Jobeet Day 10  The Forms   ENS_files/948522e15c28bdca93751f01b2a16ebc" class="avatar avatar-68 photo" height="68" width="68"><span class="fn">Bohdan</span> on <a href="http://www.ens.ro/2012/05/17/symfony2-jobeet-day-10-the-forms/#comment-19803"><time datetime="2013-01-29T16:08:30+00:00">January 29, 2013 at 4:08 pm</time></a> <span class="says">said:</span>
									</div><!-- .comment-author .vcard -->

				
			</footer>

			<div class="comment-content"><p>Can you help me, please?<br>
public function preUpload()<br>
{<br>
        if (null !== $this-&gt;file) {<br>
            // do whatever you want to generate a unique name<br>
            $this-&gt;logo = uniqid() . ‘.’ . $this-&gt;file-&gt;guessExtension();<br>
        }<br>
}<br>
triggers<br>
public function guess($path)<br>
{<br>
        if (!is_file($path)) {<br>
            throw new FileNotFoundException($path);<br>
        }<br>
… and value of the $path == (string) /tmp/phpxOeU0W<br>
and I got FileNotFoundException</p>
<p>thanks in advance!</p>
</div>

			<div class="reply">
				<a class="comment-reply-link" href="http://www.ens.ro/2012/05/17/symfony2-jobeet-day-10-the-forms/?replytocom=19803#respond" onclick="return addComment.moveForm(&quot;comment-19803&quot;, &quot;19803&quot;, &quot;respond&quot;, &quot;1271&quot;)">Reply <span>↓</span></a>			</div><!-- .reply -->
		</article><!-- #comment-## -->

	<ul class="children">
	<li class="comment odd alt depth-2" id="li-comment-19882">
		<article id="comment-19882" class="comment">
			<footer class="comment-meta">
				<div class="comment-author vcard">
					<img alt="" src="./Symfony2 Jobeet Day 10  The Forms   ENS_files/948522e15c28bdca93751f01b2a16ebc(1)" class="avatar avatar-39 photo" height="39" width="39"><span class="fn">Bohdan</span> on <a href="http://www.ens.ro/2012/05/17/symfony2-jobeet-day-10-the-forms/#comment-19882"><time datetime="2013-01-30T00:41:38+00:00">January 30, 2013 at 12:41 am</time></a> <span class="says">said:</span>
									</div><!-- .comment-author .vcard -->

				
			</footer>

			<div class="comment-content"><p>Fixed!</p>
<p>In JobController I have replaced:<br>
$entity-&gt;file-&gt;move(__DIR__ . ‘/../../../../web/uploads/jobs’, $entity-&gt;file-&gt;getClientOriginalName());<br>
with<br>
copy($entity-&gt;file-&gt;getPathname(), __DIR__ . ‘/../../../../web/uploads/jobs/’. $entity-&gt;file-&gt;getClientOriginalName());<br>
because in preUpload and upload lifecycleCallbacks $this-&gt;file-&gt;guessExtension() and $this-&gt;file-&gt;move($this-&gt;getUploadRootDir(), $this-&gt;logo) trigger exceptions as file was moved before (in Controller) and currently does not exist in /tmp directory.<br>
I wonder how using move() for the same file twice works for others ?<br>
Please, respond if i mesunderstood smt.</p>
<p>Great tutorial – thanks for doing it, please keep going!</p>
</div>

			<div class="reply">
				<a class="comment-reply-link" href="http://www.ens.ro/2012/05/17/symfony2-jobeet-day-10-the-forms/?replytocom=19882#respond" onclick="return addComment.moveForm(&quot;comment-19882&quot;, &quot;19882&quot;, &quot;respond&quot;, &quot;1271&quot;)">Reply <span>↓</span></a>			</div><!-- .reply -->
		</article><!-- #comment-## -->

	</li>
</ul>
</li>
	<li class="comment even thread-even depth-1" id="li-comment-48649">
		<article id="comment-48649" class="comment">
			<footer class="comment-meta">
				<div class="comment-author vcard">
					<img alt="" src="./Symfony2 Jobeet Day 10  The Forms   ENS_files/512607538aa4efe768778ad5eaaf1109" class="avatar avatar-68 photo" height="68" width="68"><span class="fn">John</span> on <a href="http://www.ens.ro/2012/05/17/symfony2-jobeet-day-10-the-forms/#comment-48649"><time datetime="2013-05-15T12:24:59+00:00">May 15, 2013 at 12:24 pm</time></a> <span class="says">said:</span>
									</div><!-- .comment-author .vcard -->

				
			</footer>

			<div class="comment-content"><p>FatalErrorException: Compile Error: Declaration of Ens\JobeetBundle\Form\JobType::buildForm() must be compatible with that of Symfony\Component\Form\FormTypeInterface::buildForm() in D:\Git_repos\jobeet_symfony\src\Ens\JobeetBundle\Form\JobType.php line 29<br>
please help</p>
</div>

			<div class="reply">
				<a class="comment-reply-link" href="http://www.ens.ro/2012/05/17/symfony2-jobeet-day-10-the-forms/?replytocom=48649#respond" onclick="return addComment.moveForm(&quot;comment-48649&quot;, &quot;48649&quot;, &quot;respond&quot;, &quot;1271&quot;)">Reply <span>↓</span></a>			</div><!-- .reply -->
		</article><!-- #comment-## -->

	<ul class="children">
	<li class="comment odd alt depth-2" id="li-comment-49669">
		<article id="comment-49669" class="comment">
			<footer class="comment-meta">
				<div class="comment-author vcard">
					<img alt="" src="./Symfony2 Jobeet Day 10  The Forms   ENS_files/404c338cd9480d50b12ca86cb380f4f3" class="avatar avatar-39 photo" height="39" width="39"><span class="fn"><a href="http://www.imatic.cz/" onclick="javascript:_gaq.push([&#39;_trackEvent&#39;,&#39;outbound-commentauthor&#39;,&#39;http://www.imatic.cz&#39;]);" rel="external nofollow" class="url">Jenkys</a></span> on <a href="http://www.ens.ro/2012/05/17/symfony2-jobeet-day-10-the-forms/#comment-49669"><time datetime="2013-05-22T14:35:17+00:00">May 22, 2013 at 2:35 pm</time></a> <span class="says">said:</span>
									</div><!-- .comment-author .vcard -->

				
			</footer>

			<div class="comment-content"><p>Hi, I had same problem. So I changed file JobType.php to this and it’s working:</p>
<p>add(‘category’);<br>
        $builder-&gt;add(‘type’, ‘choice’, array(‘choices’ =&gt; Job::getTypes(), ‘expanded’ =&gt; true));<br>
        $builder-&gt;add(‘company’);<br>
        $builder-&gt;add(‘url’);<br>
        $builder-&gt;add(‘logo’, null, array(‘label’ =&gt; ‘Company logo’));<br>
        $builder-&gt;add(‘how_to_apply’, null, array(‘label’ =&gt; ‘How to apply?’));<br>
        $builder-&gt;add(‘is_public’, null, array(‘label’ =&gt; ‘Public?’));<br>
        $builder-&gt;add(‘position’);<br>
        $builder-&gt;add(‘location’);<br>
        $builder-&gt;add(‘description’);<br>
        $builder-&gt;add(‘token’);<br>
        $builder-&gt;add(‘email’);<br>
    }</p>
<p>    public function setDefaultOptions(OptionsResolverInterface $resolver)<br>
    {<br>
        $resolver-&gt;setDefaults(array(<br>
            ‘data_class’ =&gt; ‘Ens\JobeetBundle\Entity\Job’<br>
        ));<br>
    }<br>
    public function getName()<br>
    {<br>
        return ‘ens_jobeetbundle_jobtype’;<br>
    }<br>
}</p>
</div>

			<div class="reply">
				<a class="comment-reply-link" href="http://www.ens.ro/2012/05/17/symfony2-jobeet-day-10-the-forms/?replytocom=49669#respond" onclick="return addComment.moveForm(&quot;comment-49669&quot;, &quot;49669&quot;, &quot;respond&quot;, &quot;1271&quot;)">Reply <span>↓</span></a>			</div><!-- .reply -->
		</article><!-- #comment-## -->

	<ul class="children">
	<li class="comment even depth-3" id="li-comment-49670">
		<article id="comment-49670" class="comment">
			<footer class="comment-meta">
				<div class="comment-author vcard">
					<img alt="" src="./Symfony2 Jobeet Day 10  The Forms   ENS_files/404c338cd9480d50b12ca86cb380f4f3" class="avatar avatar-39 photo" height="39" width="39"><span class="fn"><a href="http://www.imatic.cz/" onclick="javascript:_gaq.push([&#39;_trackEvent&#39;,&#39;outbound-commentauthor&#39;,&#39;http://www.imatic.cz&#39;]);" rel="external nofollow" class="url">Jenkys</a></span> on <a href="http://www.ens.ro/2012/05/17/symfony2-jobeet-day-10-the-forms/#comment-49670"><time datetime="2013-05-22T14:35:45+00:00">May 22, 2013 at 2:35 pm</time></a> <span class="says">said:</span>
									</div><!-- .comment-author .vcard -->

				
			</footer>

			<div class="comment-content"><p>… again …</p>
<p>namespace Ens\JobeetBundle\Form;</p>
<p>use Symfony\Component\Form\AbstractType;<br>
use Symfony\Component\Form\FormBuilderInterface;<br>
use Symfony\Component\OptionsResolver\OptionsResolverInterface;<br>
use Ens\JobeetBundle\Entity\Job;</p>
<p>class JobType extends AbstractType<br>
{<br>
    public function buildForm(FormBuilderInterface $builder, array $options)<br>
    {<br>
        $builder-&gt;add(‘category’);<br>
        $builder-&gt;add(‘type’, ‘choice’, array(‘choices’ =&gt; Job::getTypes(), ‘expanded’ =&gt; true));<br>
        $builder-&gt;add(‘company’);<br>
        $builder-&gt;add(‘url’);<br>
        $builder-&gt;add(‘logo’, null, array(‘label’ =&gt; ‘Company logo’));<br>
        $builder-&gt;add(‘how_to_apply’, null, array(‘label’ =&gt; ‘How to apply?’));<br>
        $builder-&gt;add(‘is_public’, null, array(‘label’ =&gt; ‘Public?’));<br>
        $builder-&gt;add(‘position’);<br>
        $builder-&gt;add(‘location’);<br>
        $builder-&gt;add(‘description’);<br>
        $builder-&gt;add(‘token’);<br>
        $builder-&gt;add(‘email’);<br>
    }</p>
<p>    public function setDefaultOptions(OptionsResolverInterface $resolver)<br>
    {<br>
        $resolver-&gt;setDefaults(array(<br>
            ‘data_class’ =&gt; ‘Ens\JobeetBundle\Entity\Job’<br>
        ));<br>
    }<br>
    public function getName()<br>
    {<br>
        return ‘ens_jobeetbundle_jobtype’;<br>
    }<br>
}</p>
</div>

			<div class="reply">
				<a class="comment-reply-link" href="http://www.ens.ro/2012/05/17/symfony2-jobeet-day-10-the-forms/?replytocom=49670#respond" onclick="return addComment.moveForm(&quot;comment-49670&quot;, &quot;49670&quot;, &quot;respond&quot;, &quot;1271&quot;)">Reply <span>↓</span></a>			</div><!-- .reply -->
		</article><!-- #comment-## -->

	</li>
</ul>
</li>
</ul>
</li>
	<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-54025">
		<article id="comment-54025" class="comment">
			<footer class="comment-meta">
				<div class="comment-author vcard">
					<img alt="" src="./Symfony2 Jobeet Day 10  The Forms   ENS_files/9a736571124901b75e8b005ab49aaf77" class="avatar avatar-68 photo" height="68" width="68"><span class="fn">Pipe</span> on <a href="http://www.ens.ro/2012/05/17/symfony2-jobeet-day-10-the-forms/#comment-54025"><time datetime="2013-06-18T20:57:24+00:00">June 18, 2013 at 8:57 pm</time></a> <span class="says">said:</span>
									</div><!-- .comment-author .vcard -->

				
			</footer>

			<div class="comment-content"><p>Thanks for this great tutorial!</p>
<p>I’m stuck on form validation, regardless wich value i put on fields, none of the fields are validated and job is saved into database…</p>
<p>I think symfony2 is ignoring my /Ens/JobeetBundle/Resources/config/validation.yml…</p>
<p>Do I need to activate it somewhere?<br>
Can you help me?</p>
<p>Thanks in advance…</p>
<p>PD: I’m using symfony 2.2.1</p>
</div>

			<div class="reply">
				<a class="comment-reply-link" href="http://www.ens.ro/2012/05/17/symfony2-jobeet-day-10-the-forms/?replytocom=54025#respond" onclick="return addComment.moveForm(&quot;comment-54025&quot;, &quot;54025&quot;, &quot;respond&quot;, &quot;1271&quot;)">Reply <span>↓</span></a>			</div><!-- .reply -->
		</article><!-- #comment-## -->

	</li>
		</ol>

		
		
	
									<div id="respond">
				<h3 id="reply-title">Leave a Reply <small><a rel="nofollow" id="cancel-comment-reply-link" href="http://www.ens.ro/2012/05/17/symfony2-jobeet-day-10-the-forms/#respond" style="display:none;">Cancel reply</a></small></h3>
									<form action="http://www.ens.ro/wp-comments-post.php" method="post" id="commentform">
																			<p class="comment-notes">Your email address will not be published. Required fields are marked <span class="required">*</span></p>							<p class="comment-form-author"><label for="author">Name <span class="required">*</span></label> <input id="author" name="author" type="text" value="" size="30" aria-required="true"></p>
<p class="comment-form-email"><label for="email">Email <span class="required">*</span></label> <input id="email" name="email" type="text" value="" size="30" aria-required="true"></p>
<p class="comment-form-url"><label for="url">Website</label><input id="url" name="url" type="text" value="" size="30"></p>
												<p class="comment-form-comment"><label for="comment">Comment</label><textarea id="comment" name="comment" cols="45" rows="8" aria-required="true"></textarea></p>						<p class="form-allowed-tags">You may use these <abbr title="HyperText Markup Language">HTML</abbr> tags and attributes:  <code>&lt;a href="" title=""&gt; &lt;abbr title=""&gt; &lt;acronym title=""&gt; &lt;b&gt; &lt;blockquote cite=""&gt; &lt;cite&gt; &lt;code&gt; &lt;del datetime=""&gt; &lt;em&gt; &lt;i&gt; &lt;q cite=""&gt; &lt;strike&gt; &lt;strong&gt; </code></p>						<p class="form-submit">
							<input name="submit" type="submit" id="submit" value="Post Comment">
							<input type="hidden" name="comment_post_ID" value="1271" id="comment_post_ID">
<input type="hidden" name="comment_parent" id="comment_parent" value="0">
						</p>
						<p style="display: none;"><input type="hidden" id="akismet_comment_nonce" name="akismet_comment_nonce" value="b96a862b97"></p>					</form>
							</div><!-- #respond -->
				<script type="text/javascript">
		jQuery(document).ready(function () {
			jQuery('#commentform').submit(function () {
				_gaq.push(
					['_setAccount', 'UA-29990339-1'],
					['_trackEvent', 'comment', 'submit']
				);
			});
		});
	</script>
				
</div><!-- #comments -->

				
			</div><!-- #content -->
		</div><!-- #primary -->


	</div><!-- #main -->

	<footer id="colophon" role="contentinfo">

			

			<div id="site-generator">
								<a href="http://wordpress.org/" title="Semantic Personal Publishing Platform">Proudly powered by WordPress</a>
			</div>
	</footer><!-- #colophon -->
</div><!-- #page -->

<div id="dcssb-slick" class="dc-social-slick vertical right align-top" style="float: none; position: fixed; z-index: 10000; margin-right: -100px; top: 50px;"><div class="tab" style="position: absolute; margin-left: -46px;"><span><img src="./Symfony2 Jobeet Day 10  The Forms   ENS_files/tab_right_vertical.png" alt="Share"></span></div><div id="dc-dcssb" class="dc-social-slick-content" style="height: 210px;">
		<ul id="nav-dcssb" class=""><li id="dcssb-twitter" class="size-box"><iframe id="twitter-widget-0" scrolling="no" frameborder="0" allowtransparency="true" src="./Symfony2 Jobeet Day 10  The Forms   ENS_files/tweet_button.1386967771.htm" class="twitter-share-button twitter-tweet-button twitter-count-vertical" title="Twitter Tweet Button" data-twttr-rendered="true" style="width: 59px; height: 62px;"></iframe></li>
			
			<div id="fb-root" class=" fb_reset"><div style="position: absolute; top: -10000px; height: 0px; width: 0px;"><div></div></div><div style="position: absolute; top: -10000px; height: 0px; width: 0px;"><div><iframe name="fb_xdm_frame_http" frameborder="0" allowtransparency="true" scrolling="no" id="fb_xdm_frame_http" aria-hidden="true" title="Facebook Cross Domain Communication Frame" tab-index="-1" src="./Symfony2 Jobeet Day 10  The Forms   ENS_files/xd_arbiter.htm" style="border: none;"></iframe><iframe name="fb_xdm_frame_https" frameborder="0" allowtransparency="true" scrolling="no" id="fb_xdm_frame_https" aria-hidden="true" title="Facebook Cross Domain Communication Frame" tab-index="-1" src="./Symfony2 Jobeet Day 10  The Forms   ENS_files/xd_arbiter(1).htm" style="border: none;"></iframe></div></div><script type="text/javascript" src="./Symfony2 Jobeet Day 10  The Forms   ENS_files/all.js" async=""></script></div>
			
<li id="dcssb-facebook" class="size-box"><fb:like href="http%3A%2F%2Fwww.ens.ro%2F2012%2F05%2F17%2Fsymfony2-jobeet-day-10-the-forms%2F" send="false" layout="box_count" show_faces="false" font="" fb-xfbml-state="rendered" class=" fb_edge_widget_with_comment fb_iframe_widget"><span style="height: 65px; width: 55px;"><iframe id="f21d5fe03c" name="f1af5229f8" scrolling="no" title="Like this content on Facebook." class="fb_ltr" src="./Symfony2 Jobeet Day 10  The Forms   ENS_files/like.htm" style="border: none; overflow: hidden; height: 65px; width: 55px;"></iframe></span></fb:like></li>
			<li id="dcssb-plusone" class="size-box"><div id="___plusone_0" style="text-indent: 0px; margin: 0px; padding: 0px; background-color: transparent; border-style: none; float: none; line-height: normal; font-size: 1px; vertical-align: baseline; display: inline-block; width: 50px; height: 60px; background-position: initial initial; background-repeat: initial initial;"><iframe frameborder="0" hspace="0" marginheight="0" marginwidth="0" scrolling="no" style="position: static; top: 0px; width: 50px; margin: 0px; border-style: none; left: 0px; visibility: visible; height: 60px;" tabindex="0" vspace="0" width="100%" id="I0_1387031756185" name="I0_1387031756185" src="./Symfony2 Jobeet Day 10  The Forms   ENS_files/fastbutton.htm" data-gapiattached="true" title="+1"></iframe></div></li>
			
				</ul>
		<div class="clear"></div>
		<div class="dc-corner"><span></span></div>
		</div></div>			<script type="text/javascript">_ga.trackFacebook();</script>
			<script type="text/javascript">
				jQuery(window).load(function() {

								
					var config = {
						idWrapper : 'dcssb-slick',
						location: 'right',
						align: 'top',
						offset: '50px',
						speed: 600,
						tabText: '<img src="http://www.ens.ro/wp-content/plugins/slick-social-share-buttons/css/images/tab_right_vertical.png" alt="Share" />',
						autoClose: true,
						loadOpen: false,
						classWrapper: 'dc-social-slick vertical',
						classOpen: 'dcssb-open',
						classClose: 'dcssb-close',
						classToggle: 'dcssb-link'					
					};
					if(!jQuery().dcSocialSlick) {
						jQuery.getScript('http://www.ens.ro/wp-content/plugins/slick-social-share-buttons/js/jquery.social.slick.1.0.js', function(){
							jQuery('#dc-dcssb').dcSocialSlick(config);
						}); 
					} else {
						jQuery('#dc-dcssb').dcSocialSlick(config);
					}

								});
			</script>
		
			<script type="text/javascript" src="./Symfony2 Jobeet Day 10  The Forms   ENS_files/shCore.js"></script>
<script type="text/javascript" src="./Symfony2 Jobeet Day 10  The Forms   ENS_files/shBrushXml.js"></script>
<script type="text/javascript" src="./Symfony2 Jobeet Day 10  The Forms   ENS_files/shBrushPhp.js"></script>
<script type="text/javascript" src="./Symfony2 Jobeet Day 10  The Forms   ENS_files/shBrushPlain.js"></script>
<script type="text/javascript">
	(function(){
		var corecss = document.createElement('link');
		var themecss = document.createElement('link');
		var corecssurl = "http://www.ens.ro/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/styles/shCore.css?ver=3.0.83c";
		if ( corecss.setAttribute ) {
				corecss.setAttribute( "rel", "stylesheet" );
				corecss.setAttribute( "type", "text/css" );
				corecss.setAttribute( "href", corecssurl );
		} else {
				corecss.rel = "stylesheet";
				corecss.href = corecssurl;
		}
		document.getElementsByTagName("head")[0].insertBefore( corecss, document.getElementById("syntaxhighlighteranchor") );
		var themecssurl = "http://www.ens.ro/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/styles/shThemeDefault.css?ver=3.0.83c";
		if ( themecss.setAttribute ) {
				themecss.setAttribute( "rel", "stylesheet" );
				themecss.setAttribute( "type", "text/css" );
				themecss.setAttribute( "href", themecssurl );
		} else {
				themecss.rel = "stylesheet";
				themecss.href = themecssurl;
		}
		//document.getElementById("syntaxhighlighteranchor").appendChild(themecss);
		document.getElementsByTagName("head")[0].insertBefore( themecss, document.getElementById("syntaxhighlighteranchor") );
	})();
	SyntaxHighlighter.config.strings.expandSource = '+ expand source';
	SyntaxHighlighter.config.strings.help = '?';
	SyntaxHighlighter.config.strings.alert = 'SyntaxHighlighter\n\n';
	SyntaxHighlighter.config.strings.noBrush = 'Can\'t find brush for: ';
	SyntaxHighlighter.config.strings.brushNotHtmlScript = 'Brush wasn\'t configured for html-script option: ';
	SyntaxHighlighter.defaults['pad-line-numbers'] = false;
	SyntaxHighlighter.defaults['tab-size'] = 2;
	SyntaxHighlighter.defaults['toolbar'] = false;
	SyntaxHighlighter.all();
</script>
<script type="text/javascript" src="./Symfony2 Jobeet Day 10  The Forms   ENS_files/jquery.form.min.js"></script>
<script type="text/javascript">
/* <![CDATA[ */
var _wpcf7 = {"loaderUrl":"http:\/\/www.ens.ro\/wp-content\/plugins\/contact-form-7\/images\/ajax-loader.gif","sending":"Sending ..."};
/* ]]> */
</script>
<script type="text/javascript" src="./Symfony2 Jobeet Day 10  The Forms   ENS_files/scripts.js"></script><iframe name="oauth2relay495586887" id="oauth2relay495586887" src="./Symfony2 Jobeet Day 10  The Forms   ENS_files/postmessageRelay.htm" style="width: 1px; height: 1px; position: absolute; top: -100px;"></iframe>


</body></html>